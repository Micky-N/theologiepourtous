import{z as W,ad as ae,ae as te,af as le,ag as se,ah as ie,D as B,r as U,G as X,I as v,e as u,w as q,H as m,g as K,C as i,U as x,V as G,ai as re,o as Z,c as ne,aj as j,ak as oe,al as ue,am as de,y as _,an as ce,ao as pe,ap as me,R as O,d as F,F as H,K as L,aq as fe,n as k,ar as ve,Q as ge,as as he,at as ye,f as I,h as be,O as qe,N as Q,t as Y,P as T,Y as Ve,au as ke,av as xe,aw as R,a8 as J}from"#entry";import{_ as $e}from"./XQVZmSxM.js";import{_ as we}from"./BUW2VJzu.js";import{_ as Ie}from"./B5BmDUTd.js";import{V as Be}from"./BGeCMNnO.js";const[ze,Fe]=ae("PinInputRoot");var Ce=W({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(l,{emit:f}){const a=l,s=f,{mask:n,otp:$,placeholder:z,type:C,disabled:g,dir:o}=te(a),{forwardRef:d}=le(),h=se(o),e=ie(a,"modelValue",s,{defaultValue:a.defaultValue??[],passive:a.modelValue===void 0}),c=B(()=>Array.isArray(e.value)?[...e.value]:[]),P=U(new Set);function N(y){P.value.add(y)}const M=B(()=>a.type==="number"),S=B(()=>c.value.filter(V=>!!V||M.value&&V===0).length===P.value.size);return X(e,()=>{S.value&&s("complete",e.value)},{deep:!0}),Fe({modelValue:e,currentModelValue:c,mask:n,otp:$,placeholder:z,type:C,dir:h,disabled:g,isCompleted:S,inputElements:P,onInputElementChange:N,isNumericMode:M}),(y,V)=>(u(),v(i(G),x(y.$attrs,{ref:i(d),dir:i(h),"data-complete":S.value?"":void 0,"data-disabled":i(g)?"":void 0}),{default:q(()=>[m(y.$slots,"default",{modelValue:i(e)}),K(Be,{id:y.id,as:"input",feature:"focusable",tabindex:"-1",value:c.value.join(""),name:y.name??"",disabled:i(g),required:y.required,onFocus:V[0]||(V[0]=A=>Array.from(P.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),Pe=Ce,Se=W({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(l){const f=l,a=ze(),s=B(()=>Array.from(a.inputElements.value)),n=B(()=>a.currentModelValue.value[f.index]),$=B(()=>f.disabled||a.disabled.value),z=B(()=>a.otp.value),C=B(()=>a.mask.value),{primitiveElement:g,currentElement:o}=re();function d(t){const r=t.target;if((t.data?.length??0)>1){y(r.value);return}if(a.isNumericMode.value&&!/^\d*$/.test(r.value)){r.value=r.value.replace(/\D/g,"");return}r.value=t.data??"",A(f.index,r.value);const p=s.value[f.index+1];p&&p.focus()}function h(){const t=o.value;oe(()=>{t&&!t.value&&(t.placeholder=a.placeholder.value)})}function e(t){ue(t,de(),void 0,{itemsArray:s.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:a.dir.value})}function c(t){if(t.preventDefault(),t.target.value)A(f.index,"");else{const b=s.value[f.index-1];b&&(b.focus(),A(f.index-1,""))}}function P(t){t.key==="Delete"&&(t.preventDefault(),A(f.index,""))}function N(t){const r=t.target;r.setSelectionRange(1,1),r.value||(r.placeholder="")}function M(t){h()}function S(t){t.preventDefault();const r=t.clipboardData;if(!r)return;const p=r.getData("text");y(p)}function y(t){const r=[...a.currentModelValue.value],p=t.length>=s.value.length?0:f.index,b=Math.min(p+t.length,s.value.length);for(let w=p;w<b;w++){const D=s.value[w],E=t[w-p];a.isNumericMode.value&&!/^\d*$/.test(E)||(r[w]=E,D.focus())}a.modelValue.value=r,s.value[b]?.focus()}function V(t){let r=t.length-1;for(;r>=0&&t[r]==="";)t.pop(),r--;return t}function A(t,r){const p=[...a.currentModelValue.value];if(a.isNumericMode.value){const b=+r;r===""||isNaN(b)?delete p[t]:p[t]=b}else p[t]=r;a.modelValue.value=V(p)}return X(n,()=>{n.value||h()}),Z(()=>{a.onInputElementChange(o.value)}),ne(()=>{a.inputElements?.value.delete(o.value)}),(t,r)=>(u(),v(i(G),{ref_key:"primitiveElement",ref:g,autocapitalize:"none",as:t.as,"as-child":t.asChild,autocomplete:z.value?"one-time-code":"false",type:C.value?"password":"text",inputmode:i(a).isNumericMode.value?"numeric":"text",pattern:i(a).isNumericMode.value?"[0-9]*":void 0,placeholder:i(a).placeholder.value,value:n.value,disabled:$.value,"data-disabled":$.value?"":void 0,"data-complete":i(a).isCompleted.value?"":void 0,"aria-label":`pin input ${t.index+1} of ${s.value.length}`,onInput:r[0]||(r[0]=p=>d(p)),onKeydown:[j(e,["left","right","up","down","home","end"]),j(c,["backspace"]),j(P,["delete"])],onFocus:N,onBlur:M,onPaste:S},{default:q(()=>[m(t.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),Ae=Se;const Me={slots:{root:"relative inline-flex items-center gap-1.5",base:["rounded-md border-0 placeholder:text-dimmed text-center focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"]},variants:{size:{xs:{base:"size-6 text-xs"},sm:{base:"size-7 text-xs"},md:{base:"size-8 text-sm"},lg:{base:"size-9 text-sm"},xl:{base:"size-10 text-base"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},highlight:{true:""}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ne={__name:"UPinInput",props:{as:{type:null,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},length:{type:[Number,String],required:!1,default:5},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:Array,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},mask:{type:Boolean,required:!1},modelValue:{type:null,required:!1},name:{type:String,required:!1},otp:{type:Boolean,required:!1},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"}},emits:["update:modelValue","complete","change","blur"],setup(l,{expose:f,emit:a}){const s=l,n=a,$=_(),z=ce(pe(s,"disabled","id","mask","name","otp","required","type"),n),{emitFormInput:C,emitFormFocus:g,emitFormChange:o,emitFormBlur:d,size:h,color:e,id:c,name:P,highlight:N,disabled:M,ariaAttrs:S}=me(s),y=B(()=>O({extend:O(Me),...$.ui?.pinInput||{}})({color:e.value,variant:s.variant,size:h.value,highlight:N.value})),V=U([]),A=U(!1);function t(b){const w=new Event("change",{target:{value:b}});n("change",w),o()}function r(b){(!b.relatedTarget||A.value)&&(n("blur",b),d())}function p(){s.autofocus&&V.value[0]?.$el?.focus()}return Z(()=>{setTimeout(()=>{p()},s.autofocusDelay)}),f({inputsRef:V}),(b,w)=>(u(),v(i(Pe),x({...i(z),...i(S)},{id:i(c),name:i(P),placeholder:l.placeholder,"model-value":l.modelValue,"default-value":l.defaultValue,class:y.value.root({class:[s.ui?.root,s.class]}),"onUpdate:modelValue":w[0]||(w[0]=D=>i(C)()),onComplete:t}),{default:q(()=>[(u(!0),F(H,null,L(i(fe)(s.length),(D,E)=>(u(),v(i(Ae),{key:D,ref_for:!0,ref:ee=>V.value[E]=ee,index:E,class:k(y.value.base({class:s.ui?.base})),disabled:i(M),onBlur:r,onFocus:i(g)},null,8,["index","class","disabled","onFocus"]))),128))]),_:1},16,["id","name","placeholder","model-value","default-value","class"]))}},Ee={slots:{root:"w-full space-y-6",header:"flex flex-col text-center",leading:"mb-2",leadingIcon:"size-8 shrink-0 inline-block",title:"text-xl text-pretty font-semibold text-highlighted",description:"mt-1 text-base text-pretty text-muted",body:"gap-y-6 flex flex-col",providers:"space-y-3",checkbox:"",select:"",password:"w-full",otp:"w-full justify-center",input:"w-full",separator:"",form:"space-y-5",footer:"text-sm text-center text-muted mt-2"}},Te={__name:"UAuthForm",props:{as:{type:null,required:!1},icon:{type:[String,Object],required:!1},title:{type:String,required:!1},description:{type:String,required:!1},fields:{type:Array,required:!1},providers:{type:Array,required:!1},separator:{type:[String,Object],required:!1,default:"or"},submit:{type:Object,required:!1},schema:{type:null,required:!1},validate:{type:Function,required:!1},validateOn:{type:Array,required:!1},validateOnInputDelay:{type:Number,required:!1},disabled:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingAuto:{type:Boolean,required:!1},class:{type:null,required:!1},onSubmit:{type:Function,required:!1},ui:{type:null,required:!1}},emits:["submit"],setup(l,{expose:f}){const a=l,s=ve((a.fields||[]).reduce((d,h)=>(h.name&&(d[h.name]=h.defaultValue),d),{})),n=ge(),{t:$}=he(),z=_(),C=ye("formRef"),g=U(!1),o=B(()=>O({extend:O(Ee),...z.ui?.authForm||{}})());return f({formRef:C,state:s}),(d,h)=>(u(),v(i(G),{as:l.as,class:k(o.value.root({class:[a.ui?.root,a.class]}))},{default:q(()=>[l.icon||n.icon||l.title||n.title||l.description||n.description||n.header?(u(),F("div",{key:0,class:k(o.value.header({class:a.ui?.header}))},[m(d.$slots,"header",{},()=>[l.icon||n.leading?(u(),F("div",{key:0,class:k(o.value.leading({class:a.ui?.leading}))},[m(d.$slots,"leading",{},()=>[l.icon?(u(),v(qe,{key:0,name:l.icon,class:k(o.value.leadingIcon({class:a.ui?.leadingIcon}))},null,8,["name","class"])):I("",!0)])],2)):I("",!0),l.title||n.title?(u(),F("div",{key:1,class:k(o.value.title({class:a.ui?.title}))},[m(d.$slots,"title",{},()=>[Q(Y(l.title),1)])],2)):I("",!0),l.description||n.description?(u(),F("div",{key:2,class:k(o.value.description({class:a.ui?.description}))},[m(d.$slots,"description",{},()=>[Q(Y(l.description),1)])],2)):I("",!0)])],2)):I("",!0),be("div",{class:k(o.value.body({class:a.ui?.body}))},[l.providers?.length||n.providers?(u(),F("div",{key:0,class:k(o.value.providers({class:a.ui?.providers}))},[m(d.$slots,"providers",{},()=>[(u(!0),F(H,null,L(l.providers,(e,c)=>(u(),v(T,x({key:c,block:"",color:"neutral",variant:"subtle"},{ref_for:!0},e),null,16))),128))])],2)):I("",!0),l.providers?.length&&l.fields?.length?(u(),v(Ve,x({key:1},typeof l.separator=="object"?l.separator:{label:l.separator},{class:o.value.separator({class:a.ui?.separator})}),null,16,["class"])):I("",!0),l.fields?.length?(u(),v($e,{key:2,ref_key:"formRef",ref:C,state:s,schema:l.schema,validate:l.validate,"validate-on":l.validateOn,class:k(o.value.form({class:a.ui?.form})),disabled:l.disabled,"loading-auto":l.loadingAuto,onSubmit:l.onSubmit},{default:q(()=>[(u(!0),F(H,null,L(l.fields,e=>(u(),v(ke,{key:e.name,label:e.type==="checkbox"?"":e.label??"",description:e.description,help:e.help,hint:e.hint,name:e.name,size:e.size,required:e.required,error:e.error},xe({default:q(()=>[m(d.$slots,`${e.name}-field`,x({ref_for:!0},{state:s,field:e}),()=>[e.type==="checkbox"?(u(),v(we,x({key:0,modelValue:s[e.name],"onUpdate:modelValue":c=>s[e.name]=c,class:o.value.checkbox({class:a.ui?.checkbox})},{ref_for:!0},i(R)(e,["description","help","hint","size"])),null,16,["modelValue","onUpdate:modelValue","class"])):e.type==="select"?(u(),v(Ie,x({key:1,modelValue:s[e.name],"onUpdate:modelValue":c=>s[e.name]=c,class:o.value.select({class:a.ui?.select})},{ref_for:!0},i(R)(e,["description","help","hint","size"])),null,16,["modelValue","onUpdate:modelValue","class"])):e.type==="password"?(u(),v(J,x({key:2,modelValue:s[e.name],"onUpdate:modelValue":c=>s[e.name]=c,class:o.value.password({class:a.ui?.password}),type:g.value?"text":"password"},{ref_for:!0},i(R)(e,["label","description","help","hint","size","type","required","defaultValue"]),{ui:{root:"w-full"}}),{trailing:q(()=>[K(T,{color:"neutral",variant:"link",size:"sm",icon:g.value?i(z).ui.icons.eyeOff:i(z).ui.icons.eye,"aria-label":g.value?i($)("authForm.hidePassword"):i($)("authForm.showPassword"),"aria-pressed":g.value,"aria-controls":"password",onClick:h[0]||(h[0]=c=>g.value=!g.value)},null,8,["icon","aria-label","aria-pressed"])]),_:1},16,["modelValue","onUpdate:modelValue","class","type"])):e.type==="otp"?(u(),v(Ne,x({key:3,id:e.name,modelValue:s[e.name],"onUpdate:modelValue":c=>s[e.name]=c,class:o.value.otp({class:a.ui?.otp}),otp:""},{ref_for:!0},e.otp),null,16,["id","modelValue","onUpdate:modelValue","class"])):(u(),v(J,x({key:4,modelValue:s[e.name],"onUpdate:modelValue":c=>s[e.name]=c,class:o.value.input({class:a.ui?.input})},{ref_for:!0},i(R)(e,["label","description","help","hint","size","required","defaultValue"])),null,16,["modelValue","onUpdate:modelValue","class"]))])]),_:2},[n[`${e.name}-label`]?{name:"label",fn:q(()=>[m(d.$slots,`${e.name}-label`)]),key:"0"}:void 0,n[`${e.name}-description`]?{name:"description",fn:q(()=>[m(d.$slots,`${e.name}-description`)]),key:"1"}:void 0,n[`${e.name}-hint`]?{name:"hint",fn:q(()=>[m(d.$slots,`${e.name}-hint`)]),key:"2"}:void 0,n[`${e.name}-help`]?{name:"help",fn:q(()=>[m(d.$slots,`${e.name}-help`)]),key:"3"}:void 0,n[`${e.name}-error`]?{name:"error",fn:q(()=>[m(d.$slots,`${e.name}-error`)]),key:"4"}:void 0]),1032,["label","description","help","hint","name","size","required","error"]))),128)),n.validation?m(d.$slots,"validation",{key:0}):I("",!0),m(d.$slots,"submit",{loading:l.loading},()=>[K(T,x({type:"submit",label:i($)("authForm.submit"),block:"",loading:l.loading,"loading-auto":l.loadingAuto},l.submit),null,16,["label","loading","loading-auto"])])]),_:3},8,["state","schema","validate","validate-on","class","disabled","loading-auto","onSubmit"])):I("",!0)],2),n.footer?(u(),F("div",{key:1,class:k(o.value.footer({class:a.ui?.footer}))},[m(d.$slots,"footer")],2)):I("",!0)]),_:3},8,["as","class"]))}};export{Te as _};
