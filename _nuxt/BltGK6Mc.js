import{B as J,aa as Ne,ad as je,ab as we,V as M,a9 as Re,z as q,e as n,w as i,X as F,f as V,G as e,E as R,af as Ee,aw as qe,a1 as le,ax as W,ay as ie,an as Ie,r as P,a6 as ye,g,L as oe,M as j,aq as ke,as as Se,h as I,a4 as ze,Z as E,$ as ne,ao as Ke,y as re,az as De,aA as $e,aj as Be,aB as Ge,ar as Ce,at as He,aC as Je,d as _,n as $,N as Ve,aD as ae,t as A,F as H,H as Q,aE as Qe,aF as G,aG as We,Q as se,a7 as Ze,aH as Xe,aI as Ye,aJ as ve,aK as be,ak as Te,a0 as Z,aL as et,aM as tt,a5 as _e,aN as at,I as he,W as ue,a8 as st,aO as Le,aP as ot,al as Oe,aQ as lt,o as Ue,am as it,ag as nt,aR as rt,aS as ut,aT as dt,v as ct,C as pe,a as mt,D as gt,aU as pt,P as ft,aV as vt,R as bt}from"#entry";import{_ as ht}from"./DTIFCxQf.js";import{_ as yt,a as kt}from"./BiYaFSpO.js";import{u as xt,V as wt,_ as Ae}from"./Cfwp0u7e.js";import{_ as xe}from"./sIOFFvLP.js";import{_ as Pe}from"./Cx4LSkzV.js";import{_ as qt}from"./B_d_Weqg.js";import{u as fe}from"./wZAZ0RkA.js";import{d as It}from"./D8rO69WY.js";import"./C-zcIKpn.js";import"./BlbQEa5j.js";const[St,zt]=Re("SwitchRoot");var $t=J({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(t,{emit:h}){const a=t,o=h,{disabled:b}=Ne(a),l=je(a,"modelValue",o,{defaultValue:a.defaultValue,passive:a.modelValue===void 0});function p(){b.value||(l.value=!l.value)}const{forwardRef:f,currentElement:y}=we(),k=xt(y),c=M(()=>a.id&&y.value?document.querySelector(`[for="${a.id}"]`)?.innerText:void 0);return zt({modelValue:l,toggleCheck:p,disabled:b}),(d,w)=>(n(),q(e(le),R(d.$attrs,{id:d.id,ref:e(f),role:"switch",type:d.as==="button"?"button":void 0,value:d.value,"aria-label":d.$attrs["aria-label"]||c.value,"aria-checked":e(l),"aria-required":d.required,"data-state":e(l)?"checked":"unchecked","data-disabled":e(b)?"":void 0,"as-child":d.asChild,as:d.as,disabled:e(b),onClick:p,onKeydown:Ee(qe(p,["prevent"]),["enter"])}),{default:i(()=>[F(d.$slots,"default",{modelValue:e(l)}),e(k)&&d.name?(n(),q(e(wt),{key:0,type:"checkbox",name:d.name,disabled:e(b),required:d.required,value:d.value,checked:!!e(l)},null,8,["name","disabled","required","value","checked"])):V("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),Bt=$t,Ct=J({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const h=St();return we(),(a,o)=>(n(),q(e(le),{"data-state":e(h).modelValue?.value?"checked":"unchecked","data-disabled":e(h).disabled.value?"":void 0,"as-child":a.asChild,as:a.as},{default:i(()=>[F(a.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),Vt=Ct;const Tt={class:"flex items-center gap-2"},_t={class:"mt-2 flex items-center gap-1"},Lt=J({__name:"BookmarkFormPopover",props:W({verseId:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:W(["closeForm","created"],["update:modelValue"]),setup(t,{emit:h}){const a=t,o=h,b=ie(t,"modelValue"),l=Ie({title:"",color:"blue"}),p=[{label:"Rouge",value:"red"},{label:"Rose",value:"pink"},{label:"Fuchsia",value:"fuchsia"},{label:"Violet",value:"purple"},{label:"Violet clair",value:"violet"},{label:"Indigo",value:"indigo"},{label:"Bleu",value:"blue"},{label:"Ciel",value:"sky"},{label:"Cyan",value:"cyan"},{label:"Teal",value:"teal"},{label:"Émeraude",value:"emerald"},{label:"Vert",value:"green"},{label:"Lime",value:"lime"},{label:"Jaune",value:"yellow"},{label:"Ambre",value:"amber"},{label:"Orange",value:"orange"},{label:"Brun",value:"brown"},{label:"Gris",value:"gray"},{label:"Gris neutre",value:"neutral"},{label:"Ardoise",value:"slate"},{label:"Pierre",value:"stone"},{label:"Zinc",value:"zinc"},{label:"Noir",value:"black"}],f=P(!1),y=P(""),k=ye();function c(){b.value=!1,o("closeForm")}async function d(){y.value="",f.value=!0;try{const w=await $fetch("/api/bible/bookmarks",{method:"POST",body:{verseId:a.verseId,title:l.title,color:l.color}});w.success?(k.add({title:"Favori ajouté",description:w.message,color:"primary"}),o("created",w.data),c()):y.value=w.message||"Erreur inconnue"}catch(w){y.value=w?.statusMessage||"Erreur lors de l’ajout du favori"}finally{f.value=!1}}return(w,m)=>{const z=E,O=Se,s=ke,u=Ae,r=oe,S=xe,B=Pe;return n(),q(B,{state:e(l),onSubmit:qe(d,["prevent"])},{default:i(()=>[g(S,{ui:{header:"p-2 sm:px-4",footer:"p-2 sm:px-4"}},{header:i(()=>[I("div",Tt,[g(z,{name:"i-lucide-bookmark",class:"text-primary-600"}),m[2]||(m[2]=I("span",{class:"font-semibold text-sm"},"Ajouter aux favoris",-1))])]),default:i(()=>[g(s,{label:"Titre (optionnel)",name:"title",class:"mb-4"},{default:i(()=>[g(O,{modelValue:e(l).title,"onUpdate:modelValue":m[0]||(m[0]=T=>e(l).title=T),placeholder:"Titre personnalisé...",class:"w-full"},null,8,["modelValue"])]),_:1}),g(s,{label:"Couleur du favori",name:"color"},{default:i(()=>[g(u,{modelValue:e(l).color,"onUpdate:modelValue":m[1]||(m[1]=T=>e(l).color=T),items:p,"label-key":"label","value-key":"value",class:"flex gap-2 w-full"},null,8,["modelValue"]),I("div",_t,[m[3]||(m[3]=j(" Aperçu : ",-1)),I("span",{style:ze([`background-color: var(--color-${e(l).color}-400)`,`border: solid 1px var(--color-${e(l).color}-700)`]),class:"inline-block size-4 rounded-full border"},null,4)])]),_:1})]),footer:i(()=>[g(r,{type:"submit",color:"primary",loading:e(f),class:"w-full flex justify-center"},{default:i(()=>[...m[4]||(m[4]=[j(" Ajouter ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["state"])}}}),Ot=Object.assign(Lt,{__name:"BookmarkFormPopover"}),Me={__name:"UContextMenuContent",props:{items:{type:null,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0},sub:{type:Boolean,required:!1},labelKey:{type:null,required:!0},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1},class:{type:null,required:!1},ui:{type:null,required:!0},uiOverride:{type:null,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:h}){const a=t,o=h,b=ne(),{dir:l}=Ke(),p=re(),f=De($e(()=>a.portal)),y=Be(Ge(a,"sub","items","portal","labelKey","checkedIcon","loadingIcon","externalIcon","class","ui","uiOverride"),o),k=Ce(b,["default"]),[c,d]=He(),w=M(()=>l.value==="rtl"?p.ui.icons.chevronLeft:p.ui.icons.chevronRight),m=M(()=>a.items?.length?Je(a.items)?a.items:[a.items]:[]);return(z,O)=>(n(),_(H,null,[g(e(c),null,{default:i(({item:s,active:u,index:r})=>[F(z.$slots,s.slot||"item",{item:s,index:r},()=>[F(z.$slots,s.slot?`${s.slot}-leading`:"item-leading",{item:s,active:u,index:r},()=>[s.loading?(n(),q(E,{key:0,name:t.loadingIcon||e(p).ui.icons.loading,class:$(t.ui.itemLeadingIcon({class:[t.uiOverride?.itemLeadingIcon,s.ui?.itemLeadingIcon],color:s?.color,loading:!0}))},null,8,["name","class"])):s.icon?(n(),q(E,{key:1,name:s.icon,class:$(t.ui.itemLeadingIcon({class:[t.uiOverride?.itemLeadingIcon,s.ui?.itemLeadingIcon],color:s?.color,active:u}))},null,8,["name","class"])):s.avatar?(n(),q(Ve,R({key:2,size:s.ui?.itemLeadingAvatarSize||t.uiOverride?.itemLeadingAvatarSize||t.ui.itemLeadingAvatarSize()},s.avatar,{class:t.ui.itemLeadingAvatar({class:[t.uiOverride?.itemLeadingAvatar,s.ui?.itemLeadingAvatar],active:u})}),null,16,["size","class"])):V("",!0)]),e(ae)(s,a.labelKey)||b[s.slot?`${s.slot}-label`:"item-label"]?(n(),_("span",{key:0,class:$(t.ui.itemLabel({class:[t.uiOverride?.itemLabel,s.ui?.itemLabel],active:u}))},[F(z.$slots,s.slot?`${s.slot}-label`:"item-label",{item:s,active:u,index:r},()=>[j(A(e(ae)(s,a.labelKey)),1)]),s.target==="_blank"&&t.externalIcon!==!1?(n(),q(E,{key:0,name:typeof t.externalIcon=="string"?t.externalIcon:e(p).ui.icons.external,class:$(t.ui.itemLabelExternalIcon({class:[t.uiOverride?.itemLabelExternalIcon,s.ui?.itemLabelExternalIcon],color:s?.color,active:u}))},null,8,["name","class"])):V("",!0)],2)):V("",!0),I("span",{class:$(t.ui.itemTrailing({class:[t.uiOverride?.itemTrailing,s.ui?.itemTrailing]}))},[F(z.$slots,s.slot?`${s.slot}-trailing`:"item-trailing",{item:s,active:u,index:r},()=>[s.children?.length?(n(),q(E,{key:0,name:w.value,class:$(t.ui.itemTrailingIcon({class:[t.uiOverride?.itemTrailingIcon,s.ui?.itemTrailingIcon],color:s?.color,active:u}))},null,8,["name","class"])):s.kbds?.length?(n(),_("span",{key:1,class:$(t.ui.itemTrailingKbds({class:[t.uiOverride?.itemTrailingKbds,s.ui?.itemTrailingKbds]}))},[(n(!0),_(H,null,Q(s.kbds,(S,B)=>(n(),q(Qe,R({key:B,size:s.ui?.itemTrailingKbdsSize||t.uiOverride?.itemTrailingKbdsSize||t.ui.itemTrailingKbdsSize()},{ref_for:!0},typeof S=="string"?{value:S}:S),null,16,["size"]))),128))],2)):V("",!0)]),g(e(G).ItemIndicator,{"as-child":""},{default:i(()=>[g(E,{name:t.checkedIcon||e(p).ui.icons.check,class:$(t.ui.itemTrailingIcon({class:[t.uiOverride?.itemTrailingIcon,s.ui?.itemTrailingIcon],color:s?.color}))},null,8,["name","class"])]),_:2},1024)],2)])]),_:3}),g(e(G).Portal,ve(be(e(f))),{default:i(()=>[(n(),q(We(t.sub?e(G).SubContent:e(G).Content),R({class:a.class},e(y)),{default:i(()=>[F(z.$slots,"content-top"),I("div",{role:"presentation",class:$(t.ui.viewport({class:t.uiOverride?.viewport}))},[(n(!0),_(H,null,Q(m.value,(s,u)=>(n(),q(e(G).Group,{key:`group-${u}`,class:$(t.ui.group({class:t.uiOverride?.group}))},{default:i(()=>[(n(!0),_(H,null,Q(s,(r,S)=>(n(),_(H,{key:`group-${u}-${S}`},[r.type==="label"?(n(),q(e(G).Label,{key:0,class:$(t.ui.label({class:[t.uiOverride?.label,r.ui?.label,r.class]}))},{default:i(()=>[g(e(d),{item:r,index:S},null,8,["item","index"])]),_:2},1032,["class"])):r.type==="separator"?(n(),q(e(G).Separator,{key:1,class:$(t.ui.separator({class:[t.uiOverride?.separator,r.ui?.separator,r.class]}))},null,8,["class"])):r?.children?.length?(n(),q(e(G).Sub,{key:2,open:r.open,"default-open":r.defaultOpen},{default:i(()=>[g(e(G).SubTrigger,{as:"button",type:"button",disabled:r.disabled,"text-value":e(ae)(r,a.labelKey),class:$(t.ui.item({class:[t.uiOverride?.item,r.ui?.item,r.class],color:r?.color}))},{default:i(()=>[g(e(d),{item:r,index:S},null,8,["item","index"])]),_:2},1032,["disabled","text-value","class"]),g(Me,R({sub:"",class:a.class,ui:t.ui,"ui-override":t.uiOverride,portal:t.portal,items:r.children,"align-offset":-4,"label-key":t.labelKey,"checked-icon":t.checkedIcon,"loading-icon":t.loadingIcon,"external-icon":t.externalIcon},{ref_for:!0},r.content),se({_:2},[Q(e(k),(B,T)=>({name:T,fn:i(N=>[F(z.$slots,T,R({ref_for:!0},N))])}))]),1040,["class","ui","ui-override","portal","items","label-key","checked-icon","loading-icon","external-icon"])]),_:2},1032,["open","default-open"])):r.type==="checkbox"?(n(),q(e(G).CheckboxItem,{key:3,"model-value":r.checked,disabled:r.disabled,"text-value":e(ae)(r,a.labelKey),class:$(t.ui.item({class:[t.uiOverride?.item,r.ui?.item,r.class],color:r?.color})),"onUpdate:modelValue":r.onUpdateChecked,onSelect:r.onSelect},{default:i(()=>[g(e(d),{item:r,index:S},null,8,["item","index"])]),_:2},1032,["model-value","disabled","text-value","class","onUpdate:modelValue","onSelect"])):(n(),q(e(G).Item,{key:4,"as-child":"",disabled:r.disabled,"text-value":e(ae)(r,a.labelKey),onSelect:r.onSelect},{default:i(()=>[g(Ze,R({ref_for:!0},e(Xe)(r),{custom:""}),{default:i(({active:B,...T})=>[g(Ye,R({ref_for:!0},T,{class:t.ui.item({class:[t.uiOverride?.item,r.ui?.item,r.class],active:B,color:r?.color})}),{default:i(()=>[g(e(d),{item:r,active:B,index:S},null,8,["item","active","index"])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["disabled","text-value","onSelect"]))],64))),128))]),_:2},1032,["class"]))),128))],2),F(z.$slots,"default"),F(z.$slots,"content-bottom")]),_:3},16,["class"]))]),_:3},16)],64))}},Ut={slots:{content:"min-w-32 bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-context-menu-content-transform-origin) flex flex-col",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",group:"p-1 isolate",label:"w-full flex items-center font-semibold text-highlighted",separator:"-mx-1 my-1 h-px bg-border",item:"group relative w-full flex items-center select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0",itemTrailingKbdsSize:"",itemLabel:"truncate",itemLabelExternalIcon:"inline-block size-3 align-top text-dimmed"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:text-highlighted data-[state=open]:text-highlighted data-highlighted:before:bg-elevated/50 data-[state=open]:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:text-default group-data-[state=open]:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}},size:{xs:{label:"p-1 text-xs gap-1",item:"p-1 text-xs gap-1",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},sm:{label:"p-1.5 text-xs gap-1.5",item:"p-1.5 text-xs gap-1.5",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},md:{label:"p-1.5 text-sm gap-1.5",item:"p-1.5 text-sm gap-1.5",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"md"},lg:{label:"p-2 text-sm gap-2",item:"p-2 text-sm gap-2",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"md"},xl:{label:"p-2 text-base gap-2",item:"p-2 text-base gap-2",itemLeadingIcon:"size-6",itemLeadingAvatarSize:"xs",itemTrailingIcon:"size-6",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"lg"}}},compoundVariants:[{color:"primary",active:!1,class:{item:"text-primary data-highlighted:text-primary data-highlighted:before:bg-primary/10 data-[state=open]:before:bg-primary/10",itemLeadingIcon:"text-primary/75 group-data-highlighted:text-primary group-data-[state=open]:text-primary"}},{color:"secondary",active:!1,class:{item:"text-secondary data-highlighted:text-secondary data-highlighted:before:bg-secondary/10 data-[state=open]:before:bg-secondary/10",itemLeadingIcon:"text-secondary/75 group-data-highlighted:text-secondary group-data-[state=open]:text-secondary"}},{color:"success",active:!1,class:{item:"text-success data-highlighted:text-success data-highlighted:before:bg-success/10 data-[state=open]:before:bg-success/10",itemLeadingIcon:"text-success/75 group-data-highlighted:text-success group-data-[state=open]:text-success"}},{color:"info",active:!1,class:{item:"text-info data-highlighted:text-info data-highlighted:before:bg-info/10 data-[state=open]:before:bg-info/10",itemLeadingIcon:"text-info/75 group-data-highlighted:text-info group-data-[state=open]:text-info"}},{color:"warning",active:!1,class:{item:"text-warning data-highlighted:text-warning data-highlighted:before:bg-warning/10 data-[state=open]:before:bg-warning/10",itemLeadingIcon:"text-warning/75 group-data-highlighted:text-warning group-data-[state=open]:text-warning"}},{color:"error",active:!1,class:{item:"text-error data-highlighted:text-error data-highlighted:before:bg-error/10 data-[state=open]:before:bg-error/10",itemLeadingIcon:"text-error/75 group-data-highlighted:text-error group-data-[state=open]:text-error"}},{color:"primary",active:!0,class:{item:"text-primary before:bg-primary/10",itemLeadingIcon:"text-primary"}},{color:"secondary",active:!0,class:{item:"text-secondary before:bg-secondary/10",itemLeadingIcon:"text-secondary"}},{color:"success",active:!0,class:{item:"text-success before:bg-success/10",itemLeadingIcon:"text-success"}},{color:"info",active:!0,class:{item:"text-info before:bg-info/10",itemLeadingIcon:"text-info"}},{color:"warning",active:!0,class:{item:"text-warning before:bg-warning/10",itemLeadingIcon:"text-warning"}},{color:"error",active:!0,class:{item:"text-error before:bg-error/10",itemLeadingIcon:"text-error"}}],defaultVariants:{size:"md"}},At={__name:"UContextMenu",props:{size:{type:null,required:!1},items:{type:null,required:!1},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1,default:!0},content:{type:Object,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},labelKey:{type:null,required:!1,default:"label"},disabled:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},pressOpenDelay:{type:Number,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:h}){const a=t,o=h,b=ne(),l=re(),p=Be(Te(a,"modal"),o),f=$e(()=>a.content),y=Ce(b,["default"]),k=M(()=>Z({extend:Z(Ut),...l.ui?.contextMenu||{}})({size:a.size}));return(c,d)=>(n(),q(e(tt),ve(be(e(p))),{default:i(()=>[b.default?(n(),q(e(et),{key:0,"as-child":"",disabled:t.disabled,class:$(a.class)},{default:i(()=>[F(c.$slots,"default")]),_:3},8,["disabled","class"])):V("",!0),g(Me,R({class:k.value.content({class:[!b.default&&a.class,a.ui?.content]}),ui:k.value,"ui-override":a.ui},f.value,{items:t.items,portal:t.portal,"label-key":t.labelKey,"checked-icon":t.checkedIcon,"loading-icon":t.loadingIcon,"external-icon":t.externalIcon}),se({_:2},[Q(e(y),(w,m)=>({name:m,fn:i(z=>[F(c.$slots,m,ve(be(z)))])}))]),1040,["class","ui","ui-override","items","portal","label-key","checked-icon","loading-icon","external-icon"])]),_:3},16))}},Pt={key:0,class:"cursor-pointer mr-0.5"},Mt={class:"inline-block align-top text-xs text-primary-600 dark:text-primary-400"},Ft={class:"flex items-center justify-between gap-2"},Nt=J({__name:"BibleVerse",props:{verse:{},notes:{},bookmark:{}},emits:["showCompare","addNote","refreshBookmark"],setup(t,{emit:h}){const a=t,o=h,b=P(!1),l=P(!1),p=ye(),{loggedIn:f}=_e(),y=M(()=>{const c=[{label:"Comparer",icon:"i-lucide-eye",onSelect:()=>o("showCompare",a.verse.verse),ui:{item:"cursor-pointer"}}];return f.value&&(c.push({label:"Marquer",icon:"i-lucide-bookmark",onSelect:()=>l.value=!0,ui:{item:"cursor-pointer"}}),c.push({label:"Ajouter Note",icon:"i-lucide-notebook-pen",onSelect:()=>o("addNote",a.verse.id),ui:{item:"cursor-pointer"}})),c}),k=async()=>{if(a.bookmark)try{await $fetch(`/api/bible/bookmarks/${a.bookmark.id}`,{method:"DELETE"}),p.add({title:"Signet supprimé",description:"Le signet a été supprimer avec succès"}),o("refreshBookmark")}catch(c){console.log(c)}};return(c,d)=>{const w=E,m=oe,z=xe,O=at,s=Ot,u=At;return n(),q(u,{items:e(y)},{default:i(()=>[I("span",null,[e(f)&&c.notes.length?(n(),_("button",Pt,[g(w,{name:"i-lucide-notebook-pen",class:"size-3 text-warning-500 dark:text-warning-400"})])):V("",!0),I("span",Mt,A(c.verse.verse),1),g(O,{open:e(l),"onUpdate:open":d[4]||(d[4]=r=>he(l)?l.value=r:null),content:{sideOffset:0},arrow:""},{anchor:i(()=>[I("span",{class:$({underline:e(l)||c.bookmark})},[c.bookmark?(n(),q(O,{key:1,mode:"hover",arrow:"","onUpdate:open":d[1]||(d[1]=r=>!r&&(b.value=!1))},se({default:i(()=>[I("span",{class:$(["decoration-2",{underline:e(l)||c.bookmark}]),style:ze(`text-decoration-color: var(--color-${c.bookmark?.color}-500)`)},A(c.verse.text),7)]),_:2},[c.bookmark.title?{name:"content",fn:i(()=>[g(z,{ui:{header:"p-2 sm:px-4",footer:"p-2 sm:px-4 flex items-center space-x-4"}},se({header:i(()=>[I("div",Ft,[I("p",null,A(c.bookmark.title),1),I("span",{class:"cursor-pointer rounded-sm bg-gray-50 hover:bg-red-50 flex items-center justify-center p-1 text-red-500 hover:text-red-700",onClick:d[0]||(d[0]=r=>b.value=!0)},[g(w,{name:"i-lucide-trash-2"})])])]),_:2},[e(b)?{name:"footer",fn:i(()=>[g(m,{size:"sm",color:"error",onClick:k},{default:i(()=>[...d[5]||(d[5]=[j(" Supprimer ",-1)])]),_:1}),g(m,{size:"sm",variant:"outline",color:"neutral"},{default:i(()=>[...d[6]||(d[6]=[j(" Annuler ",-1)])]),_:1})]),key:"0"}:void 0]),1024)]),key:"0"}:void 0]),1024)):(n(),_(H,{key:0},[j(A(c.verse.text),1)],64))],2)]),content:i(()=>[g(s,{"verse-id":c.verse.id,onCloseForm:d[2]||(d[2]=r=>l.value=!1),onCreated:d[3]||(d[3]=r=>o("refreshBookmark"))},null,8,["verse-id"])]),_:1},8,["open"])])]),_:1},8,["items"])}}}),jt=Object.assign(Nt,{__name:"BibleVerse"}),Rt={class:"p-6"},Et={class:"space-y-4"},Kt={class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},Dt={class:"font-medium"},Gt={key:0},Ht={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-60 overflow-y-auto"},Jt=["onClick"],Qt={class:"text-sm font-medium text-gray-900 dark:text-white"},Wt={class:"text-xs text-gray-500 dark:text-gray-400"},Zt={class:"mt-2 text-xs text-gray-500"},Xt={class:"flex justify-end gap-2 mt-6"},Yt=J({__name:"BibleCompareModal",props:W({availableVersions:{},book:{},chapter:{},version:{},verseStart:{},verseEnd:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const h=t,a=ie(t,"modelValue"),o=P(!1),b=P([h.version]),l=f=>{const y=b.value.indexOf(f);y>-1?b.value.splice(y,1):b.value.length<6&&b.value.push(f)},p=async()=>{if(!(b.value.length<2))try{o.value=!0;const f=h.availableVersions.filter(k=>b.value.includes(k.id)).map(k=>k.code),y=new URLSearchParams({book:h.book.code,chapter:h.chapter.toString(),verses:h.verseStart.toString(),versions:f.join(",")});h.verseEnd&&h.verseEnd!==h.verseStart&&y.set("verses",h.verseStart.toString()+"-"+h.verseEnd.toString()),await st(`/bible/compare?${y.toString()}`)}catch(f){console.error("Erreur lors de la comparaison:",f)}finally{o.value=!1,a.value=!1}};return ue(()=>h.version,f=>{b.value=[f]}),(f,y)=>{const k=qt,c=ke,d=oe,w=Le;return n(),q(w,{open:a.value,"onUpdate:open":y[1]||(y[1]=m=>a.value=m),title:"Comparer ce passage",description:"Terme théologique",ui:{description:"hidden",content:"max-w-2xl"}},{content:i(()=>[I("div",Rt,[I("div",Et,[I("div",null,[y[2]||(y[2]=I("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"}," Passage sélectionné : ",-1)),I("div",Kt,[I("p",Dt,[j(A(f.book.name)+" "+A(f.chapter)+":"+A(f.verseStart)+" ",1),f.verseEnd&&f.verseEnd!==f.verseStart?(n(),_("span",Gt," -"+A(f.verseEnd),1)):V("",!0)])])]),g(c,{label:"Versions à comparer (sélectionnez 2 à 6 versions)"},{default:i(()=>[I("div",Ht,[(n(!0),_(H,null,Q(f.availableVersions,m=>(n(),_("div",{key:m.id,class:"flex items-center space-x-2"},[g(k,{"model-value":e(b).includes(m.id),disabled:e(b).length>=6&&!e(b).includes(m.id),"onUpdate:modelValue":z=>l(m.id)},null,8,["model-value","disabled","onUpdate:modelValue"]),I("div",{class:"flex-1",onClick:z=>l(m.id)},[I("div",Qt,A(m.name),1),I("div",Wt,A(m.code)+" • "+A(m.language),1)],8,Jt)]))),128))]),I("div",Zt,A(e(b).length)+" version(s) sélectionnée(s) (minimum 2, maximum 6) ",1)]),_:1})]),I("div",Xt,[g(d,{label:"Annuler",variant:"ghost",onClick:y[0]||(y[0]=m=>a.value=!1)}),g(d,{label:"Comparer",disabled:e(b).length<2,loading:e(o),onClick:p},null,8,["disabled","loading"])])])]),_:1},8,["open"])}}}),ea=Object.assign(Yt,{__name:"BibleCompareModal"}),ta={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute start-0 flex items-start",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute end-0 flex items-start",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2 inset-y-1",trailing:"pe-2 inset-y-1",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"},autoresize:{true:{base:"resize-none"}}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},aa=["id","value","name","rows","placeholder","disabled","required"],sa=Object.assign({inheritAttrs:!1},{__name:"UTextarea",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},autoresize:{type:Boolean,required:!1},autoresizeDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},rows:{type:Number,required:!1,default:3},maxrows:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:[String,Object],required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:[String,Object],required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:[String,Object],required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:[String,Object],required:!1}},emits:["update:modelValue","blur","change"],setup(t,{expose:h,emit:a}){const o=t,b=a,l=ne(),p=ot(o,"modelValue",b,{defaultValue:o.defaultValue}),f=re(),{emitFormFocus:y,emitFormBlur:k,emitFormInput:c,emitFormChange:d,size:w,color:m,id:z,name:O,highlight:s,disabled:u,ariaAttrs:r}=Oe(o,{deferInputValidation:!0}),{isLeading:S,isTrailing:B,leadingIconName:T,trailingIconName:N}=lt(o),K=M(()=>Z({extend:Z(ta),...f.ui?.textarea||{}})({color:m.value,variant:o.variant,size:w?.value,loading:o.loading,highlight:s.value,autoresize:o.autoresize,leading:S.value||!!o.avatar||!!l.leading,trailing:B.value||!!l.trailing})),C=P(null);function X(x){o.modelModifiers?.trim&&(x=x?.trim()??null),o.modelModifiers?.number&&(x=it(x)),o.modelModifiers?.nullable&&(x||=null),o.modelModifiers?.optional&&(x||=void 0),p.value=x,c()}function Y(x){L(),o.modelModifiers?.lazy||X(x.target.value)}function ee(x){const D=x.target.value;o.modelModifiers?.lazy&&X(D),o.modelModifiers?.trim&&(x.target.value=D.trim()),d(),b("change",x)}function v(x){k(),b("blur",x)}function U(){o.autofocus&&C.value?.focus()}function L(){if(o.autoresize&&C.value){C.value.rows=o.rows;const x=C.value.style.overflow;C.value.style.overflow="hidden";const D=window.getComputedStyle(C.value),te=Number.parseInt(D.paddingTop),de=Number.parseInt(D.paddingBottom),ce=te+de,me=Number.parseInt(D.lineHeight),{scrollHeight:Fe}=C.value,ge=(Fe-ce)/me;ge>o.rows&&(C.value.rows=o.maxrows?Math.min(ge,o.maxrows):ge),C.value.style.overflow=x}}return ue(p,()=>{nt(L)}),Ue(()=>{setTimeout(()=>{U()},o.autofocusDelay),setTimeout(()=>{L()},o.autoresizeDelay)}),h({textareaRef:C}),(x,D)=>(n(),q(e(le),{as:t.as,class:$(K.value.root({class:[o.ui?.root,o.class]}))},{default:i(()=>[I("textarea",R({id:e(z),ref_key:"textareaRef",ref:C,value:e(p),name:e(O),rows:t.rows,placeholder:t.placeholder,class:K.value.base({class:o.ui?.base}),disabled:e(u),required:t.required},{...x.$attrs,...e(r)},{onInput:Y,onBlur:v,onChange:ee,onFocus:D[0]||(D[0]=(...te)=>e(y)&&e(y)(...te))}),null,16,aa),F(x.$slots,"default"),e(S)||t.avatar||l.leading?(n(),_("span",{key:0,class:$(K.value.leading({class:o.ui?.leading}))},[F(x.$slots,"leading",{},()=>[e(S)&&e(T)?(n(),q(E,{key:0,name:e(T),class:$(K.value.leadingIcon({class:o.ui?.leadingIcon}))},null,8,["name","class"])):t.avatar?(n(),q(Ve,R({key:1,size:o.ui?.leadingAvatarSize||K.value.leadingAvatarSize()},t.avatar,{class:K.value.leadingAvatar({class:o.ui?.leadingAvatar})}),null,16,["size","class"])):V("",!0)])],2)):V("",!0),e(B)||l.trailing?(n(),_("span",{key:1,class:$(K.value.trailing({class:o.ui?.trailing}))},[F(x.$slots,"trailing",{},()=>[e(N)?(n(),q(E,{key:0,name:e(N),class:$(K.value.trailingIcon({class:o.ui?.trailingIcon}))},null,8,["name","class"])):V("",!0)])],2)):V("",!0)]),_:3},8,["as","class"]))}}),oa={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{base:"cursor-not-allowed opacity-75",label:"cursor-not-allowed opacity-75",description:"cursor-not-allowed opacity-75"}}},defaultVariants:{color:"primary",size:"md"}},la=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:W({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:[String,Object],required:!1},checkedIcon:{type:[String,Object],required:!1},uncheckedIcon:{type:[String,Object],required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:W(["change"],["update:modelValue"]),setup(t,{emit:h}){const a=t,o=ne(),b=h,l=ie(t,"modelValue",{type:Boolean,default:void 0}),p=re(),f=rt(Te(a,"required","value","defaultValue")),{id:y,emitFormChange:k,emitFormInput:c,size:d,color:w,name:m,disabled:z,ariaAttrs:O}=Oe(a),s=y.value??ut(),u=M(()=>Z({extend:Z(oa),...p.ui?.switch||{}})({size:d.value,color:w.value,required:a.required,loading:a.loading,disabled:z.value||a.loading}));function r(S){const B=new Event("change",{target:{value:S}});b("change",B),k(),c()}return(S,B)=>(n(),q(e(le),{as:t.as,class:$(u.value.root({class:[a.ui?.root,a.class]}))},{default:i(()=>[I("div",{class:$(u.value.container({class:a.ui?.container}))},[g(e(Bt),R({id:e(s)},{...e(f),...S.$attrs,...e(O)},{modelValue:l.value,"onUpdate:modelValue":[B[0]||(B[0]=T=>l.value=T),r],name:e(m),disabled:e(z)||t.loading,class:u.value.base({class:a.ui?.base})}),{default:i(()=>[g(e(Vt),{class:$(u.value.thumb({class:a.ui?.thumb}))},{default:i(()=>[t.loading?(n(),q(E,{key:0,name:t.loadingIcon||e(p).ui.icons.loading,class:$(u.value.icon({class:a.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(n(),_(H,{key:1},[t.checkedIcon?(n(),q(E,{key:0,name:t.checkedIcon,class:$(u.value.icon({class:a.ui?.icon,checked:!0}))},null,8,["name","class"])):V("",!0),t.uncheckedIcon?(n(),q(E,{key:1,name:t.uncheckedIcon,class:$(u.value.icon({class:a.ui?.icon,unchecked:!0}))},null,8,["name","class"])):V("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),t.label||o.label||t.description||o.description?(n(),_("div",{key:0,class:$(u.value.wrapper({class:a.ui?.wrapper}))},[t.label||o.label?(n(),q(e(dt),{key:0,for:e(s),class:$(u.value.label({class:a.ui?.label}))},{default:i(()=>[F(S.$slots,"label",{label:t.label},()=>[j(A(t.label),1)])]),_:3},8,["for","class"])):V("",!0),t.description||o.description?(n(),_("p",{key:1,class:$(u.value.description({class:a.ui?.description}))},[F(S.$slots,"description",{description:t.description},()=>[j(A(t.description),1)])],2)):V("",!0)],2)):V("",!0)]),_:3},8,["as","class"]))}}),ia={class:"flex items-center gap-2"},na={class:"font-semibold text-lg"},ra={key:0,class:"text-red-500 text-sm mt-2"},ua={class:"w-full flex justify-end gap-2"},da=J({__name:"BibleNoteFormModal",props:W({verseId:{},note:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:W(["close","created","updated"],["update:modelValue"]),setup(t,{emit:h}){const a=t,o=h,b=ie(t,"modelValue"),l=P(!!a.note),p=Ie({title:a.note?.title??"",content:a.note?.content??"",isPrivate:a.note?.isPrivate??!0});ue(()=>a.note,w=>{w?(p.title=w.title??"",p.content=w.content??"",p.isPrivate=w.isPrivate??!0,l.value=!0):(p.title="",p.content="",p.isPrivate=!0,l.value=!1)});const f=P(!1),y=P(""),k=ye();function c(){b.value=!1,o("close")}async function d(){y.value="",f.value=!0;try{let w=null;l.value&&a.note?w=await $fetch(`/api/bible/notes/${a.note.id}`,{method:"PUT",body:{title:p.title,content:p.content,isPrivate:p.isPrivate}}):w=await $fetch("/api/bible/notes",{method:"POST",body:{verseId:a.verseId,title:p.title,content:p.content,isPrivate:p.isPrivate}}),w.success?(k.add({title:l.value?"Note modifiée":"Note ajoutée",description:w.message,color:"primary"}),l.value?o("updated",w.note):o("created",w.note),c()):y.value=w.message||"Erreur inconnue"}catch(w){y.value=w?.statusMessage||"Erreur lors de l’enregistrement de la note"}finally{f.value=!1}}return(w,m)=>{const z=E,O=Se,s=ke,u=sa,r=la,S=oe,B=Le,T=Pe;return n(),q(T,{state:p},{default:i(()=>[g(B,{open:b.value,"onUpdate:open":m[3]||(m[3]=N=>b.value=N),overlay:!0,ui:{content:"max-w-lg"}},{header:i(()=>[I("div",ia,[g(z,{name:"i-lucide-pencil",class:"text-primary-600"}),I("span",na,A(l.value?"Modifier la note":"Ajouter une note"),1)])]),body:i(()=>[g(s,{label:"Titre (optionnel)",name:"title"},{default:i(()=>[g(O,{modelValue:p.title,"onUpdate:modelValue":m[0]||(m[0]=N=>p.title=N),placeholder:"Titre de la note...",class:"w-full"},null,8,["modelValue"])]),_:1}),g(s,{label:"Contenu",name:"content",class:"mt-4",required:""},{default:i(()=>[g(u,{modelValue:p.content,"onUpdate:modelValue":m[1]||(m[1]=N=>p.content=N),placeholder:"Votre note...",class:"w-full",rows:5},null,8,["modelValue"])]),_:1}),g(s,{label:"Note privée",name:"isPrivate",class:"mt-4"},{default:i(()=>[g(r,{modelValue:p.isPrivate,"onUpdate:modelValue":m[2]||(m[2]=N=>p.isPrivate=N),label:"Visible uniquement par moi"},null,8,["modelValue"])]),_:1}),y.value?(n(),_("div",ra,A(y.value),1)):V("",!0)]),footer:i(()=>[I("div",ua,[g(S,{color:"secondary",variant:"ghost",onClick:c},{default:i(()=>[...m[4]||(m[4]=[j(" Annuler ",-1)])]),_:1}),g(S,{type:"submit",color:"primary",loading:f.value,onClick:d},{default:i(()=>[j(A(l.value?"Enregistrer":"Ajouter"),1)]),_:1},8,["loading"])])]),_:1},8,["open"])]),_:1},8,["state"])}}}),ca=Object.assign(da,{__name:"BibleNoteFormModal"}),ma={class:"space-y-6"},ga={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},pa={class:"flex flex-1 items-center gap-2"},fa={class:"space-x-1"},va={class:"flex justify-center gap-2"},ba=J({__name:"BibleReader",props:{book:{},chapter:{},versesData:{},notes:{},bookmarks:{},versions:{},selectedVersion:{}},emits:["update:chapter","refreshBookmark","refreshNotes"],setup(t,{emit:h}){const a=t,o=s=>{l.value={book:{code:a.book.code,name:a.book.name},verseStart:s,chapter:a.chapter,version:a.selectedVersion.id},f.value=!0},b=s=>{l.value={book:{code:a.book.code,name:a.book.name},verseStart:s,chapter:a.chapter,version:a.selectedVersion.id},y.value=!0},l=P(null),p=s=>{l.value={book:{code:a.book.code,name:a.book.name},verseStart:s,chapter:a.chapter,version:a.selectedVersion.id},k.value=!0},f=P(!1),y=P(!1),k=P(!1),c=h,d=M(()=>Array.from({length:a.versesData?.navigation.totalChapters||0},(s,u)=>u+1)),w=s=>a.notes.filter(u=>u.verse.verse===s)||[],m=s=>a.bookmarks.find(u=>u.verse.verse===s)||null,z=M(()=>a.versesData?.verses||[]),O=s=>{c("update:chapter",s)};return(s,u)=>{const r=Ae,S=oe,B=jt,T=xe,N=ea,K=ca;return n(),_("div",ma,[g(T,{class:"mb-4"},{header:i(()=>[I("div",ga,[I("div",pa,[u[6]||(u[6]=I("p",null,"Chapitre",-1)),g(r,{items:d.value,"model-value":s.chapter,placeholder:"Chapitre",class:"w-32","onUpdate:modelValue":O},null,8,["items","model-value"])]),g(S,{color:"secondary",variant:"ghost",to:"/bible/compare","trailing-icon":"i-lucide-chevron-right"},{default:i(()=>[...u[7]||(u[7]=[j(" Comparer ",-1)])]),_:1})])]),footer:i(()=>[I("div",va,[s.versesData?.navigation.previousChapter?(n(),q(S,{key:0,icon:"i-lucide-arrow-left",color:"primary",variant:"soft",onClick:u[1]||(u[1]=C=>O(s.versesData.navigation.previousChapter))},{default:i(()=>[...u[8]||(u[8]=[j(" Précédent ",-1)])]),_:1})):V("",!0),s.versesData?.navigation.nextChapter?(n(),q(S,{key:1,"trailing-icon":"i-lucide-arrow-right",color:"primary",variant:"soft",onClick:u[2]||(u[2]=C=>O(s.versesData.navigation.nextChapter))},{default:i(()=>[...u[9]||(u[9]=[j(" Suivant ",-1)])]),_:1})):V("",!0)])]),default:i(()=>[I("div",fa,[(n(!0),_(H,null,Q(z.value,C=>(n(),q(B,{key:C.id,verse:C,notes:w(C.verse),bookmark:m(C.verse),onShowCompare:o,onOpenBookmarkForm:b,onAddNote:p,onRefreshBookmark:u[0]||(u[0]=X=>c("refreshBookmark"))},null,8,["verse","notes","bookmark"]))),128))])]),_:1}),e(l)?(n(),q(N,R({key:0,modelValue:e(f),"onUpdate:modelValue":u[3]||(u[3]=C=>he(f)?f.value=C:null)},e(l),{"available-versions":s.versions}),null,16,["modelValue","available-versions"])):V("",!0),e(l)?(n(),q(K,{key:1,modelValue:e(k),"onUpdate:modelValue":u[4]||(u[4]=C=>he(k)?k.value=C:null),"verse-id":e(l).verseStart,onCreated:u[5]||(u[5]=C=>c("refreshNotes"))},null,8,["modelValue","verse-id"])):V("",!0)])}}}),ha=Object.assign(ba,{__name:"BibleReader"}),Va=J({__name:"index",async setup(t){let h,a;const o=ct(),{data:b}=([h,a]=pe(()=>fe("bible-books",()=>$fetch("/api/bible/books"),{transform:v=>v?.data||[]})),h=await h,a(),h),{data:l}=([h,a]=pe(()=>fe("bible-versions",()=>$fetch("/api/bible/versions"),{transform:v=>v?.data||[]})),h=await h,a(),h),{data:p}=([h,a]=pe(()=>fe("bible-verses",()=>$fetch(`/api/bible/verses/${o.query.book||"GEN"}/${o.query.chapter||"1"}`,{query:{version:o.query.version||"LSG"}}),{watch:[()=>o.query],transform:v=>v?.data||[]})),h=await h,a(),h),{loggedIn:f}=_e(),y=mt(),k=M({get:()=>o.query.book||"GEN",set:v=>{y.push({query:{...o.query,book:v}})}}),c=M({get:()=>parseInt(o.query.chapter||"1"),set:v=>{y.push({query:{...o.query,chapter:v}})}}),d=M({get:()=>o.query.version||"LSG",set:v=>{y.push({query:{...o.query,version:v}})}}),w=M(()=>b.value?.all||[]),m=P(null),z=P([]),O=P([]),s=P([]),u=M(()=>{const v=b.value?.grouped||{old:[],new:[]},U=v.old,L=v.new;return[{label:"Ancien Testament",open:U.some(x=>x.code===k.value),active:U.some(x=>x.code===k.value),ui:{link:"cursor-pointer"},children:U.map(x=>({label:x.name,onSelect:async()=>await T(x.code),active:k.value===x.code,ui:{link:"cursor-pointer"}}))},{label:"Nouveau Testament",open:L.some(x=>x.code===k.value),active:L.some(x=>x.code===k.value),ui:{link:"cursor-pointer"},children:L.map(x=>({label:x.name,onSelect:async()=>await T(x.code),active:k.value===x.code,ui:{link:"cursor-pointer"}}))}]}),r=M(()=>l.value?l.value.map(v=>({label:v.name,to:y.resolve({query:{...o.query,version:v.code}}).href,active:d.value===v.code})):[]),S=M(()=>!w.value||!k.value?null:w.value.find(v=>v.code==k.value)),B=M(()=>!l.value||!d.value?null:l.value.find(v=>v.code==d.value)),T=async v=>{await y.push({query:{...o.query,book:v,chapter:1}})},N=(v,U)=>{if(!z.value)return;const L=z.value.find(x=>x.bookCode===v);L?L.chaptersId.includes(U)||L.chaptersId.push(U):z.value.push({bookCode:v,chaptersId:[U]})},K=async v=>{await y.push({query:{...o.query,chapter:v}}),f&&k.value&&N(k.value,v)};gt({title:"Lire la Bible en ligne - Théologie Pour Tous",ogTitle:"Lire la Bible en ligne - Théologie Pour Tous",description:"Lisez la Bible en ligne avec différentes versions disponibles. Parcourez les livres et chapitres de la Bible facilement.",ogDescription:"Lisez la Bible en ligne avec différentes versions disponibles. Parcourez les livres et chapitres de la Bible facilement."});const C=async()=>{if(!(!f||!B.value||!l.value))try{const v=l.value.find(L=>L.code===d.value)?.id;if(!v)return;const U=await $fetch("/api/reading/sessions",{method:"POST",body:{action:"start",versionId:v,chaptersRead:JSON.stringify([{bookCode:k.value,chaptersId:c.value?[c.value]:[]}])}});if(U.success&&U.sessionId){const L=[{bookCode:k.value,chaptersId:c.value?[c.value]:[]}];m.value={id:U.sessionId,chaptersRead:L},z.value=L}}catch(v){console.error("Erreur lors du démarrage de la session:",v)}},X=async()=>{if(!(!f||!m.value))try{await $fetch("/api/reading/sessions",{method:"POST",body:{action:"end",sessionId:m.value.id,chaptersRead:JSON.stringify(z.value)}})}catch(v){console.error("Erreur lors de la fermeture de la session:",v)}};Ue(async()=>{f&&(await C(),await Y(),await ee())}),pt(async()=>{f&&await X()});const Y=async()=>{if(!(!d.value||!k.value||!c.value))try{const v=await $fetch("/api/bible/notes",{method:"GET",query:{book:k.value,chapter:c.value}});O.value=v?.data.notes||[]}catch(v){console.error("Erreur lors du chargement des notes:",v)}},ee=async()=>{if(!(!B.value||!k.value||!c.value))try{const v=await $fetch("/api/bible/bookmarks",{method:"GET",query:{book:k.value,chapter:c.value}});s.value=v?.data.bookmarks||[]}catch(v){console.error("Erreur lors du chargement des signets:",v)}};return ue([()=>o.query.chapter,()=>o.query.book],async()=>{await Y(),await ee()}),It(),(v,U)=>{const L=vt,x=ht,D=yt,te=ha,de=bt,ce=kt,me=ft;return n(),q(me,null,se({left:i(()=>[g(x,null,{top:i(()=>[...U[0]||(U[0]=[j(" Les livres ",-1)])]),default:i(()=>[e(w)?.length?(n(),q(L,{key:0,items:e(u),highlight:"",orientation:"vertical"},null,8,["items"])):V("",!0)]),_:1})]),default:i(()=>[e(S)&&e(c)?(n(),q(D,{key:0,title:`${e(S).name} ${e(c)}`,description:e(B)?e(B).name:"Aucune version sélectionnée"},null,8,["title","description"])):V("",!0),g(ce,null,{default:i(()=>[I("div",null,[e(S)&&e(c)&&e(B)&&e(p)?(n(),q(te,{key:0,book:e(S),chapter:e(c),"verses-data":e(p),versions:e(l)||[],"selected-version":e(B),notes:e(O),bookmarks:e(s),"onUpdate:chapter":K,onRefreshBookmark:ee,onRefreshNotes:Y},null,8,["book","chapter","verses-data","versions","selected-version","notes","bookmarks"])):V("",!0)]),g(de)]),_:1})]),_:2},[e(l)?.length?{name:"right",fn:i(()=>[g(x,null,{top:i(()=>[...U[1]||(U[1]=[j(" Versions disponibles ",-1)])]),default:i(()=>[g(L,{items:e(r),variant:"link",orientation:"vertical"},null,8,["items"])]),_:1})]),key:"0"}:void 0]),1024)}}});export{Va as default};
