import{B as N,v as T,r as j,C as b,bm as A,D as E,z as c,w as m,P as H,e as s,g as p,Y as M,J as O,E as R,G as o,f as x,d as S,F as V,H as G,n as J,I as Y}from"#entry";import{_ as K,a as Q}from"./BiYaFSpO.js";import{_ as W}from"./BFMXVLaz.js";import{_ as X}from"./Bp6obZjv.js";import{_ as Z}from"./D4Lnb6SJ.js";import{u as d}from"./DrlHj1GG.js";import{q as f}from"./DPY2zFt-.js";import{d as ee}from"./D8rO69WY.js";const u=7,ce=N({__name:"index",props:{themes:{}},async setup(k){let a,i;const _=T(),t=j(parseInt(_.query.page||"1")),{data:n}=([a,i]=b(()=>d("blog",()=>f("teaching").first())),a=await a,i(),a),{data:h}=([a,i]=b(()=>d("lessons-count",()=>f("lessons").count())),a=await a,i(),a),{data:g}=d(_.path,()=>f("lessons").limit(u).skip((t.value-1)*u).all(),{watch:[t]}),v=Math.ceil((h.value||0)/u);(t.value<1||_.query.page&&t.value===1||t.value>v)&&A("/enseignements");const y=r=>r.id===g.value?.[0]?.id&&t.value===1,C=n.value?.seo?.title||n.value?.title,P=n.value?.seo?.description||n.value?.description;E({title:C,ogTitle:C,description:P,ogDescription:P});const w=r=>k.themes.find(l=>l.path==="/enseignements/"+r.theme);return ee(),(r,l)=>{const U=M,B=K,$=W,q=X,D=Z,I=Q,F=O,z=H;return s(),c(z,null,{default:m(()=>[p(U,{src:"/images/hero-blog.webp",class:"w-full aspect-video max-h-[32rem] object-center"}),p(F,null,{default:m(()=>[p(B,R(o(n),{class:"py-[50px]"}),null,16),p(I,null,{default:m(()=>[o(g)?(s(),c(q,{key:0},{default:m(()=>[(s(!0),S(V,null,G(o(g),(e,L)=>(s(),c($,{key:L,to:e.path,title:e.title,description:e.description,image:e.image,date:new Date(e.date).toLocaleDateString("fr",{year:"numeric",month:"long",day:"numeric"}),badge:{label:w(e)?.title,color:w(e)?.color||"primary"},orientation:y(e)?"horizontal":"vertical",class:J([y(e)&&"col-span-full"]),variant:"naked",ui:{description:"line-clamp-2"}},null,8,["to","title","description","image","date","badge","orientation","class"]))),128))]),_:1})):x("",!0),o(v)>1?(s(),c(D,{key:1,page:o(t),"onUpdate:page":l[0]||(l[0]=e=>Y(t)?t.value=e:null),"items-per-page":u,"show-edges":"",total:o(h),to:e=>({path:"/enseignements",query:e>1?{page:e}:{}}),class:"mt-10 flex justify-center"},null,8,["page","total","to"])):x("",!0)]),_:1})]),_:1})]),_:1})}}});export{ce as default};
