import{B as x,D as w,a5 as y,a6 as b,W as C,r as E,z as T,w as t,G as l,e as _,M as o,g as r,a7 as z,a8 as B}from"#entry";import{o as k,s as m,_ as L}from"./DwS7qWGX.js";import"./1wnohwRh.js";import"./Crun2bm4.js";import"./CtvJZuv0.js";import"./DZ0GdWr0.js";const F=x({__name:"login",setup(M){w({title:"Connexion - Théologie pour Tous",description:"Connectez-vous à votre compte pour continuer votre parcours spirituel"});const i=y(),{login:d,isLoggedIn:p}=b();C(p,s=>{s&&B("/")},{immediate:!0});const u=[{name:"email",type:"text",label:"Email",placeholder:"Entrez votre email",required:!0},{name:"password",label:"Mot de passe",type:"password",placeholder:"Entrez votre mot de passe"}],c=[{label:"Google",icon:"i-simple-icons-google",onClick:()=>{i.add({title:"Prochainement",description:"Connexion avec Google bientôt disponible",color:"primary"})}}],f=k({email:m().email("Format email invalide"),password:m().min(1,"Le mot de passe est requis")}),n=E(!1);async function g(s){n.value=!0;try{const e=await d({email:s.data.email,password:s.data.password});i.add({title:"Connexion réussie",description:`Bienvenue ${e.user.name} !`,color:"success"})}catch(e){console.error("Erreur de connexion:",e),i.add({title:"Erreur de connexion",description:e.data?.message||"Email ou mot de passe incorrect",color:"error"})}finally{n.value=!1}}return(s,e)=>{const a=z,v=L;return _(),T(v,{fields:u,schema:l(f),providers:c,loading:l(n),title:"Bon retour parmi nous",icon:"i-lucide-cross",onSubmit:g},{description:t(()=>[e[1]||(e[1]=o(" Vous n'avez pas de compte ? ",-1)),r(a,{to:"/signup",class:"text-primary font-medium"},{default:t(()=>[...e[0]||(e[0]=[o("S'inscrire",-1)])]),_:1}),e[2]||(e[2]=o(". ",-1))]),"password-hint":t(()=>[r(a,{to:"/",class:"text-primary font-medium",tabindex:"-1"},{default:t(()=>[...e[3]||(e[3]=[o("Mot de passe oublié ?",-1)])]),_:1})]),footer:t(()=>[e[5]||(e[5]=o(" En vous connectant, vous acceptez nos ",-1)),r(a,{to:"/",class:"text-primary font-medium"},{default:t(()=>[...e[4]||(e[4]=[o("Conditions d'utilisation",-1)])]),_:1}),e[6]||(e[6]=o(". ",-1))]),_:1},8,["schema","loading"])}}});export{F as default};
