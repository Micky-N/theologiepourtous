import{B as D,aa as Pe,ad as Ae,ab as ve,V as F,a9 as Me,z as y,e as o,w as n,X as U,f as C,G as e,E as M,af as Fe,aw as ge,a1 as Z,ax as H,ay as X,an as be,r as L,a6 as he,g as f,L as Y,M as j,aq as pe,as as ye,h as q,a4 as je,Z as N,$ as ee,ao as Ne,y as ae,az as Ke,aA as xe,aj as ke,aB as Ee,ar as we,at as Re,aC as De,d as O,n as V,N as Ie,aD as W,t as P,F as R,H as G,aE as Ge,aF as K,aG as He,Q as fe,a7 as Qe,aH as We,aI as Je,aJ as de,aK as ce,ak as qe,a0 as Q,aL as Ze,aM as Xe,a5 as Ye,aN as ea,I as me,W as te,a8 as aa,aO as Se,aP as ta,al as ze,aQ as la,o as Ve,am as sa,ag as ia,aR as na,aS as oa,aT as ra,a as ua,v as da,D as ca,P as ma,aU as ga,R as pa}from"#entry";import{_ as fa}from"./DTIFCxQf.js";import{_ as va,a as ba}from"./BiYaFSpO.js";import{u as ha,V as ya,_ as $e}from"./Bb312l8Z.js";import{_ as Be}from"./sIOFFvLP.js";import{_ as Ce}from"./Cg8zKpQW.js";import{_ as xa}from"./BRBMR008.js";import{d as ka}from"./D8rO69WY.js";import"./CX8cS4wn.js";import"./D_FBULPC.js";const[wa,Ia]=Me("SwitchRoot");var qa=D({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(a,{emit:x}){const t=a,l=x,{disabled:c}=Pe(t),s=Ae(t,"modelValue",l,{defaultValue:t.defaultValue,passive:t.modelValue===void 0});function r(){c.value||(s.value=!s.value)}const{forwardRef:d,currentElement:m}=ve(),w=ha(m),B=F(()=>t.id&&m.value?document.querySelector(`[for="${t.id}"]`)?.innerText:void 0);return Ia({modelValue:s,toggleCheck:r,disabled:c}),(b,h)=>(o(),y(e(Z),M(b.$attrs,{id:b.id,ref:e(d),role:"switch",type:b.as==="button"?"button":void 0,value:b.value,"aria-label":b.$attrs["aria-label"]||B.value,"aria-checked":e(s),"aria-required":b.required,"data-state":e(s)?"checked":"unchecked","data-disabled":e(c)?"":void 0,"as-child":b.asChild,as:b.as,disabled:e(c),onClick:r,onKeydown:Fe(ge(r,["prevent"]),["enter"])}),{default:n(()=>[U(b.$slots,"default",{modelValue:e(s)}),e(w)&&b.name?(o(),y(e(ya),{key:0,type:"checkbox",name:b.name,disabled:e(c),required:b.required,value:b.value,checked:!!e(s)},null,8,["name","disabled","required","value","checked"])):C("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),Sa=qa,za=D({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const x=wa();return ve(),(t,l)=>(o(),y(e(Z),{"data-state":e(x).modelValue?.value?"checked":"unchecked","data-disabled":e(x).disabled.value?"":void 0,"as-child":t.asChild,as:t.as},{default:n(()=>[U(t.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),Va=za;const $a={class:"flex items-center gap-2"},Ba={class:"mt-2 flex items-center gap-1"},Ca=D({__name:"BookmarkFormPopover",props:H({verseId:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:H(["closeForm","created"],["update:modelValue"]),setup(a,{emit:x}){const t=a,l=x,c=X(a,"modelValue"),s=be({title:"",color:"blue"}),r=[{label:"Rouge",value:"red"},{label:"Rose",value:"pink"},{label:"Fuchsia",value:"fuchsia"},{label:"Violet",value:"purple"},{label:"Violet clair",value:"violet"},{label:"Indigo",value:"indigo"},{label:"Bleu",value:"blue"},{label:"Ciel",value:"sky"},{label:"Cyan",value:"cyan"},{label:"Teal",value:"teal"},{label:"Émeraude",value:"emerald"},{label:"Vert",value:"green"},{label:"Lime",value:"lime"},{label:"Jaune",value:"yellow"},{label:"Ambre",value:"amber"},{label:"Orange",value:"orange"},{label:"Brun",value:"brown"},{label:"Gris",value:"gray"},{label:"Gris neutre",value:"neutral"},{label:"Ardoise",value:"slate"},{label:"Pierre",value:"stone"},{label:"Zinc",value:"zinc"},{label:"Noir",value:"black"}],d=L(!1),m=L(""),w=he();function B(){c.value=!1,l("closeForm")}async function b(){m.value="",d.value=!0;try{const h=await $fetch("/api/bible/bookmarks",{method:"POST",body:{verseId:t.verseId,title:s.title,color:s.color}});h.success?(w.add({title:"Favori ajouté",description:h.message,color:"primary"}),l("created",h.data),B()):m.value=h.message||"Erreur inconnue"}catch(h){m.value=h?.statusMessage||"Erreur lors de l’ajout du favori"}finally{d.value=!1}}return(h,g)=>{const v=N,I=ye,i=pe,k=$e,u=Y,$=Be,_=Ce;return o(),y(_,{state:e(s),onSubmit:ge(b,["prevent"])},{default:n(()=>[f($,{ui:{header:"p-2 sm:px-4",footer:"p-2 sm:px-4"}},{header:n(()=>[q("div",$a,[f(v,{name:"i-lucide-bookmark",class:"text-primary-600"}),g[2]||(g[2]=q("span",{class:"font-semibold text-sm"},"Ajouter aux favoris",-1))])]),default:n(()=>[f(i,{label:"Titre (optionnel)",name:"title",class:"mb-4"},{default:n(()=>[f(I,{modelValue:e(s).title,"onUpdate:modelValue":g[0]||(g[0]=p=>e(s).title=p),placeholder:"Titre personnalisé...",class:"w-full"},null,8,["modelValue"])]),_:1}),f(i,{label:"Couleur du favori",name:"color"},{default:n(()=>[f(k,{modelValue:e(s).color,"onUpdate:modelValue":g[1]||(g[1]=p=>e(s).color=p),items:r,"label-key":"label","value-key":"value",class:"flex gap-2 w-full"},null,8,["modelValue"]),q("div",Ba,[g[3]||(g[3]=j(" Aperçu : ",-1)),q("span",{style:je([`background-color: var(--color-${e(s).color}-400)`,`border: solid 1px var(--color-${e(s).color}-700)`]),class:"inline-block size-4 rounded-full border"},null,4)])]),_:1})]),footer:n(()=>[f(u,{type:"submit",color:"primary",loading:e(d),class:"w-full flex justify-center"},{default:n(()=>[...g[4]||(g[4]=[j(" Ajouter ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["state"])}}}),_a=Object.assign(Ca,{__name:"BookmarkFormPopover"}),_e={__name:"UContextMenuContent",props:{items:{type:null,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0},sub:{type:Boolean,required:!1},labelKey:{type:null,required:!0},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1},class:{type:null,required:!1},ui:{type:null,required:!0},uiOverride:{type:null,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(a,{emit:x}){const t=a,l=x,c=ee(),{dir:s}=Ne(),r=ae(),d=Ke(xe(()=>t.portal)),m=ke(Ee(t,"sub","items","portal","labelKey","checkedIcon","loadingIcon","externalIcon","class","ui","uiOverride"),l),w=we(c,["default"]),[B,b]=Re(),h=F(()=>s.value==="rtl"?r.ui.icons.chevronLeft:r.ui.icons.chevronRight),g=F(()=>t.items?.length?De(t.items)?t.items:[t.items]:[]);return(v,I)=>(o(),O(R,null,[f(e(B),null,{default:n(({item:i,active:k,index:u})=>[U(v.$slots,i.slot||"item",{item:i,index:u},()=>[U(v.$slots,i.slot?`${i.slot}-leading`:"item-leading",{item:i,active:k,index:u},()=>[i.loading?(o(),y(N,{key:0,name:a.loadingIcon||e(r).ui.icons.loading,class:V(a.ui.itemLeadingIcon({class:[a.uiOverride?.itemLeadingIcon,i.ui?.itemLeadingIcon],color:i?.color,loading:!0}))},null,8,["name","class"])):i.icon?(o(),y(N,{key:1,name:i.icon,class:V(a.ui.itemLeadingIcon({class:[a.uiOverride?.itemLeadingIcon,i.ui?.itemLeadingIcon],color:i?.color,active:k}))},null,8,["name","class"])):i.avatar?(o(),y(Ie,M({key:2,size:i.ui?.itemLeadingAvatarSize||a.uiOverride?.itemLeadingAvatarSize||a.ui.itemLeadingAvatarSize()},i.avatar,{class:a.ui.itemLeadingAvatar({class:[a.uiOverride?.itemLeadingAvatar,i.ui?.itemLeadingAvatar],active:k})}),null,16,["size","class"])):C("",!0)]),e(W)(i,t.labelKey)||c[i.slot?`${i.slot}-label`:"item-label"]?(o(),O("span",{key:0,class:V(a.ui.itemLabel({class:[a.uiOverride?.itemLabel,i.ui?.itemLabel],active:k}))},[U(v.$slots,i.slot?`${i.slot}-label`:"item-label",{item:i,active:k,index:u},()=>[j(P(e(W)(i,t.labelKey)),1)]),i.target==="_blank"&&a.externalIcon!==!1?(o(),y(N,{key:0,name:typeof a.externalIcon=="string"?a.externalIcon:e(r).ui.icons.external,class:V(a.ui.itemLabelExternalIcon({class:[a.uiOverride?.itemLabelExternalIcon,i.ui?.itemLabelExternalIcon],color:i?.color,active:k}))},null,8,["name","class"])):C("",!0)],2)):C("",!0),q("span",{class:V(a.ui.itemTrailing({class:[a.uiOverride?.itemTrailing,i.ui?.itemTrailing]}))},[U(v.$slots,i.slot?`${i.slot}-trailing`:"item-trailing",{item:i,active:k,index:u},()=>[i.children?.length?(o(),y(N,{key:0,name:h.value,class:V(a.ui.itemTrailingIcon({class:[a.uiOverride?.itemTrailingIcon,i.ui?.itemTrailingIcon],color:i?.color,active:k}))},null,8,["name","class"])):i.kbds?.length?(o(),O("span",{key:1,class:V(a.ui.itemTrailingKbds({class:[a.uiOverride?.itemTrailingKbds,i.ui?.itemTrailingKbds]}))},[(o(!0),O(R,null,G(i.kbds,($,_)=>(o(),y(Ge,M({key:_,size:i.ui?.itemTrailingKbdsSize||a.uiOverride?.itemTrailingKbdsSize||a.ui.itemTrailingKbdsSize()},{ref_for:!0},typeof $=="string"?{value:$}:$),null,16,["size"]))),128))],2)):C("",!0)]),f(e(K).ItemIndicator,{"as-child":""},{default:n(()=>[f(N,{name:a.checkedIcon||e(r).ui.icons.check,class:V(a.ui.itemTrailingIcon({class:[a.uiOverride?.itemTrailingIcon,i.ui?.itemTrailingIcon],color:i?.color}))},null,8,["name","class"])]),_:2},1024)],2)])]),_:3}),f(e(K).Portal,de(ce(e(d))),{default:n(()=>[(o(),y(He(a.sub?e(K).SubContent:e(K).Content),M({class:t.class},e(m)),{default:n(()=>[U(v.$slots,"content-top"),q("div",{role:"presentation",class:V(a.ui.viewport({class:a.uiOverride?.viewport}))},[(o(!0),O(R,null,G(g.value,(i,k)=>(o(),y(e(K).Group,{key:`group-${k}`,class:V(a.ui.group({class:a.uiOverride?.group}))},{default:n(()=>[(o(!0),O(R,null,G(i,(u,$)=>(o(),O(R,{key:`group-${k}-${$}`},[u.type==="label"?(o(),y(e(K).Label,{key:0,class:V(a.ui.label({class:[a.uiOverride?.label,u.ui?.label,u.class]}))},{default:n(()=>[f(e(b),{item:u,index:$},null,8,["item","index"])]),_:2},1032,["class"])):u.type==="separator"?(o(),y(e(K).Separator,{key:1,class:V(a.ui.separator({class:[a.uiOverride?.separator,u.ui?.separator,u.class]}))},null,8,["class"])):u?.children?.length?(o(),y(e(K).Sub,{key:2,open:u.open,"default-open":u.defaultOpen},{default:n(()=>[f(e(K).SubTrigger,{as:"button",type:"button",disabled:u.disabled,"text-value":e(W)(u,t.labelKey),class:V(a.ui.item({class:[a.uiOverride?.item,u.ui?.item,u.class],color:u?.color}))},{default:n(()=>[f(e(b),{item:u,index:$},null,8,["item","index"])]),_:2},1032,["disabled","text-value","class"]),f(_e,M({sub:"",class:t.class,ui:a.ui,"ui-override":a.uiOverride,portal:a.portal,items:u.children,"align-offset":-4,"label-key":a.labelKey,"checked-icon":a.checkedIcon,"loading-icon":a.loadingIcon,"external-icon":a.externalIcon},{ref_for:!0},u.content),fe({_:2},[G(e(w),(_,p)=>({name:p,fn:n(z=>[U(v.$slots,p,M({ref_for:!0},z))])}))]),1040,["class","ui","ui-override","portal","items","label-key","checked-icon","loading-icon","external-icon"])]),_:2},1032,["open","default-open"])):u.type==="checkbox"?(o(),y(e(K).CheckboxItem,{key:3,"model-value":u.checked,disabled:u.disabled,"text-value":e(W)(u,t.labelKey),class:V(a.ui.item({class:[a.uiOverride?.item,u.ui?.item,u.class],color:u?.color})),"onUpdate:modelValue":u.onUpdateChecked,onSelect:u.onSelect},{default:n(()=>[f(e(b),{item:u,index:$},null,8,["item","index"])]),_:2},1032,["model-value","disabled","text-value","class","onUpdate:modelValue","onSelect"])):(o(),y(e(K).Item,{key:4,"as-child":"",disabled:u.disabled,"text-value":e(W)(u,t.labelKey),onSelect:u.onSelect},{default:n(()=>[f(Qe,M({ref_for:!0},e(We)(u),{custom:""}),{default:n(({active:_,...p})=>[f(Je,M({ref_for:!0},p,{class:a.ui.item({class:[a.uiOverride?.item,u.ui?.item,u.class],active:_,color:u?.color})}),{default:n(()=>[f(e(b),{item:u,active:_,index:$},null,8,["item","active","index"])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["disabled","text-value","onSelect"]))],64))),128))]),_:2},1032,["class"]))),128))],2),U(v.$slots,"default"),U(v.$slots,"content-bottom")]),_:3},16,["class"]))]),_:3},16)],64))}},Ta={slots:{content:"min-w-32 bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-context-menu-content-transform-origin) flex flex-col",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",group:"p-1 isolate",label:"w-full flex items-center font-semibold text-highlighted",separator:"-mx-1 my-1 h-px bg-border",item:"group relative w-full flex items-center select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0",itemTrailingKbdsSize:"",itemLabel:"truncate",itemLabelExternalIcon:"inline-block size-3 align-top text-dimmed"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:text-highlighted data-[state=open]:text-highlighted data-highlighted:before:bg-elevated/50 data-[state=open]:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:text-default group-data-[state=open]:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}},size:{xs:{label:"p-1 text-xs gap-1",item:"p-1 text-xs gap-1",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},sm:{label:"p-1.5 text-xs gap-1.5",item:"p-1.5 text-xs gap-1.5",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},md:{label:"p-1.5 text-sm gap-1.5",item:"p-1.5 text-sm gap-1.5",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"md"},lg:{label:"p-2 text-sm gap-2",item:"p-2 text-sm gap-2",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"md"},xl:{label:"p-2 text-base gap-2",item:"p-2 text-base gap-2",itemLeadingIcon:"size-6",itemLeadingAvatarSize:"xs",itemTrailingIcon:"size-6",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"lg"}}},compoundVariants:[{color:"primary",active:!1,class:{item:"text-primary data-highlighted:text-primary data-highlighted:before:bg-primary/10 data-[state=open]:before:bg-primary/10",itemLeadingIcon:"text-primary/75 group-data-highlighted:text-primary group-data-[state=open]:text-primary"}},{color:"secondary",active:!1,class:{item:"text-secondary data-highlighted:text-secondary data-highlighted:before:bg-secondary/10 data-[state=open]:before:bg-secondary/10",itemLeadingIcon:"text-secondary/75 group-data-highlighted:text-secondary group-data-[state=open]:text-secondary"}},{color:"success",active:!1,class:{item:"text-success data-highlighted:text-success data-highlighted:before:bg-success/10 data-[state=open]:before:bg-success/10",itemLeadingIcon:"text-success/75 group-data-highlighted:text-success group-data-[state=open]:text-success"}},{color:"info",active:!1,class:{item:"text-info data-highlighted:text-info data-highlighted:before:bg-info/10 data-[state=open]:before:bg-info/10",itemLeadingIcon:"text-info/75 group-data-highlighted:text-info group-data-[state=open]:text-info"}},{color:"warning",active:!1,class:{item:"text-warning data-highlighted:text-warning data-highlighted:before:bg-warning/10 data-[state=open]:before:bg-warning/10",itemLeadingIcon:"text-warning/75 group-data-highlighted:text-warning group-data-[state=open]:text-warning"}},{color:"error",active:!1,class:{item:"text-error data-highlighted:text-error data-highlighted:before:bg-error/10 data-[state=open]:before:bg-error/10",itemLeadingIcon:"text-error/75 group-data-highlighted:text-error group-data-[state=open]:text-error"}},{color:"primary",active:!0,class:{item:"text-primary before:bg-primary/10",itemLeadingIcon:"text-primary"}},{color:"secondary",active:!0,class:{item:"text-secondary before:bg-secondary/10",itemLeadingIcon:"text-secondary"}},{color:"success",active:!0,class:{item:"text-success before:bg-success/10",itemLeadingIcon:"text-success"}},{color:"info",active:!0,class:{item:"text-info before:bg-info/10",itemLeadingIcon:"text-info"}},{color:"warning",active:!0,class:{item:"text-warning before:bg-warning/10",itemLeadingIcon:"text-warning"}},{color:"error",active:!0,class:{item:"text-error before:bg-error/10",itemLeadingIcon:"text-error"}}],defaultVariants:{size:"md"}},La={__name:"UContextMenu",props:{size:{type:null,required:!1},items:{type:null,required:!1},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1,default:!0},content:{type:Object,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},labelKey:{type:null,required:!1,default:"label"},disabled:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},pressOpenDelay:{type:Number,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(a,{emit:x}){const t=a,l=x,c=ee(),s=ae(),r=ke(qe(t,"modal"),l),d=xe(()=>t.content),m=we(c,["default"]),w=F(()=>Q({extend:Q(Ta),...s.ui?.contextMenu||{}})({size:t.size}));return(B,b)=>(o(),y(e(Xe),de(ce(e(r))),{default:n(()=>[c.default?(o(),y(e(Ze),{key:0,"as-child":"",disabled:a.disabled,class:V(t.class)},{default:n(()=>[U(B.$slots,"default")]),_:3},8,["disabled","class"])):C("",!0),f(_e,M({class:w.value.content({class:[!c.default&&t.class,t.ui?.content]}),ui:w.value,"ui-override":t.ui},d.value,{items:a.items,portal:a.portal,"label-key":a.labelKey,"checked-icon":a.checkedIcon,"loading-icon":a.loadingIcon,"external-icon":a.externalIcon}),fe({_:2},[G(e(m),(h,g)=>({name:g,fn:n(v=>[U(B.$slots,g,de(ce(v)))])}))]),1040,["class","ui","ui-override","items","portal","label-key","checked-icon","loading-icon","external-icon"])]),_:3},16))}},Oa={class:"inline-block align-top text-xs text-primary-600 dark:text-primary-400"},Ua=D({__name:"BibleVerse",props:{verse:{}},emits:["showCompare","addNote"],setup(a,{emit:x}){const t=a,l=x,c=L(!1),{loggedIn:s}=Ye(),r=F(()=>{const d=[{label:"Comparer",icon:"i-lucide-eye",onSelect:()=>l("showCompare",t.verse.verse),ui:{item:"cursor-pointer"}}];return s.value&&(d.push({label:"Marquer",icon:"i-lucide-bookmark",onSelect:()=>c.value=!0,ui:{item:"cursor-pointer"}}),d.push({label:"Ajouter Note",icon:"i-lucide-notebook-pen",onSelect:()=>l("addNote",t.verse.verse),ui:{item:"cursor-pointer"}})),d});return(d,m)=>{const w=_a,B=ea,b=La;return o(),y(b,{items:e(r)},{default:n(()=>[q("span",null,[q("span",Oa,P(d.verse.verse),1),f(B,{open:e(c),"onUpdate:open":m[1]||(m[1]=h=>me(c)?c.value=h:null),content:{sideOffset:0},arrow:""},{anchor:n(()=>[q("span",{class:V({underline:e(c)})},P(d.verse.text),3)]),content:n(()=>[f(w,{"verse-id":d.verse.id,onCloseForm:m[0]||(m[0]=h=>c.value=!1)},null,8,["verse-id"])]),_:1},8,["open"])])]),_:1},8,["items"])}}}),Pa=Object.assign(Ua,{__name:"BibleVerse"}),Aa={class:"p-6"},Ma={class:"space-y-4"},Fa={class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},ja={class:"font-medium"},Na={key:0},Ka={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-60 overflow-y-auto"},Ea=["onClick"],Ra={class:"text-sm font-medium text-gray-900 dark:text-white"},Da={class:"text-xs text-gray-500 dark:text-gray-400"},Ga={class:"mt-2 text-xs text-gray-500"},Ha={class:"flex justify-end gap-2 mt-6"},Qa=D({__name:"BibleCompareModal",props:H({availableVersions:{},book:{},chapter:{},version:{},verseStart:{},verseEnd:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const x=a,t=X(a,"modelValue"),l=L(!1),c=L([x.version]),s=d=>{const m=c.value.indexOf(d);m>-1?c.value.splice(m,1):c.value.length<6&&c.value.push(d)},r=async()=>{if(!(c.value.length<2))try{l.value=!0;const d=x.availableVersions.filter(w=>c.value.includes(w.id)).map(w=>w.code),m=new URLSearchParams({book:x.book.code,chapter:x.chapter.toString(),verses:x.verseStart.toString(),versions:d.join(",")});x.verseEnd&&x.verseEnd!==x.verseStart&&m.set("verses",x.verseStart.toString()+"-"+x.verseEnd.toString()),await aa(`/bible/compare?${m.toString()}`)}catch(d){console.error("Erreur lors de la comparaison:",d)}finally{l.value=!1,t.value=!1}};return te(()=>x.version,d=>{c.value=[d]}),(d,m)=>{const w=xa,B=pe,b=Y,h=Se;return o(),y(h,{open:t.value,"onUpdate:open":m[1]||(m[1]=g=>t.value=g),title:"Comparer ce passage",description:"Terme théologique",ui:{description:"hidden",content:"max-w-2xl"}},{content:n(()=>[q("div",Aa,[q("div",Ma,[q("div",null,[m[2]||(m[2]=q("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"}," Passage sélectionné : ",-1)),q("div",Fa,[q("p",ja,[j(P(d.book.name)+" "+P(d.chapter)+":"+P(d.verseStart)+" ",1),d.verseEnd&&d.verseEnd!==d.verseStart?(o(),O("span",Na," -"+P(d.verseEnd),1)):C("",!0)])])]),f(B,{label:"Versions à comparer (sélectionnez 2 à 6 versions)"},{default:n(()=>[q("div",Ka,[(o(!0),O(R,null,G(d.availableVersions,g=>(o(),O("div",{key:g.id,class:"flex items-center space-x-2"},[f(w,{"model-value":e(c).includes(g.id),disabled:e(c).length>=6&&!e(c).includes(g.id),"onUpdate:modelValue":v=>s(g.id)},null,8,["model-value","disabled","onUpdate:modelValue"]),q("div",{class:"flex-1",onClick:v=>s(g.id)},[q("div",Ra,P(g.name),1),q("div",Da,P(g.code)+" • "+P(g.language),1)],8,Ea)]))),128))]),q("div",Ga,P(e(c).length)+" version(s) sélectionnée(s) (minimum 2, maximum 6) ",1)]),_:1})]),q("div",Ha,[f(b,{label:"Annuler",variant:"ghost",onClick:m[0]||(m[0]=g=>t.value=!1)}),f(b,{label:"Comparer",disabled:e(c).length<2,loading:e(l),onClick:r},null,8,["disabled","loading"])])])]),_:1},8,["open"])}}}),Wa=Object.assign(Qa,{__name:"BibleCompareModal"}),Ja={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute start-0 flex items-start",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute end-0 flex items-start",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2 inset-y-1",trailing:"pe-2 inset-y-1",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"},autoresize:{true:{base:"resize-none"}}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Za=["id","value","name","rows","placeholder","disabled","required"],Xa=Object.assign({inheritAttrs:!1},{__name:"UTextarea",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},autoresize:{type:Boolean,required:!1},autoresizeDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},rows:{type:Number,required:!1,default:3},maxrows:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:[String,Object],required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:[String,Object],required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:[String,Object],required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:[String,Object],required:!1}},emits:["update:modelValue","blur","change"],setup(a,{expose:x,emit:t}){const l=a,c=t,s=ee(),r=ta(l,"modelValue",c,{defaultValue:l.defaultValue}),d=ae(),{emitFormFocus:m,emitFormBlur:w,emitFormInput:B,emitFormChange:b,size:h,color:g,id:v,name:I,highlight:i,disabled:k,ariaAttrs:u}=ze(l,{deferInputValidation:!0}),{isLeading:$,isTrailing:_,leadingIconName:p,trailingIconName:z}=la(l),S=F(()=>Q({extend:Q(Ja),...d.ui?.textarea||{}})({color:g.value,variant:l.variant,size:h?.value,loading:l.loading,highlight:i.value,autoresize:l.autoresize,leading:$.value||!!l.avatar||!!s.leading,trailing:_.value||!!s.trailing})),A=L(null);function J(T){l.modelModifiers?.trim&&(T=T?.trim()??null),l.modelModifiers?.number&&(T=sa(T)),l.modelModifiers?.nullable&&(T||=null),l.modelModifiers?.optional&&(T||=void 0),r.value=T,B()}function le(T){oe(),l.modelModifiers?.lazy||J(T.target.value)}function se(T){const E=T.target.value;l.modelModifiers?.lazy&&J(E),l.modelModifiers?.trim&&(T.target.value=E.trim()),b(),c("change",T)}function ie(T){w(),c("blur",T)}function ne(){l.autofocus&&A.value?.focus()}function oe(){if(l.autoresize&&A.value){A.value.rows=l.rows;const T=A.value.style.overflow;A.value.style.overflow="hidden";const E=window.getComputedStyle(A.value),re=Number.parseInt(E.paddingTop),Te=Number.parseInt(E.paddingBottom),Le=re+Te,Oe=Number.parseInt(E.lineHeight),{scrollHeight:Ue}=A.value,ue=(Ue-Le)/Oe;ue>l.rows&&(A.value.rows=l.maxrows?Math.min(ue,l.maxrows):ue),A.value.style.overflow=T}}return te(r,()=>{ia(oe)}),Ve(()=>{setTimeout(()=>{ne()},l.autofocusDelay),setTimeout(()=>{oe()},l.autoresizeDelay)}),x({textareaRef:A}),(T,E)=>(o(),y(e(Z),{as:a.as,class:V(S.value.root({class:[l.ui?.root,l.class]}))},{default:n(()=>[q("textarea",M({id:e(v),ref_key:"textareaRef",ref:A,value:e(r),name:e(I),rows:a.rows,placeholder:a.placeholder,class:S.value.base({class:l.ui?.base}),disabled:e(k),required:a.required},{...T.$attrs,...e(u)},{onInput:le,onBlur:ie,onChange:se,onFocus:E[0]||(E[0]=(...re)=>e(m)&&e(m)(...re))}),null,16,Za),U(T.$slots,"default"),e($)||a.avatar||s.leading?(o(),O("span",{key:0,class:V(S.value.leading({class:l.ui?.leading}))},[U(T.$slots,"leading",{},()=>[e($)&&e(p)?(o(),y(N,{key:0,name:e(p),class:V(S.value.leadingIcon({class:l.ui?.leadingIcon}))},null,8,["name","class"])):a.avatar?(o(),y(Ie,M({key:1,size:l.ui?.leadingAvatarSize||S.value.leadingAvatarSize()},a.avatar,{class:S.value.leadingAvatar({class:l.ui?.leadingAvatar})}),null,16,["size","class"])):C("",!0)])],2)):C("",!0),e(_)||s.trailing?(o(),O("span",{key:1,class:V(S.value.trailing({class:l.ui?.trailing}))},[U(T.$slots,"trailing",{},()=>[e(z)?(o(),y(N,{key:0,name:e(z),class:V(S.value.trailingIcon({class:l.ui?.trailingIcon}))},null,8,["name","class"])):C("",!0)])],2)):C("",!0)]),_:3},8,["as","class"]))}}),Ya={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{base:"cursor-not-allowed opacity-75",label:"cursor-not-allowed opacity-75",description:"cursor-not-allowed opacity-75"}}},defaultVariants:{color:"primary",size:"md"}},et=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:H({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:[String,Object],required:!1},checkedIcon:{type:[String,Object],required:!1},uncheckedIcon:{type:[String,Object],required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:H(["change"],["update:modelValue"]),setup(a,{emit:x}){const t=a,l=ee(),c=x,s=X(a,"modelValue",{type:Boolean,default:void 0}),r=ae(),d=na(qe(t,"required","value","defaultValue")),{id:m,emitFormChange:w,emitFormInput:B,size:b,color:h,name:g,disabled:v,ariaAttrs:I}=ze(t),i=m.value??oa(),k=F(()=>Q({extend:Q(Ya),...r.ui?.switch||{}})({size:b.value,color:h.value,required:t.required,loading:t.loading,disabled:v.value||t.loading}));function u($){const _=new Event("change",{target:{value:$}});c("change",_),w(),B()}return($,_)=>(o(),y(e(Z),{as:a.as,class:V(k.value.root({class:[t.ui?.root,t.class]}))},{default:n(()=>[q("div",{class:V(k.value.container({class:t.ui?.container}))},[f(e(Sa),M({id:e(i)},{...e(d),...$.$attrs,...e(I)},{modelValue:s.value,"onUpdate:modelValue":[_[0]||(_[0]=p=>s.value=p),u],name:e(g),disabled:e(v)||a.loading,class:k.value.base({class:t.ui?.base})}),{default:n(()=>[f(e(Va),{class:V(k.value.thumb({class:t.ui?.thumb}))},{default:n(()=>[a.loading?(o(),y(N,{key:0,name:a.loadingIcon||e(r).ui.icons.loading,class:V(k.value.icon({class:t.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(o(),O(R,{key:1},[a.checkedIcon?(o(),y(N,{key:0,name:a.checkedIcon,class:V(k.value.icon({class:t.ui?.icon,checked:!0}))},null,8,["name","class"])):C("",!0),a.uncheckedIcon?(o(),y(N,{key:1,name:a.uncheckedIcon,class:V(k.value.icon({class:t.ui?.icon,unchecked:!0}))},null,8,["name","class"])):C("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),a.label||l.label||a.description||l.description?(o(),O("div",{key:0,class:V(k.value.wrapper({class:t.ui?.wrapper}))},[a.label||l.label?(o(),y(e(ra),{key:0,for:e(i),class:V(k.value.label({class:t.ui?.label}))},{default:n(()=>[U($.$slots,"label",{label:a.label},()=>[j(P(a.label),1)])]),_:3},8,["for","class"])):C("",!0),a.description||l.description?(o(),O("p",{key:1,class:V(k.value.description({class:t.ui?.description}))},[U($.$slots,"description",{description:a.description},()=>[j(P(a.description),1)])],2)):C("",!0)],2)):C("",!0)]),_:3},8,["as","class"]))}}),at={class:"flex items-center gap-2"},tt={class:"font-semibold text-lg"},lt={key:0,class:"text-red-500 text-sm mt-2"},st={class:"w-full flex justify-end gap-2"},it=D({__name:"BibleNoteFormModal",props:H({verseId:{},note:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:H(["close","created","updated"],["update:modelValue"]),setup(a,{emit:x}){const t=a,l=x,c=X(a,"modelValue"),s=L(!!t.note),r=be({title:t.note?.title??"",content:t.note?.content??"",isPrivate:t.note?.isPrivate??!0});te(()=>t.note,h=>{h?(r.title=h.title??"",r.content=h.content??"",r.isPrivate=h.isPrivate??!0,s.value=!0):(r.title="",r.content="",r.isPrivate=!0,s.value=!1)});const d=L(!1),m=L(""),w=he();function B(){c.value=!1,l("close")}async function b(){m.value="",d.value=!0;try{let h=null;s.value&&t.note?h=await $fetch(`/api/bible/notes/${t.note.id}`,{method:"PUT",body:{title:r.title,content:r.content,isPrivate:r.isPrivate}}):h=await $fetch("/api/bible/notes",{method:"POST",body:{verseId:t.verseId,title:r.title,content:r.content,isPrivate:r.isPrivate}}),h.success?(w.add({title:s.value?"Note modifiée":"Note ajoutée",description:h.message,color:"primary"}),s.value?l("updated",h.note):l("created",h.note),B()):m.value=h.message||"Erreur inconnue"}catch(h){m.value=h?.statusMessage||"Erreur lors de l’enregistrement de la note"}finally{d.value=!1}}return(h,g)=>{const v=N,I=ye,i=pe,k=Xa,u=et,$=Y,_=Se,p=Ce;return o(),y(p,{state:r,onSubmit:ge(b,["prevent"])},{default:n(()=>[f(_,{open:c.value,"onUpdate:open":g[3]||(g[3]=z=>c.value=z),overlay:!0,ui:{content:"max-w-lg"}},{header:n(()=>[q("div",at,[f(v,{name:"i-lucide-pencil",class:"text-primary-600"}),q("span",tt,P(s.value?"Modifier la note":"Ajouter une note"),1)])]),body:n(()=>[f(i,{label:"Titre (optionnel)",name:"title"},{default:n(()=>[f(I,{modelValue:r.title,"onUpdate:modelValue":g[0]||(g[0]=z=>r.title=z),placeholder:"Titre de la note...",class:"w-full"},null,8,["modelValue"])]),_:1}),f(i,{label:"Contenu",name:"content",class:"mt-4",required:""},{default:n(()=>[f(k,{modelValue:r.content,"onUpdate:modelValue":g[1]||(g[1]=z=>r.content=z),placeholder:"Votre note...",class:"w-full",rows:5},null,8,["modelValue"])]),_:1}),f(i,{label:"Note privée",name:"isPrivate",class:"mt-4"},{default:n(()=>[f(u,{modelValue:r.isPrivate,"onUpdate:modelValue":g[2]||(g[2]=z=>r.isPrivate=z),label:"Visible uniquement par moi"},null,8,["modelValue"])]),_:1}),m.value?(o(),O("div",lt,P(m.value),1)):C("",!0)]),footer:n(()=>[q("div",st,[f($,{color:"secondary",variant:"ghost",onClick:B},{default:n(()=>[...g[4]||(g[4]=[j(" Annuler ",-1)])]),_:1}),f($,{type:"submit",color:"primary",loading:d.value},{default:n(()=>[j(P(s.value?"Enregistrer":"Ajouter"),1)]),_:1},8,["loading"])])]),_:1},8,["open"])]),_:1},8,["state"])}}}),nt=Object.assign(it,{__name:"BibleNoteFormModal"}),ot={class:"space-y-6"},rt={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},ut={class:"flex flex-1 items-center gap-2"},dt={class:"space-x-1"},ct={class:"flex justify-center gap-2"},mt=D({__name:"BibleReader",props:{book:{},chapter:{},versesData:{},versions:{},selectedVersion:{}},emits:["update:chapter"],setup(a,{emit:x}){const t=a,l=v=>{s.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},d.value=!0},c=v=>{s.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},m.value=!0},s=L(null),r=v=>{s.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},w.value=!0},d=L(!1),m=L(!1),w=L(!1),B=x,b=F(()=>Array.from({length:t.versesData?.navigation.totalChapters||0},(v,I)=>I+1)),h=F(()=>t.versesData?.verses||[]),g=v=>{B("update:chapter",v)};return(v,I)=>{const i=$e,k=Y,u=Pa,$=Be,_=Wa,p=nt;return o(),O("div",ot,[f($,{class:"mb-4"},{header:n(()=>[q("div",rt,[q("div",ut,[I[4]||(I[4]=q("p",null,"Chapitre",-1)),f(i,{items:b.value,"model-value":v.chapter,placeholder:"Chapitre",class:"w-32","onUpdate:modelValue":g},null,8,["items","model-value"])]),f(k,{color:"secondary",variant:"ghost",to:"/bible/compare","trailing-icon":"i-lucide-chevron-right"},{default:n(()=>[...I[5]||(I[5]=[j(" Comparer ",-1)])]),_:1})])]),footer:n(()=>[q("div",ct,[v.versesData?.navigation.previousChapter?(o(),y(k,{key:0,icon:"i-lucide-arrow-left",color:"primary",variant:"soft",onClick:I[0]||(I[0]=z=>g(v.versesData.navigation.previousChapter))},{default:n(()=>[...I[6]||(I[6]=[j(" Précédent ",-1)])]),_:1})):C("",!0),v.versesData?.navigation.nextChapter?(o(),y(k,{key:1,"trailing-icon":"i-lucide-arrow-right",color:"primary",variant:"soft",onClick:I[1]||(I[1]=z=>g(v.versesData.navigation.nextChapter))},{default:n(()=>[...I[7]||(I[7]=[j(" Suivant ",-1)])]),_:1})):C("",!0)])]),default:n(()=>[q("div",dt,[(o(!0),O(R,null,G(h.value,z=>(o(),y(u,{key:z.id,verse:z,onShowCompare:l,onOpenBookmarkForm:c,onAddNote:r},null,8,["verse"]))),128))])]),_:1}),e(s)?(o(),y(_,M({key:0,modelValue:e(d),"onUpdate:modelValue":I[2]||(I[2]=z=>me(d)?d.value=z:null)},e(s),{"available-versions":v.versions}),null,16,["modelValue","available-versions"])):C("",!0),e(s)?(o(),y(p,{key:1,modelValue:e(w),"onUpdate:modelValue":I[3]||(I[3]=z=>me(w)?w.value=z:null),verse:e(s)},null,8,["modelValue","verse"])):C("",!0)])}}}),gt=Object.assign(mt,{__name:"BibleReader"}),qt=D({__name:"index",setup(a){const x=ua(),t=da(),l=L(!1),c=L(null),s=L("GEN"),r=L(1),d=L(null),m=L([]),w=L("LSG"),B=()=>{s.value=t.query.book||"GEN",w.value=t.query.version||"LSG",r.value=parseInt(t.query.chapter||"1")},b=L([]),h=F(()=>{const p=b.value.filter(S=>S.testament==="OLD"),z=b.value.filter(S=>S.testament==="NEW");return[{label:"Ancien Testament",open:p.some(S=>S.code===s.value),active:p.some(S=>S.code===s.value),ui:{link:"cursor-pointer"},children:p.map(S=>({label:S.name,onSelect:async()=>await i(S.code),active:s.value===S.code,ui:{link:"cursor-pointer"}}))},{label:"Nouveau Testament",open:z.some(S=>S.code===s.value),active:z.some(S=>S.code===s.value),ui:{link:"cursor-pointer"},children:z.map(S=>({label:S.name,onSelect:async()=>await i(S.code),active:s.value===S.code,ui:{link:"cursor-pointer"}}))}]}),g=F(()=>m.value.map(p=>({label:p.name,to:x.resolve({query:{...t.query,version:p.code}}).href,active:w.value===p.code}))),v=F(()=>b.value.find(p=>p.code==s.value)),I=F(()=>m.value.find(p=>p.code==w.value)),i=async p=>{await x.push({query:{...t.query,book:p,chapter:1}})},k=async p=>{await x.push({query:{...t.query,chapter:p}})};ca({title:"Lire la Bible en ligne - Théologie Pour Tous",ogTitle:"Lire la Bible en ligne - Théologie Pour Tous",description:"Lisez la Bible en ligne avec différentes versions disponibles. Parcourez les livres et chapitres de la Bible facilement.",ogDescription:"Lisez la Bible en ligne avec différentes versions disponibles. Parcourez les livres et chapitres de la Bible facilement."}),Ve(async()=>{B(),await Promise.all([u(),$(),_()])});const u=async()=>{try{l.value=!0;const p=await $fetch("/api/bible/books");b.value=p.data?.all}catch(p){c.value="Erreur lors du chargement des livres",console.error(p)}finally{l.value=!1}},$=async()=>{try{const p=await $fetch("/api/bible/versions");m.value=p.data||p}catch(p){c.value="Erreur lors du chargement des versions",console.error(p)}},_=async()=>{try{const p=await $fetch(`/api/bible/verses/${s.value}/${r.value}`,{query:{version:w.value}});d.value=p.data}catch(p){c.value="Erreur lors du chargement des versets",console.error(p)}};return te(()=>t.query,async()=>{B(),await _()},{deep:!0}),ka(),(p,z)=>{const S=ga,A=fa,J=va,le=gt,se=pa,ie=ba,ne=ma;return e(b).length&&e(m).length?(o(),y(ne,{key:0},fe({left:n(()=>[f(A,null,{top:n(()=>[...z[0]||(z[0]=[j(" Les livres ",-1)])]),default:n(()=>[f(S,{items:e(h),highlight:"",orientation:"vertical"},null,8,["items"])]),_:1})]),default:n(()=>[e(v)&&e(r)?(o(),y(J,{key:0,title:`${e(v).name} ${e(r)}`,description:e(I)?e(I).name:"Aucune version sélectionnée"},null,8,["title","description"])):C("",!0),f(ie,null,{default:n(()=>[q("div",null,[e(v)&&e(r)&&e(I)&&e(d)?(o(),y(le,{key:0,book:e(v),chapter:e(r),"verses-data":e(d),versions:e(m),"selected-version":e(I),"onUpdate:chapter":k},null,8,["book","chapter","verses-data","versions","selected-version"])):C("",!0)]),f(se)]),_:1})]),_:2},[e(m).length?{name:"right",fn:n(()=>[f(A,null,{top:n(()=>[...z[1]||(z[1]=[j(" Versions disponibles ",-1)])]),default:n(()=>[f(S,{items:e(g),variant:"link",orientation:"vertical"},null,8,["items"])]),_:1})]),key:"0"}:void 0]),1024)):C("",!0)}}});export{qt as default};
