import{B as L,v as N,r as S,C as w,bn as T,D as A,z as l,w as m,P as E,e as s,g as p,S as H,J as M,E as O,G as o,f as x,d as R,F as V,H as G,n as J,I as K}from"#entry";import{_ as Q,a as W}from"./C9Z6mQXB.js";import{_ as X}from"./C-5Aldvm.js";import{_ as Y}from"./DQq9DpbB.js";import{_ as Z}from"./D8jp3OfA.js";import{u as d}from"./-PedyWqa.js";import{q as f}from"./BUEN4so5.js";import{d as ee}from"./D8rO69WY.js";import"./D5bKmbvP.js";const u=7,me=L({__name:"index",props:{themes:{}},async setup(k){let a,i;const _=N(),t=S(parseInt(_.query.page||"1")),{data:n}=([a,i]=w(()=>d("blog",()=>f("teaching").first())),a=await a,i(),a),{data:h}=([a,i]=w(()=>d("lessons-count",()=>f("lessons").count())),a=await a,i(),a),{data:g}=d(_.path,()=>f("lessons").limit(u).skip((t.value-1)*u).all(),{watch:[t]}),v=Math.ceil((h.value||0)/u);(t.value<1||_.query.page&&t.value===1||t.value>v)&&T("/enseignements");const y=r=>r.id===g.value?.[0]?.id&&t.value===1,C=n.value?.seo?.title||n.value?.title,P=n.value?.seo?.description||n.value?.description;A({title:C,ogTitle:C,description:P,ogDescription:P});const b=r=>k.themes.find(c=>c.path==="/enseignements/"+r.theme);return ee(),(r,c)=>{const U=H,B=Q,$=X,q=Y,D=Z,I=W,F=M,j=E;return s(),l(j,null,{default:m(()=>[p(U,{src:"/images/hero-blog.webp",class:"w-full aspect-video max-h-[32rem] object-cover object-center"}),p(F,null,{default:m(()=>[p(B,O(o(n),{class:"py-[50px]"}),null,16),p(I,null,{default:m(()=>[o(g)?(s(),l(q,{key:0},{default:m(()=>[(s(!0),R(V,null,G(o(g),(e,z)=>(s(),l($,{key:z,to:e.path,title:e.title,description:e.description,image:e.image,date:new Date(e.date).toLocaleDateString("fr",{year:"numeric",month:"long",day:"numeric"}),authors:[e.author],badge:{label:b(e)?.title,color:b(e)?.color||"primary"},orientation:y(e)?"horizontal":"vertical",class:J([y(e)&&"col-span-full"]),variant:"naked",ui:{description:"line-clamp-2"}},null,8,["to","title","description","image","date","authors","badge","orientation","class"]))),128))]),_:1})):x("",!0),o(v)>1?(s(),l(D,{key:1,page:o(t),"onUpdate:page":c[0]||(c[0]=e=>K(t)?t.value=e:null),"items-per-page":u,"show-edges":"",total:o(h),to:e=>({path:"/enseignements",query:e>1?{page:e}:{}}),class:"mt-10 flex justify-center"},null,8,["page","total","to"])):x("",!0)]),_:1})]),_:1})]),_:1})}}});export{me as default};
