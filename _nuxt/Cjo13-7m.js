import{z as N,bb as _,a1 as B,bc as j,r as E,D as g,G as L,I as f,bm as M,C as r,av as U,w as s,f as D,h as m,P as z,g as o,bk as I,d as p,F as T,K as P,t as V,e as c}from"#entry";import{_ as F}from"./CDjvf1dy.js";import{_ as H}from"./CvsAtPMi.js";const G=["innerHTML"],K={key:1,class:"space-y-4"},O={class:"flex justify-between gap-4 items-center"},q={class:"flex gap-2 items-center"},A={class:"line-clamp-1"},J={class:"flex flex-1 justify-end gap-2 items-center"},Q=N({__name:"NoteShowDrawer",props:_({notes:{},verse:{},book:{},footer:{type:Boolean,default:!0}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:_(["edit:note","refreshNote"],["update:open"]),setup(e,{emit:w}){const v=w,b=B(),u=j(e,"open"),d=E(null),a=g(()=>e.notes.find(l=>l.id===d.value)||null);L(u,l=>{l&&e.notes.length&&(e.notes.length==1&&e.notes[0]?.id?d.value=e.notes[0]?.id:e.notes.length>1&&(d.value=null))},{immediate:!0});const C=g(()=>`${e.book.name} ${e.verse.chapter}:${e.verse.verse}`),y=async l=>{try{await $fetch(`/api/bible/notes/${l.id}`,{method:"DELETE"}),b.add({title:"Suppression succès",description:"La note a bien été supprimée"}),v("refreshNote"),e.notes.length==1&&(u.value=!1)}catch(t){console.error(t),b.add({color:"error",title:"Erreur",description:"Erreur lors de la suppression"})}};return(l,t)=>{const i=z,h=F,k=I,$=H,x=M;return c(),f(x,{open:u.value,"onUpdate:open":t[3]||(t[3]=n=>u.value=n),title:r(a)?.title||"Liste des notes",description:r(C),ui:{footer:"justify-end"}},U({body:s(()=>[r(a)?(c(),p("p",{key:0,class:"whitespace-pre-wrap",innerHTML:r(a).content},null,8,G)):(c(),p("div",K,[(c(!0),p(T,null,P(e.notes,n=>(c(),f($,{key:n.id,variant:"outline",ui:{body:"p-2 sm:py-2 sm:px-4"}},{default:s(()=>[m("div",O,[m("div",q,[o(i,{icon:"i-lucide-eye",size:"md",color:"primary",variant:"link",onClick:S=>d.value=n.id},null,8,["onClick"]),m("h4",A,V(n.title),1)]),o(k,{arrow:""},{content:s(()=>[o(h,{title:"Suppression de la note",description:"Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible.",icon:"i-lucide-trash-2",ui:{root:"max-w-sm",leadingIcon:"text-red-500"}},{default:s(()=>[o(i,{label:"Supprimer",color:"error",variant:"subtle",ui:{base:"justify-center"},onClick:S=>y(n)},null,8,["onClick"])]),_:2},1024)]),default:s(()=>[o(i,{icon:"i-lucide-trash-2",size:"md",color:"error",variant:"ghost"})]),_:2},1024)])]),_:2},1024))),128))]))]),_:2},[r(a)&&e.footer?{name:"footer",fn:s(()=>[e.notes.length>1?(c(),f(i,{key:0,icon:"i-lucide-arrow-left",size:"md",color:"primary",variant:"link",onClick:t[0]||(t[0]=n=>d.value=null)})):D("",!0),m("div",J,[o(i,{label:"Modifier",color:"secondary",onClick:t[1]||(t[1]=n=>v("edit:note",r(a)))}),o(k,{arrow:""},{content:s(()=>[o(h,{title:"Suppression de la note",description:"Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible.",icon:"i-lucide-trash-2",ui:{root:"max-w-sm",leadingIcon:"text-red-500"}},{default:s(()=>[o(i,{label:"Supprimer",color:"error",variant:"subtle",ui:{base:"justify-center"},onClick:t[2]||(t[2]=n=>y(r(a)))})]),_:1})]),default:s(()=>[o(i,{label:"Supprimer",color:"error",variant:"outline"})]),_:1})])]),key:"0"}:void 0]),1032,["open","title","description"])}}}),Y=Object.assign(Q,{__name:"NoteShowDrawer"});export{Y as _};
