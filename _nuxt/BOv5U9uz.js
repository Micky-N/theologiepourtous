import{B as I,V as R,z as k,e as o,w as u,h as e,d as g,f as y,n as h,G as r,t as d,g as l,Z as D,$ as G,ao as X,y as Z,a0 as O,X as j,N as J,E as P,M as T,F as B,H as M,L as V,a1 as K,r as q,o as Q,au as U,I as Y,a4 as ee,b8 as te,bb as se}from"#entry";import{_ as ae}from"./Bb312l8Z.js";import{_ as A}from"./sIOFFvLP.js";import"./CX8cS4wn.js";const re={class:"flex items-center gap-2"},oe={class:"font-medium text-gray-900 dark:text-white"},ne={class:"text-center"},ie={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},le=I({__name:"StatsCard",props:{title:{},value:{},icon:{},color:{default:"blue"},subtitle:{default:""}},setup(a){const p=a,s=R(()=>{switch(p.color){case"green":return"text-green-600 dark:text-green-400";case"purple":return"text-purple-600 dark:text-purple-400";case"orange":return"text-orange-600 dark:text-orange-400";case"red":return"text-red-600 dark:text-red-400";default:return"text-blue-600 dark:text-blue-400"}}),n=R(()=>{switch(p.color){case"green":return"text-green-700 dark:text-green-300";case"purple":return"text-purple-700 dark:text-purple-300";case"orange":return"text-orange-700 dark:text-orange-300";case"red":return"text-red-700 dark:text-red-300";default:return"text-blue-700 dark:text-blue-300"}});return(c,f)=>{const w=D,m=A;return o(),k(m,null,{header:u(()=>[e("div",re,[l(w,{name:c.icon,class:h([r(s),"w-5 h-5"])},null,8,["name","class"]),e("div",null,[e("h3",oe,d(c.title),1)])])]),default:u(()=>[e("div",ne,[e("div",{class:h(["text-3xl font-bold",r(n)])},d(c.value),3),c.subtitle?(o(),g("div",ie,d(c.subtitle),1)):y("",!0)])]),_:1})}}}),ce=Object.assign(le,{__name:"StatsCard"}),ue={slots:{root:"relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5",wrapper:"min-w-0 flex-1 flex flex-col",title:"text-sm font-medium",description:"text-sm opacity-90",icon:"shrink-0 size-5",avatar:"shrink-0",avatarSize:"2xl",actions:"flex flex-wrap gap-1.5 shrink-0",close:"p-0"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},orientation:{horizontal:{root:"items-center",actions:"items-center"},vertical:{root:"items-start",actions:"items-start mt-2.5"}},title:{true:{description:"mt-1"}}},compoundVariants:[{color:"primary",variant:"solid",class:{root:"bg-primary text-inverted"}},{color:"secondary",variant:"solid",class:{root:"bg-secondary text-inverted"}},{color:"success",variant:"solid",class:{root:"bg-success text-inverted"}},{color:"info",variant:"solid",class:{root:"bg-info text-inverted"}},{color:"warning",variant:"solid",class:{root:"bg-warning text-inverted"}},{color:"error",variant:"solid",class:{root:"bg-error text-inverted"}},{color:"primary",variant:"outline",class:{root:"text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"outline",class:{root:"text-secondary ring ring-inset ring-secondary/25"}},{color:"success",variant:"outline",class:{root:"text-success ring ring-inset ring-success/25"}},{color:"info",variant:"outline",class:{root:"text-info ring ring-inset ring-info/25"}},{color:"warning",variant:"outline",class:{root:"text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"outline",class:{root:"text-error ring ring-inset ring-error/25"}},{color:"primary",variant:"soft",class:{root:"bg-primary/10 text-primary"}},{color:"secondary",variant:"soft",class:{root:"bg-secondary/10 text-secondary"}},{color:"success",variant:"soft",class:{root:"bg-success/10 text-success"}},{color:"info",variant:"soft",class:{root:"bg-info/10 text-info"}},{color:"warning",variant:"soft",class:{root:"bg-warning/10 text-warning"}},{color:"error",variant:"soft",class:{root:"bg-error/10 text-error"}},{color:"primary",variant:"subtle",class:{root:"bg-primary/10 text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"subtle",class:{root:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"}},{color:"success",variant:"subtle",class:{root:"bg-success/10 text-success ring ring-inset ring-success/25"}},{color:"info",variant:"subtle",class:{root:"bg-info/10 text-info ring ring-inset ring-info/25"}},{color:"warning",variant:"subtle",class:{root:"bg-warning/10 text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"subtle",class:{root:"bg-error/10 text-error ring ring-inset ring-error/25"}},{color:"neutral",variant:"solid",class:{root:"text-inverted bg-inverted"}},{color:"neutral",variant:"outline",class:{root:"text-highlighted bg-default ring ring-inset ring-default"}},{color:"neutral",variant:"soft",class:{root:"text-highlighted bg-elevated/50"}},{color:"neutral",variant:"subtle",class:{root:"text-highlighted bg-elevated/50 ring ring-inset ring-accented"}}],defaultVariants:{color:"primary",variant:"solid"}},de={__name:"UAlert",props:{as:{type:null,required:!1},title:{type:String,required:!1},description:{type:String,required:!1},icon:{type:[String,Object],required:!1},avatar:{type:Object,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},orientation:{type:null,required:!1,default:"vertical"},actions:{type:Array,required:!1},close:{type:[Boolean,Object],required:!1},closeIcon:{type:[String,Object],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},emits:["update:open"],setup(a,{emit:p}){const s=a,n=p,c=G(),{t:f}=X(),w=Z(),m=R(()=>O({extend:O(ue),...w.ui?.alert||{}})({color:s.color,variant:s.variant,orientation:s.orientation,title:!!s.title||!!c.title}));return(b,$)=>(o(),k(r(K),{as:a.as,"data-orientation":a.orientation,class:h(m.value.root({class:[s.ui?.root,s.class]}))},{default:u(()=>[j(b.$slots,"leading",{},()=>[a.avatar?(o(),k(J,P({key:0,size:s.ui?.avatarSize||m.value.avatarSize()},a.avatar,{class:m.value.avatar({class:s.ui?.avatar})}),null,16,["size","class"])):a.icon?(o(),k(D,{key:1,name:a.icon,class:h(m.value.icon({class:s.ui?.icon}))},null,8,["name","class"])):y("",!0)]),e("div",{class:h(m.value.wrapper({class:s.ui?.wrapper}))},[a.title||c.title?(o(),g("div",{key:0,class:h(m.value.title({class:s.ui?.title}))},[j(b.$slots,"title",{},()=>[T(d(a.title),1)])],2)):y("",!0),a.description||c.description?(o(),g("div",{key:1,class:h(m.value.description({class:s.ui?.description}))},[j(b.$slots,"description",{},()=>[T(d(a.description),1)])],2)):y("",!0),a.orientation==="vertical"&&(a.actions?.length||c.actions)?(o(),g("div",{key:2,class:h(m.value.actions({class:s.ui?.actions}))},[j(b.$slots,"actions",{},()=>[(o(!0),g(B,null,M(a.actions,(S,v)=>(o(),k(V,P({key:v,size:"xs"},{ref_for:!0},S),null,16))),128))])],2)):y("",!0)],2),a.orientation==="horizontal"&&(a.actions?.length||c.actions)||a.close?(o(),g("div",{key:0,class:h(m.value.actions({class:s.ui?.actions,orientation:"horizontal"}))},[a.orientation==="horizontal"&&(a.actions?.length||c.actions)?j(b.$slots,"actions",{key:0},()=>[(o(!0),g(B,null,M(a.actions,(S,v)=>(o(),k(V,P({key:v,size:"xs"},{ref_for:!0},S),null,16))),128))]):y("",!0),j(b.$slots,"close",{ui:m.value},()=>[a.close?(o(),k(V,P({key:0,icon:a.closeIcon||r(w).ui.icons.close,color:"neutral",variant:"link","aria-label":r(f)("alert.close")},typeof a.close=="object"?a.close:{},{class:m.value.close({class:s.ui?.close}),onClick:$[0]||($[0]=S=>n("update:open",!1))}),null,16,["icon","aria-label","class"])):y("",!0)])],2)):y("",!0)]),_:3},8,["as","data-orientation","class"]))}},ge={class:"reading-stats-dashboard space-y-6"},me={class:"flex items-center justify-between"},ve={key:0,class:"flex justify-center py-12"},fe={key:1,class:"space-y-6"},xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ye={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},pe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},be={class:"space-y-4"},he={class:"flex justify-between items-center"},_e={class:"font-medium"},ke={class:"flex justify-between items-center"},we={class:"font-medium"},$e={class:"flex justify-between items-center"},Se={class:"font-medium"},Ce={class:"flex justify-between items-center"},je={class:"font-medium"},Te={class:"space-y-3"},qe={class:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},ze={class:"text-xs font-medium text-blue-600 dark:text-blue-400"},Pe={class:"flex-1 min-w-0"},Ve={class:"text-sm font-medium truncate"},Re={class:"text-xs text-gray-500"},Be={class:"flex items-center justify-between"},Me={class:"flex gap-2"},De={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ne={class:"flex items-center justify-between mb-2"},Ue={class:"font-medium text-sm"},Ie={class:"text-xs text-gray-500"},Oe={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2"},Ae={class:"flex justify-between text-xs text-gray-500"},Le={key:0,class:"mt-2 flex items-center gap-1 text-green-600 dark:text-green-400"},Ee=I({__name:"ReadingStatsDashboard",setup(a){const p=q(!0),s=q(""),n=q(null),c=q("week"),f=q("all"),w=[{label:"Aujourd'hui",value:"day"},{label:"7 derniers jours",value:"week"},{label:"30 derniers jours",value:"month"},{label:"Cette année",value:"year"},{label:"Tout",value:"all"}],m=R(()=>n.value?f.value==="all"?n.value.bookProgress:n.value.bookProgress.filter(v=>typeof v.book=="object"&&v.book.testament===f.value):[]),b=async()=>{try{p.value=!0,s.value="",n.value=await $fetch("/api/reading/stats",{query:{period:c.value}})}catch(v){s.value="Erreur lors du chargement des statistiques",console.error(v)}finally{p.value=!1}},$=v=>{const t=Math.floor(v/3600),_=Math.floor(v%3600/60);return t>0?`${t}h${_>0?` ${_}m`:""}`:_>0?`${_}m`:`${v}s`},S=v=>{const _=new Date().getTime()-v.getTime(),x=Math.floor(_/(1e3*60*60*24));return x===0?"Aujourd'hui":x===1?"Hier":x<7?`Il y a ${x} jours`:x<30?`Il y a ${Math.floor(x/7)} semaines`:`Il y a ${Math.floor(x/30)} mois`};return Q(()=>{b()}),(v,t)=>{const _=ae,x=D,z=ce,L=U("ReadingTimeChart"),C=A,E=U("VersesReadChart"),H=U("TimePreferencesChart"),N=V,F=de;return o(),g("div",ge,[e("div",me,[t[4]||(t[4]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Statistiques de lecture "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Suivez votre progression dans l'étude biblique ")],-1)),l(_,{modelValue:r(c),"onUpdate:modelValue":t[0]||(t[0]=i=>Y(c)?c.value=i:null),options:w,"option-attribute":"label","value-attribute":"value",onChange:b},null,8,["modelValue"])]),r(p)?(o(),g("div",ve,[l(x,{name:"i-lucide-loader-2",class:"w-8 h-8 animate-spin"})])):r(n)?(o(),g("div",fe,[e("div",xe,[l(z,{title:"Temps total",value:$(r(n).summary.totalReadingTime),icon:"i-lucide-clock",color:"blue"},null,8,["value"]),l(z,{title:"Sessions",value:r(n).summary.totalSessions.toString(),icon:"i-lucide-book-open",color:"green"},null,8,["value"]),l(z,{title:"Versets lus",value:r(n).summary.totalVersesRead.toString(),icon:"i-lucide-scroll-text",color:"purple"},null,8,["value"]),l(z,{title:"Série actuelle",value:`${r(n).summary.currentStreak} jours`,icon:"i-lucide-flame",color:"orange"},null,8,["value"])]),e("div",ye,[l(C,null,{header:u(()=>[...t[5]||(t[5]=[e("h3",{class:"text-lg font-semibold"}," Temps de lecture quotidien ",-1)])]),default:u(()=>[l(L,{data:r(n).dailyStats},null,8,["data"])]),_:1}),l(C,null,{header:u(()=>[...t[6]||(t[6]=[e("h3",{class:"text-lg font-semibold"}," Progression des versets ",-1)])]),default:u(()=>[l(E,{data:r(n).dailyStats},null,8,["data"])]),_:1})]),e("div",pe,[l(C,null,{header:u(()=>[...t[7]||(t[7]=[e("h3",{class:"text-lg font-semibold"}," Heures préférées ",-1)])]),default:u(()=>[l(H,{data:r(n).timePreferences},null,8,["data"])]),_:1}),l(C,null,{header:u(()=>[...t[8]||(t[8]=[e("h3",{class:"text-lg font-semibold"}," Moyennes ",-1)])]),default:u(()=>[e("div",be,[e("div",he,[t[9]||(t[9]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Temps/jour ",-1)),e("span",_e,d($(r(n).summary.averages.readingTimePerDay)),1)]),e("div",ke,[t[10]||(t[10]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Versets/session ",-1)),e("span",we,d(Math.round(r(n).summary.averages.versesPerSession)),1)]),e("div",$e,[t[11]||(t[11]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Vitesse lecture ",-1)),e("span",Se,d(Math.round(r(n).summary.averages.averageReadingSpeed||0))+" v/min ",1)]),e("div",Ce,[t[12]||(t[12]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Plus longue série ",-1)),e("span",je,d(r(n).summary.longestStreak)+" jours ",1)])])]),_:1}),l(C,null,{header:u(()=>[...t[13]||(t[13]=[e("h3",{class:"text-lg font-semibold"}," Top livres ",-1)])]),default:u(()=>[e("div",Te,[(o(!0),g(B,null,M(r(n).topBooks.slice(0,5),(i,W)=>(o(),g("div",{key:(typeof i.name=="string",i.name),class:"flex items-center gap-3"},[e("div",qe,[e("span",ze,d(W+1),1)]),e("div",Pe,[e("p",Ve,d(i.name),1),e("p",Re,d(i.sessions)+" sessions • "+d($(i.totalTime)),1)])]))),128))])]),_:1})]),l(C,null,{header:u(()=>[e("div",Be,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold"}," Progression par livre ",-1)),e("div",Me,[l(N,{variant:r(f)==="all"?"solid":"ghost",size:"xs",onClick:t[1]||(t[1]=i=>f.value="all")},{default:u(()=>[...t[14]||(t[14]=[T(" Tous ",-1)])]),_:1},8,["variant"]),l(N,{variant:r(f)==="OLD"?"solid":"ghost",size:"xs",onClick:t[2]||(t[2]=i=>f.value="OLD")},{default:u(()=>[...t[15]||(t[15]=[T(" AT ",-1)])]),_:1},8,["variant"]),l(N,{variant:r(f)==="NEW"?"solid":"ghost",size:"xs",onClick:t[3]||(t[3]=i=>f.value="NEW")},{default:u(()=>[...t[16]||(t[16]=[T(" NT ",-1)])]),_:1},8,["variant"])])])]),default:u(()=>[e("div",De,[(o(!0),g(B,null,M(r(m),i=>(o(),g("div",{key:typeof i.book=="string"?i.book:i.book.code,class:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg"},[e("div",Ne,[e("h4",Ue,d(typeof i.book=="string"?i.book:i.book.name),1),e("span",Ie,d(i.completionPercentage)+"% ",1)]),e("div",Oe,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:ee({width:`${i.completionPercentage}%`})},null,4)]),e("div",Ae,[e("span",null," Chapitre "+d(i.currentChapter),1),e("span",null,d(S(new Date(i.lastReadAt))),1)]),i.isCompleted?(o(),g("div",Le,[l(x,{name:"i-lucide-check-circle",class:"w-3 h-3"}),t[18]||(t[18]=e("span",{class:"text-xs"},"Terminé",-1))])):y("",!0)]))),128))])]),_:1})])):r(s)?(o(),k(F,{key:2,color:"error",variant:"soft",title:r(s)},null,8,["title"])):y("",!0)])}}}),He=Object.assign(Ee,{__name:"ReadingStatsDashboard"}),Fe={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},We={class:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"},Ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Xe={class:"flex items-center justify-between h-16"},Ze={class:"flex items-center"},Je={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},tt=I({__name:"stats",setup(a){return te({title:"Statistiques de lecture - Théologie pour tous",meta:[{name:"description",content:"Suivez votre progression dans l'étude de la Bible avec des statistiques détaillées"}]}),(p,s)=>{const n=D,c=se,f=He;return o(),g("div",Fe,[e("div",We,[e("div",Ge,[e("div",Xe,[e("div",Ze,[l(c,{to:"/bible",class:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"},{default:u(()=>[l(n,{name:"i-lucide-arrow-left",class:"w-4 h-4"}),s[0]||(s[0]=T(" Retour à la Bible ",-1))]),_:1})]),s[1]||(s[1]=e("h1",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Statistiques de lecture ",-1)),s[2]||(s[2]=e("div",null,null,-1))])])]),e("div",Je,[l(f)])])}}});export{tt as default};
