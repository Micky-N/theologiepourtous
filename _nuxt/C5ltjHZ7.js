import{$ as X,aA as ce,y as J,aI as de,aJ as Y,aw as Z,aK as ue,aD as ee,aF as me,V as K,aL as ge,d as w,e as n,g as m,w as l,X as B,f as T,h as v,z as g,Z as j,n as L,G as t,N as pe,E as V,aM as N,M as D,t as z,F as E,H as M,aN as fe,aO as O,av as ve,Q as W,a7 as be,aP as he,aQ as ye,aR as F,aS as G,ax as xe,a0 as H,aT as ke,aU as Ie,B as R,aV as Se,aW as Le,r as $,W as te,aC as Ce,L as ae,a8 as $e,aX as we,I as Te,a as qe,v as Oe,D as ze,o as _e,P as Be,aY as Ve,R as Ke}from"#entry";import{_ as Ue}from"./DTIFCxQf.js";import{_ as Pe,a as Ae}from"./BiYaFSpO.js";import{_ as Ee}from"./9so_DM-r.js";import{_ as Me}from"./sIOFFvLP.js";import{_ as De}from"./BIDBwe6G.js";import{d as je}from"./D8rO69WY.js";import"./Bpjx_WNm.js";import"./sdVB0pjO.js";const se={__name:"UContextMenuContent",props:{items:{type:null,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0},sub:{type:Boolean,required:!1},labelKey:{type:null,required:!0},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1},class:{type:null,required:!1},ui:{type:null,required:!0},uiOverride:{type:null,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(e,{emit:p}){const s=e,C=p,r=X(),{dir:f}=ce(),x=J(),c=de(Y(()=>s.portal)),u=Z(ue(s,"sub","items","portal","labelKey","checkedIcon","loadingIcon","externalIcon","class","ui","uiOverride"),C),k=ee(r,["default"]),[h,d]=me(),U=K(()=>f.value==="rtl"?x.ui.icons.chevronLeft:x.ui.icons.chevronRight),I=K(()=>s.items?.length?ge(s.items)?s.items:[s.items]:[]);return(S,A)=>(n(),w(E,null,[m(t(h),null,{default:l(({item:a,active:y,index:i})=>[B(S.$slots,a.slot||"item",{item:a,index:i},()=>[B(S.$slots,a.slot?`${a.slot}-leading`:"item-leading",{item:a,active:y,index:i},()=>[a.loading?(n(),g(j,{key:0,name:e.loadingIcon||t(x).ui.icons.loading,class:L(e.ui.itemLeadingIcon({class:[e.uiOverride?.itemLeadingIcon,a.ui?.itemLeadingIcon],color:a?.color,loading:!0}))},null,8,["name","class"])):a.icon?(n(),g(j,{key:1,name:a.icon,class:L(e.ui.itemLeadingIcon({class:[e.uiOverride?.itemLeadingIcon,a.ui?.itemLeadingIcon],color:a?.color,active:y}))},null,8,["name","class"])):a.avatar?(n(),g(pe,V({key:2,size:a.ui?.itemLeadingAvatarSize||e.uiOverride?.itemLeadingAvatarSize||e.ui.itemLeadingAvatarSize()},a.avatar,{class:e.ui.itemLeadingAvatar({class:[e.uiOverride?.itemLeadingAvatar,a.ui?.itemLeadingAvatar],active:y})}),null,16,["size","class"])):T("",!0)]),t(N)(a,s.labelKey)||r[a.slot?`${a.slot}-label`:"item-label"]?(n(),w("span",{key:0,class:L(e.ui.itemLabel({class:[e.uiOverride?.itemLabel,a.ui?.itemLabel],active:y}))},[B(S.$slots,a.slot?`${a.slot}-label`:"item-label",{item:a,active:y,index:i},()=>[D(z(t(N)(a,s.labelKey)),1)]),a.target==="_blank"&&e.externalIcon!==!1?(n(),g(j,{key:0,name:typeof e.externalIcon=="string"?e.externalIcon:t(x).ui.icons.external,class:L(e.ui.itemLabelExternalIcon({class:[e.uiOverride?.itemLabelExternalIcon,a.ui?.itemLabelExternalIcon],color:a?.color,active:y}))},null,8,["name","class"])):T("",!0)],2)):T("",!0),v("span",{class:L(e.ui.itemTrailing({class:[e.uiOverride?.itemTrailing,a.ui?.itemTrailing]}))},[B(S.$slots,a.slot?`${a.slot}-trailing`:"item-trailing",{item:a,active:y,index:i},()=>[a.children?.length?(n(),g(j,{key:0,name:U.value,class:L(e.ui.itemTrailingIcon({class:[e.uiOverride?.itemTrailingIcon,a.ui?.itemTrailingIcon],color:a?.color,active:y}))},null,8,["name","class"])):a.kbds?.length?(n(),w("span",{key:1,class:L(e.ui.itemTrailingKbds({class:[e.uiOverride?.itemTrailingKbds,a.ui?.itemTrailingKbds]}))},[(n(!0),w(E,null,M(a.kbds,(q,P)=>(n(),g(fe,V({key:P,size:a.ui?.itemTrailingKbdsSize||e.uiOverride?.itemTrailingKbdsSize||e.ui.itemTrailingKbdsSize()},{ref_for:!0},typeof q=="string"?{value:q}:q),null,16,["size"]))),128))],2)):T("",!0)]),m(t(O).ItemIndicator,{"as-child":""},{default:l(()=>[m(j,{name:e.checkedIcon||t(x).ui.icons.check,class:L(e.ui.itemTrailingIcon({class:[e.uiOverride?.itemTrailingIcon,a.ui?.itemTrailingIcon],color:a?.color}))},null,8,["name","class"])]),_:2},1024)],2)])]),_:3}),m(t(O).Portal,F(G(t(c))),{default:l(()=>[(n(),g(ve(e.sub?t(O).SubContent:t(O).Content),V({class:s.class},t(u)),{default:l(()=>[B(S.$slots,"content-top"),v("div",{role:"presentation",class:L(e.ui.viewport({class:e.uiOverride?.viewport}))},[(n(!0),w(E,null,M(I.value,(a,y)=>(n(),g(t(O).Group,{key:`group-${y}`,class:L(e.ui.group({class:e.uiOverride?.group}))},{default:l(()=>[(n(!0),w(E,null,M(a,(i,q)=>(n(),w(E,{key:`group-${y}-${q}`},[i.type==="label"?(n(),g(t(O).Label,{key:0,class:L(e.ui.label({class:[e.uiOverride?.label,i.ui?.label,i.class]}))},{default:l(()=>[m(t(d),{item:i,index:q},null,8,["item","index"])]),_:2},1032,["class"])):i.type==="separator"?(n(),g(t(O).Separator,{key:1,class:L(e.ui.separator({class:[e.uiOverride?.separator,i.ui?.separator,i.class]}))},null,8,["class"])):i?.children?.length?(n(),g(t(O).Sub,{key:2,open:i.open,"default-open":i.defaultOpen},{default:l(()=>[m(t(O).SubTrigger,{as:"button",type:"button",disabled:i.disabled,"text-value":t(N)(i,s.labelKey),class:L(e.ui.item({class:[e.uiOverride?.item,i.ui?.item,i.class],color:i?.color}))},{default:l(()=>[m(t(d),{item:i,index:q},null,8,["item","index"])]),_:2},1032,["disabled","text-value","class"]),m(se,V({sub:"",class:s.class,ui:e.ui,"ui-override":e.uiOverride,portal:e.portal,items:i.children,"align-offset":-4,"label-key":e.labelKey,"checked-icon":e.checkedIcon,"loading-icon":e.loadingIcon,"external-icon":e.externalIcon},{ref_for:!0},i.content),W({_:2},[M(t(k),(P,o)=>({name:o,fn:l(_=>[B(S.$slots,o,V({ref_for:!0},_))])}))]),1040,["class","ui","ui-override","portal","items","label-key","checked-icon","loading-icon","external-icon"])]),_:2},1032,["open","default-open"])):i.type==="checkbox"?(n(),g(t(O).CheckboxItem,{key:3,"model-value":i.checked,disabled:i.disabled,"text-value":t(N)(i,s.labelKey),class:L(e.ui.item({class:[e.uiOverride?.item,i.ui?.item,i.class],color:i?.color})),"onUpdate:modelValue":i.onUpdateChecked,onSelect:i.onSelect},{default:l(()=>[m(t(d),{item:i,index:q},null,8,["item","index"])]),_:2},1032,["model-value","disabled","text-value","class","onUpdate:modelValue","onSelect"])):(n(),g(t(O).Item,{key:4,"as-child":"",disabled:i.disabled,"text-value":t(N)(i,s.labelKey),onSelect:i.onSelect},{default:l(()=>[m(be,V({ref_for:!0},t(he)(i),{custom:""}),{default:l(({active:P,...o})=>[m(ye,V({ref_for:!0},o,{class:e.ui.item({class:[e.uiOverride?.item,i.ui?.item,i.class],active:P,color:i?.color})}),{default:l(()=>[m(t(d),{item:i,active:P,index:q},null,8,["item","active","index"])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["disabled","text-value","onSelect"]))],64))),128))]),_:2},1032,["class"]))),128))],2),B(S.$slots,"default"),B(S.$slots,"content-bottom")]),_:3},16,["class"]))]),_:3},16)],64))}},Ne={slots:{content:"min-w-32 bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-context-menu-content-transform-origin) flex flex-col",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",group:"p-1 isolate",label:"w-full flex items-center font-semibold text-highlighted",separator:"-mx-1 my-1 h-px bg-border",item:"group relative w-full flex items-center select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0",itemTrailingKbdsSize:"",itemLabel:"truncate",itemLabelExternalIcon:"inline-block size-3 align-top text-dimmed"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:text-highlighted data-[state=open]:text-highlighted data-highlighted:before:bg-elevated/50 data-[state=open]:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:text-default group-data-[state=open]:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}},size:{xs:{label:"p-1 text-xs gap-1",item:"p-1 text-xs gap-1",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},sm:{label:"p-1.5 text-xs gap-1.5",item:"p-1.5 text-xs gap-1.5",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},md:{label:"p-1.5 text-sm gap-1.5",item:"p-1.5 text-sm gap-1.5",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"md"},lg:{label:"p-2 text-sm gap-2",item:"p-2 text-sm gap-2",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"md"},xl:{label:"p-2 text-base gap-2",item:"p-2 text-base gap-2",itemLeadingIcon:"size-6",itemLeadingAvatarSize:"xs",itemTrailingIcon:"size-6",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"lg"}}},compoundVariants:[{color:"primary",active:!1,class:{item:"text-primary data-highlighted:text-primary data-highlighted:before:bg-primary/10 data-[state=open]:before:bg-primary/10",itemLeadingIcon:"text-primary/75 group-data-highlighted:text-primary group-data-[state=open]:text-primary"}},{color:"secondary",active:!1,class:{item:"text-secondary data-highlighted:text-secondary data-highlighted:before:bg-secondary/10 data-[state=open]:before:bg-secondary/10",itemLeadingIcon:"text-secondary/75 group-data-highlighted:text-secondary group-data-[state=open]:text-secondary"}},{color:"success",active:!1,class:{item:"text-success data-highlighted:text-success data-highlighted:before:bg-success/10 data-[state=open]:before:bg-success/10",itemLeadingIcon:"text-success/75 group-data-highlighted:text-success group-data-[state=open]:text-success"}},{color:"info",active:!1,class:{item:"text-info data-highlighted:text-info data-highlighted:before:bg-info/10 data-[state=open]:before:bg-info/10",itemLeadingIcon:"text-info/75 group-data-highlighted:text-info group-data-[state=open]:text-info"}},{color:"warning",active:!1,class:{item:"text-warning data-highlighted:text-warning data-highlighted:before:bg-warning/10 data-[state=open]:before:bg-warning/10",itemLeadingIcon:"text-warning/75 group-data-highlighted:text-warning group-data-[state=open]:text-warning"}},{color:"error",active:!1,class:{item:"text-error data-highlighted:text-error data-highlighted:before:bg-error/10 data-[state=open]:before:bg-error/10",itemLeadingIcon:"text-error/75 group-data-highlighted:text-error group-data-[state=open]:text-error"}},{color:"primary",active:!0,class:{item:"text-primary before:bg-primary/10",itemLeadingIcon:"text-primary"}},{color:"secondary",active:!0,class:{item:"text-secondary before:bg-secondary/10",itemLeadingIcon:"text-secondary"}},{color:"success",active:!0,class:{item:"text-success before:bg-success/10",itemLeadingIcon:"text-success"}},{color:"info",active:!0,class:{item:"text-info before:bg-info/10",itemLeadingIcon:"text-info"}},{color:"warning",active:!0,class:{item:"text-warning before:bg-warning/10",itemLeadingIcon:"text-warning"}},{color:"error",active:!0,class:{item:"text-error before:bg-error/10",itemLeadingIcon:"text-error"}}],defaultVariants:{size:"md"}},Re={__name:"UContextMenu",props:{size:{type:null,required:!1},items:{type:null,required:!1},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1,default:!0},content:{type:Object,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},labelKey:{type:null,required:!1,default:"label"},disabled:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},pressOpenDelay:{type:Number,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(e,{emit:p}){const s=e,C=p,r=X(),f=J(),x=Z(xe(s,"modal"),C),c=Y(()=>s.content),u=ee(r,["default"]),k=K(()=>H({extend:H(Ne),...f.ui?.contextMenu||{}})({size:s.size}));return(h,d)=>(n(),g(t(Ie),F(G(t(x))),{default:l(()=>[r.default?(n(),g(t(ke),{key:0,"as-child":"",disabled:e.disabled,class:L(s.class)},{default:l(()=>[B(h.$slots,"default")]),_:3},8,["disabled","class"])):T("",!0),m(se,V({class:k.value.content({class:[!r.default&&s.class,s.ui?.content]}),ui:k.value,"ui-override":s.ui},c.value,{items:e.items,portal:e.portal,"label-key":e.labelKey,"checked-icon":e.checkedIcon,"loading-icon":e.loadingIcon,"external-icon":e.externalIcon}),W({_:2},[M(t(u),(U,I)=>({name:I,fn:l(S=>[B(h.$slots,I,F(G(S)))])}))]),1040,["class","ui","ui-override","items","portal","label-key","checked-icon","loading-icon","external-icon"])]),_:3},16))}},Fe={class:"font-bold text-primary-600 dark:text-primary-400"},Ge=R({__name:"BibleVerse",props:{verse:{}},emits:["showCompare"],setup(e,{emit:p}){const s=e,C=p,r=[[{label:"Comparer",icon:"i-lucide-eye",onSelect:()=>C("showCompare",s.verse.verse),slot:"compare"},{label:"Edit",icon:"i-lucide-pencil"},{label:"Copier",icon:"i-lucide-copy"}]];return(f,x)=>{const c=Re;return n(),g(c,{items:r},{default:l(()=>[v("span",null,[v("span",Fe,z(f.verse.verse),1),v("span",null,z(f.verse.text),1)])]),_:1})}}}),We=Object.assign(Ge,{__name:"BibleVerse"}),Qe={class:"p-6"},He={class:"space-y-4"},Xe={class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},Je={class:"font-medium"},Ye={key:0},Ze={class:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto"},et={class:"flex-1"},tt={class:"text-sm font-medium text-gray-900 dark:text-white"},at={class:"text-xs text-gray-500 dark:text-gray-400"},st={class:"mt-2 text-xs text-gray-500"},it={class:"flex justify-end gap-2 mt-6"},nt=R({__name:"BibleCompareModal",props:Se({availableVersions:{},book:{},chapter:{},version:{},verseStart:{},verseEnd:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const p=e,s=Le(e,"modelValue"),C=$(!1),r=$([p.version]),f=c=>{const u=r.value.indexOf(c);u>-1?r.value.splice(u,1):r.value.length<6&&r.value.push(c)},x=async()=>{if(!(r.value.length<2))try{C.value=!0;const c=p.availableVersions.filter(k=>r.value.includes(k.id)).map(k=>k.code),u=new URLSearchParams({book:p.book.code,chapter:p.chapter.toString(),verses:p.verseStart.toString(),versions:c.join(",")});p.verseEnd&&p.verseEnd!==p.verseStart&&u.set("verses",p.verseStart.toString()+"-"+p.verseEnd.toString()),await $e(`/bible/compare?${u.toString()}`)}catch(c){console.error("Erreur lors de la comparaison:",c)}finally{C.value=!1,s.value=!1}};return te(()=>p.version,c=>{r.value=[c]}),(c,u)=>{const k=De,h=Ce,d=ae,U=we;return n(),g(U,{open:s.value,"onUpdate:open":u[1]||(u[1]=I=>s.value=I),title:"Comparer ce passage",description:"Terme théologique",ui:{description:"hidden",content:"max-w-2xl"}},{content:l(()=>[v("div",Qe,[v("div",He,[v("div",null,[u[2]||(u[2]=v("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"}," Passage sélectionné : ",-1)),v("div",Xe,[v("p",Je,[D(z(c.book.name)+" "+z(c.chapter)+":"+z(c.verseStart)+" ",1),c.verseEnd&&c.verseEnd!==c.verseStart?(n(),w("span",Ye," -"+z(c.verseEnd),1)):T("",!0)])])]),m(h,{label:"Versions à comparer (sélectionnez 2 à 6 versions)"},{default:l(()=>[v("div",Ze,[(n(!0),w(E,null,M(c.availableVersions,I=>(n(),w("div",{key:I.id,class:"flex items-center space-x-2"},[m(k,{"model-value":t(r).includes(I.id),disabled:t(r).length>=6&&!t(r).includes(I.id),"onUpdate:modelValue":S=>f(I.id)},null,8,["model-value","disabled","onUpdate:modelValue"]),v("div",et,[v("div",tt,z(I.name),1),v("div",at,z(I.code)+" • "+z(I.language),1)])]))),128))]),v("div",st,z(t(r).length)+" version(s) sélectionnée(s) (minimum 2, maximum 6) ",1)]),_:1})]),v("div",it,[m(d,{label:"Annuler",variant:"ghost",onClick:u[0]||(u[0]=I=>s.value=!1)}),m(d,{label:"Comparer",disabled:t(r).length<2,loading:t(C),onClick:x},null,8,["disabled","loading"])])])]),_:1},8,["open"])}}}),ot=Object.assign(nt,{__name:"BibleCompareModal"}),lt={class:"space-y-6"},rt={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},ct={class:"flex flex-1 items-center gap-2"},dt={class:"space-x-1"},ut={class:"flex justify-center gap-2"},mt=R({__name:"BibleReader",props:{book:{},chapter:{},versesData:{},versions:{},selectedVersion:{}},emits:["update:chapter"],setup(e,{emit:p}){const s=e,C=h=>{r.value={book:{code:s.book.code,name:s.book.name},verseStart:h,chapter:s.chapter,version:s.selectedVersion.id},f.value=!0},r=$(null),f=$(!1),x=p,c=K(()=>Array.from({length:s.versesData?.navigation.totalChapters||0},(h,d)=>d+1)),u=K(()=>s.versesData?.verses||[]),k=h=>{x("update:chapter",h)};return(h,d)=>{const U=Ee,I=We,S=ae,A=Me,a=ot;return n(),w("div",lt,[m(A,{class:"mb-4"},{header:l(()=>[v("div",rt,[v("div",ct,[d[3]||(d[3]=v("p",null,"Chapitre",-1)),m(U,{items:c.value,"model-value":h.chapter,placeholder:"Chapitre",class:"w-32","onUpdate:modelValue":k},null,8,["items","model-value"])])])]),footer:l(()=>[v("div",ut,[h.versesData?.navigation.previousChapter?(n(),g(S,{key:0,icon:"i-lucide-arrow-left",color:"primary",variant:"soft",onClick:d[0]||(d[0]=y=>k(h.versesData.navigation.previousChapter))},{default:l(()=>[...d[4]||(d[4]=[D(" Précédent ",-1)])]),_:1})):T("",!0),h.versesData?.navigation.nextChapter?(n(),g(S,{key:1,"trailing-icon":"i-lucide-arrow-right",color:"primary",variant:"soft",onClick:d[1]||(d[1]=y=>k(h.versesData.navigation.nextChapter))},{default:l(()=>[...d[5]||(d[5]=[D(" Suivant ",-1)])]),_:1})):T("",!0)])]),default:l(()=>[v("div",dt,[(n(!0),w(E,null,M(u.value,y=>(n(),g(I,{key:y.id,verse:y,onShowCompare:C},null,8,["verse"]))),128))])]),_:1}),t(r)?(n(),g(a,V({key:0,modelValue:t(f),"onUpdate:modelValue":d[2]||(d[2]=y=>Te(f)?f.value=y:null)},t(r),{"available-versions":h.versions}),null,16,["modelValue","available-versions"])):T("",!0)])}}}),gt=Object.assign(mt,{__name:"BibleReader"}),St=R({__name:"index",setup(e){const p=qe(),s=Oe(),C=$(!1),r=$(null),f=$("GEN"),x=$(1),c=$(null),u=$([]),k=$("LSG"),h=()=>{f.value=s.query.book||"GEN",k.value=s.query.version||"LSG",x.value=parseInt(s.query.chapter||"1")},d=$([]),U=K(()=>{const o=d.value.filter(b=>b.testament==="OLD"),_=d.value.filter(b=>b.testament==="NEW");return[{label:"Ancien Testament",open:o.some(b=>b.code===f.value),active:o.some(b=>b.code===f.value),ui:{link:"cursor-pointer"},children:o.map(b=>({label:b.name,onSelect:async()=>await a(b.code),active:f.value===b.code,ui:{link:"cursor-pointer"}}))},{label:"Nouveau Testament",open:_.some(b=>b.code===f.value),active:_.some(b=>b.code===f.value),ui:{link:"cursor-pointer"},children:_.map(b=>({label:b.name,onSelect:async()=>await a(b.code),active:f.value===b.code,ui:{link:"cursor-pointer"}}))}]}),I=K(()=>u.value.map(o=>({label:o.name,to:p.resolve({query:{...s.query,version:o.code}}).href,active:k.value===o.code}))),S=K(()=>d.value.find(o=>o.code==f.value)),A=K(()=>u.value.find(o=>o.code==k.value)),a=async o=>{await p.push({query:{...s.query,book:o,chapter:1}})},y=async o=>{await p.push({query:{...s.query,chapter:o}})};ze({title:"",ogTitle:"",description:"",ogDescription:""}),_e(async()=>{h(),await Promise.all([i(),q(),P()])});const i=async()=>{try{C.value=!0;const o=await $fetch("/api/bible/books");d.value=o.data?.all}catch(o){r.value="Erreur lors du chargement des livres",console.error(o)}finally{C.value=!1}},q=async()=>{try{const o=await $fetch("/api/bible/versions");u.value=o.data||o}catch(o){r.value="Erreur lors du chargement des versions",console.error(o)}},P=async()=>{try{const o=await $fetch(`/api/bible/verses/${f.value}/${x.value}`,{query:{version:k.value}});c.value=o.data}catch(o){r.value="Erreur lors du chargement des versets",console.error(o)}};return te(()=>s.query,async()=>{h(),await P()},{deep:!0}),je(),(o,_)=>{const b=Ve,Q=Ue,ie=Pe,ne=gt,oe=Ke,le=Ae,re=Be;return t(d).length&&t(u).length?(n(),g(re,{key:0},W({left:l(()=>[m(Q,null,{top:l(()=>[..._[0]||(_[0]=[D(" Les livres ",-1)])]),default:l(()=>[m(b,{items:t(U),highlight:"",orientation:"vertical"},null,8,["items"])]),_:1})]),default:l(()=>[t(S)&&t(x)?(n(),g(ie,{key:0,title:`${t(S).name} ${t(x)}`,description:t(A)?t(A).name:"Aucune version sélectionnée"},null,8,["title","description"])):T("",!0),m(le,null,{default:l(()=>[v("div",null,[t(S)&&t(x)&&t(A)&&t(c)?(n(),g(ne,{key:0,book:t(S),chapter:t(x),"verses-data":t(c),versions:t(u),"selected-version":t(A),"onUpdate:chapter":y},null,8,["book","chapter","verses-data","versions","selected-version"])):T("",!0)]),m(oe)]),_:1})]),_:2},[t(u).length?{name:"right",fn:l(()=>[m(Q,null,{top:l(()=>[..._[1]||(_[1]=[D(" Versions disponibles ",-1)])]),default:l(()=>[m(b,{items:t(I),variant:"link",orientation:"vertical"},null,8,["items"])]),_:1})]),key:"0"}:void 0]),1024)):T("",!0)}}});export{St as default};
