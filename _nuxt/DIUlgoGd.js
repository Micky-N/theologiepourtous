import{B as N,bb as _,a6 as B,bc as L,r as j,V as g,W as E,z as f,bm as M,H as r,Q as U,w as s,f as z,h as m,L as D,g as o,bk as I,d as p,F as T,I as V,t as H,e as c}from"#entry";import{_ as F}from"./CRu-j2f3.js";import{_ as P}from"./Bj6CTjPb.js";const O=["innerHTML"],Q={key:1,class:"space-y-4"},W={class:"flex justify-between gap-4 items-center"},q={class:"flex gap-2 items-center"},A={class:"line-clamp-1"},G={class:"flex flex-1 justify-end gap-2 items-center"},J=N({__name:"NoteShowDrawer",props:_({notes:{},verse:{},book:{},footer:{type:Boolean,default:!0}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:_(["edit:note","refreshNote"],["update:open"]),setup(e,{emit:w}){const v=w,b=B(),u=L(e,"open"),d=j(null),a=g(()=>e.notes.find(l=>l.id===d.value)||null);E(u,l=>{l&&e.notes.length&&(e.notes.length==1&&e.notes[0]?.id?d.value=e.notes[0]?.id:e.notes.length>1&&(d.value=null))},{immediate:!0});const $=g(()=>`${e.book.name} ${e.verse.chapter}:${e.verse.verse}`),y=async l=>{try{await $fetch(`/api/bible/notes/${l.id}`,{method:"DELETE"}),b.add({title:"Suppression succès",description:"La note a bien été supprimée"}),v("refreshNote"),e.notes.length==1&&(u.value=!1)}catch(t){console.error(t),b.add({color:"error",title:"Erreur",description:"Erreur lors de la suppression"})}};return(l,t)=>{const i=D,h=F,k=I,C=P,x=M;return c(),f(x,{open:u.value,"onUpdate:open":t[3]||(t[3]=n=>u.value=n),title:r(a)?.title||"Liste des notes",description:r($),ui:{footer:"justify-end"}},U({body:s(()=>[r(a)?(c(),p("p",{key:0,class:"whitespace-pre-wrap",innerHTML:r(a).content},null,8,O)):(c(),p("div",Q,[(c(!0),p(T,null,V(e.notes,n=>(c(),f(C,{key:n.id,variant:"outline",ui:{body:"p-2 sm:py-2 sm:px-4"}},{default:s(()=>[m("div",W,[m("div",q,[o(i,{icon:"i-lucide-eye",size:"md",color:"primary",variant:"link",onClick:S=>d.value=n.id},null,8,["onClick"]),m("h4",A,H(n.title),1)]),o(k,{arrow:""},{content:s(()=>[o(h,{title:"Suppression de la note",description:"Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible.",icon:"i-lucide-trash-2",ui:{root:"max-w-sm",leadingIcon:"text-red-500"}},{default:s(()=>[o(i,{label:"Supprimer",color:"error",variant:"subtle",ui:{base:"justify-center"},onClick:S=>y(n)},null,8,["onClick"])]),_:2},1024)]),default:s(()=>[o(i,{icon:"i-lucide-trash-2",size:"md",color:"error",variant:"ghost"})]),_:2},1024)])]),_:2},1024))),128))]))]),_:2},[r(a)&&e.footer?{name:"footer",fn:s(()=>[e.notes.length>1?(c(),f(i,{key:0,icon:"i-lucide-arrow-left",size:"md",color:"primary",variant:"link",onClick:t[0]||(t[0]=n=>d.value=null)})):z("",!0),m("div",G,[o(i,{label:"Modifier",color:"secondary",onClick:t[1]||(t[1]=n=>v("edit:note",r(a)))}),o(k,{arrow:""},{content:s(()=>[o(h,{title:"Suppression de la note",description:"Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible.",icon:"i-lucide-trash-2",ui:{root:"max-w-sm",leadingIcon:"text-red-500"}},{default:s(()=>[o(i,{label:"Supprimer",color:"error",variant:"subtle",ui:{base:"justify-center"},onClick:t[2]||(t[2]=n=>y(r(a)))})]),_:1})]),default:s(()=>[o(i,{label:"Supprimer",color:"error",variant:"outline"})]),_:1})])]),key:"0"}:void 0]),1032,["open","title","description"])}}}),Y=Object.assign(J,{__name:"NoteShowDrawer"});export{Y as _};
