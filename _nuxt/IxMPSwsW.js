import{B as w,r as c,a3 as B,W as f,z as S,e as o,w as p,h as r,X as b,d as i,f as x,g as k,Z as P,t as u,M as V,aT as L}from"#entry";const N=["id"],C={class:"w-72 max-w-xs p-2"},G={key:0,class:"flex items-center gap-2 text-gray-600"},T={key:1,class:"text-sm text-red-600"},U={key:2,class:"space-y-1"},$={class:"text-xs text-gray-500"},q={key:0},H={class:"italic text-gray-800 leading-relaxed"},I=w({__name:"BiblicalReferencePopover",props:{verse:{}},setup(s){const v=c(!1),d=c(!1),a=c(null),t=c(null),l=B("cache",()=>new Map);async function h(e){return await new Promise(m=>setTimeout(m,1e3)),{"Psaume 139:1-6":{reference:"Psaume 139:1-6",text:"Éternel ! tu me sondes et tu me connais… tu pénètres de loin ma pensée.",version:"LSG"},"Ésaïe 46:9-10":{reference:"Ésaïe 46:9-10",text:"J’annonce dès le commencement ce qui doit arriver, et longtemps d’avance ce qui n’est pas encore accompli…",version:"LSG"},"Hébreux 4:13":{reference:"Hébreux 4:13",text:"Nulle créature n’est cachée devant lui, mais tout est nu et à découvert à ses yeux.",version:"LSG"}}[e]??{reference:e,text:"Verset non trouvé",version:"LSG"}}async function _(){if(a.value=null,l.value.has(s.verse)){t.value=l.value.get(s.verse);return}d.value=!0,t.value=null;try{const e=await h(s.verse);l.value.set(s.verse,e),t.value=e}catch{a.value="Impossible de charger le verset."}finally{d.value=!1}}return f(v,e=>{e&&_()}),f(()=>s.verse,()=>{t.value=l.value.get(s.verse)??null,a.value=null}),(e,n)=>{const m=P,g=L;return o(),S(g,{open:v.value,"onUpdate:open":n[0]||(n[0]=y=>v.value=y),mode:"hover"},{content:p(()=>[r("div",C,[d.value?(o(),i("div",G,[k(m,{name:"i-heroicons-arrow-path-20-solid",class:"animate-spin"}),n[1]||(n[1]=r("span",null,"Chargement du verset…",-1))])):a.value?(o(),i("div",T,u(a.value),1)):t.value?(o(),i("div",U,[r("div",$,[V(u(t.value.reference),1),t.value.version?(o(),i("span",q," — "+u(t.value.version),1)):x("",!0)]),r("div",H,u(t.value.text),1)])):x("",!0)])]),default:p(()=>[r("a",{id:e.verse,class:"hover:underline"},[b(e.$slots,"default")],8,N)]),_:3},8,["open"])}}}),R=Object.assign(I,{__name:"BiblicalReferencePopover"});export{R as default};
