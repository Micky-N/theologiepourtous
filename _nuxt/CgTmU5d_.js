import{B as D,aa as Pe,ad as Ae,ab as ve,V as j,a9 as Me,z as h,e as n,w as o,X as U,f as C,G as e,E as M,af as Fe,aw as ge,a1 as Z,ax as H,ay as X,an as be,r as L,a6 as he,g as p,L as Y,M as N,aq as pe,as as ye,h as q,a4 as je,Z as F,$ as ee,ao as Ne,y as ae,az as Ke,aA as xe,aj as ke,aB as Ee,ar as we,at as Re,aC as De,d as O,n as V,N as qe,aD as W,t as P,F as R,H as G,aE as Ge,aF as K,aG as He,Q as fe,a7 as Qe,aH as We,aI as Je,aJ as de,aK as ce,ak as Ie,a0 as Q,aL as Ze,aM as Xe,aN as Ye,I as me,W as te,a8 as ea,aO as Se,aP as aa,al as ze,aQ as ta,o as Ve,am as la,ag as sa,aR as ia,aS as na,aT as oa,a as ra,v as ua,D as da,P as ca,aU as ma,R as ga}from"#entry";import{_ as pa}from"./DTIFCxQf.js";import{_ as fa,a as va}from"./BiYaFSpO.js";import{u as ba,V as ha,_ as $e}from"./Bb312l8Z.js";import{_ as Be}from"./sIOFFvLP.js";import{_ as Ce}from"./Cg8zKpQW.js";import{_ as ya}from"./BRBMR008.js";import{d as xa}from"./D8rO69WY.js";import"./CX8cS4wn.js";import"./D_FBULPC.js";const[ka,wa]=Me("SwitchRoot");var qa=D({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(a,{emit:x}){const t=a,l=x,{disabled:d}=Pe(t),s=Ae(t,"modelValue",l,{defaultValue:t.defaultValue,passive:t.modelValue===void 0});function r(){d.value||(s.value=!s.value)}const{forwardRef:c,currentElement:f}=ve(),k=ba(f),B=j(()=>t.id&&f.value?document.querySelector(`[for="${t.id}"]`)?.innerText:void 0);return wa({modelValue:s,toggleCheck:r,disabled:d}),(b,y)=>(n(),h(e(Z),M(b.$attrs,{id:b.id,ref:e(c),role:"switch",type:b.as==="button"?"button":void 0,value:b.value,"aria-label":b.$attrs["aria-label"]||B.value,"aria-checked":e(s),"aria-required":b.required,"data-state":e(s)?"checked":"unchecked","data-disabled":e(d)?"":void 0,"as-child":b.asChild,as:b.as,disabled:e(d),onClick:r,onKeydown:Fe(ge(r,["prevent"]),["enter"])}),{default:o(()=>[U(b.$slots,"default",{modelValue:e(s)}),e(k)&&b.name?(n(),h(e(ha),{key:0,type:"checkbox",name:b.name,disabled:e(d),required:b.required,value:b.value,checked:!!e(s)},null,8,["name","disabled","required","value","checked"])):C("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),Ia=qa,Sa=D({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const x=ka();return ve(),(t,l)=>(n(),h(e(Z),{"data-state":e(x).modelValue?.value?"checked":"unchecked","data-disabled":e(x).disabled.value?"":void 0,"as-child":t.asChild,as:t.as},{default:o(()=>[U(t.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),za=Sa;const Va={class:"flex items-center gap-2"},$a={class:"mt-2 flex items-center gap-1"},Ba=D({__name:"BookmarkFormPopover",props:H({verseId:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:H(["closeForm","created"],["update:modelValue"]),setup(a,{emit:x}){const t=a,l=x,d=X(a,"modelValue"),s=be({title:"",color:"blue"}),r=[{label:"Rouge",value:"red"},{label:"Rose",value:"pink"},{label:"Fuchsia",value:"fuchsia"},{label:"Violet",value:"purple"},{label:"Violet clair",value:"violet"},{label:"Indigo",value:"indigo"},{label:"Bleu",value:"blue"},{label:"Ciel",value:"sky"},{label:"Cyan",value:"cyan"},{label:"Teal",value:"teal"},{label:"Émeraude",value:"emerald"},{label:"Vert",value:"green"},{label:"Lime",value:"lime"},{label:"Jaune",value:"yellow"},{label:"Ambre",value:"amber"},{label:"Orange",value:"orange"},{label:"Brun",value:"brown"},{label:"Gris",value:"gray"},{label:"Gris neutre",value:"neutral"},{label:"Ardoise",value:"slate"},{label:"Pierre",value:"stone"},{label:"Zinc",value:"zinc"},{label:"Noir",value:"black"}],c=L(!1),f=L(""),k=he();function B(){d.value=!1,l("closeForm")}async function b(){f.value="",c.value=!0;try{const y=await $fetch("/api/bible/bookmarks",{method:"POST",body:{verseId:t.verseId,title:s.title,color:s.color}});y.success?(k.add({title:"Favori ajouté",description:y.message,color:"primary"}),l("created",y.data),B()):f.value=y.message||"Erreur inconnue"}catch(y){f.value=y?.statusMessage||"Erreur lors de l’ajout du favori"}finally{c.value=!1}}return(y,m)=>{const v=F,S=ye,i=pe,w=$e,u=Y,$=Be,_=Ce;return n(),h(_,{state:e(s),onSubmit:ge(b,["prevent"])},{default:o(()=>[p($,{ui:{header:"p-2 sm:px-4",footer:"p-2 sm:px-4"}},{header:o(()=>[q("div",Va,[p(v,{name:"i-lucide-bookmark",class:"text-primary-600"}),m[2]||(m[2]=q("span",{class:"font-semibold text-sm"},"Ajouter aux favoris",-1))])]),default:o(()=>[p(i,{label:"Titre (optionnel)",name:"title",class:"mb-4"},{default:o(()=>[p(S,{modelValue:e(s).title,"onUpdate:modelValue":m[0]||(m[0]=g=>e(s).title=g),placeholder:"Titre personnalisé...",class:"w-full"},null,8,["modelValue"])]),_:1}),p(i,{label:"Couleur du favori",name:"color"},{default:o(()=>[p(w,{modelValue:e(s).color,"onUpdate:modelValue":m[1]||(m[1]=g=>e(s).color=g),items:r,"label-key":"label","value-key":"value",class:"flex gap-2 w-full"},null,8,["modelValue"]),q("div",$a,[m[3]||(m[3]=N(" Aperçu : ",-1)),q("span",{style:je([`background-color: var(--color-${e(s).color}-400)`,`border: solid 1px var(--color-${e(s).color}-700)`]),class:"inline-block size-4 rounded-full border"},null,4)])]),_:1})]),footer:o(()=>[p(u,{type:"submit",color:"primary",loading:e(c),class:"w-full flex justify-center"},{default:o(()=>[...m[4]||(m[4]=[N(" Ajouter ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["state"])}}}),Ca=Object.assign(Ba,{__name:"BookmarkFormPopover"}),_e={__name:"UContextMenuContent",props:{items:{type:null,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0},sub:{type:Boolean,required:!1},labelKey:{type:null,required:!0},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1},class:{type:null,required:!1},ui:{type:null,required:!0},uiOverride:{type:null,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(a,{emit:x}){const t=a,l=x,d=ee(),{dir:s}=Ne(),r=ae(),c=Ke(xe(()=>t.portal)),f=ke(Ee(t,"sub","items","portal","labelKey","checkedIcon","loadingIcon","externalIcon","class","ui","uiOverride"),l),k=we(d,["default"]),[B,b]=Re(),y=j(()=>s.value==="rtl"?r.ui.icons.chevronLeft:r.ui.icons.chevronRight),m=j(()=>t.items?.length?De(t.items)?t.items:[t.items]:[]);return(v,S)=>(n(),O(R,null,[p(e(B),null,{default:o(({item:i,active:w,index:u})=>[U(v.$slots,i.slot||"item",{item:i,index:u},()=>[U(v.$slots,i.slot?`${i.slot}-leading`:"item-leading",{item:i,active:w,index:u},()=>[i.loading?(n(),h(F,{key:0,name:a.loadingIcon||e(r).ui.icons.loading,class:V(a.ui.itemLeadingIcon({class:[a.uiOverride?.itemLeadingIcon,i.ui?.itemLeadingIcon],color:i?.color,loading:!0}))},null,8,["name","class"])):i.icon?(n(),h(F,{key:1,name:i.icon,class:V(a.ui.itemLeadingIcon({class:[a.uiOverride?.itemLeadingIcon,i.ui?.itemLeadingIcon],color:i?.color,active:w}))},null,8,["name","class"])):i.avatar?(n(),h(qe,M({key:2,size:i.ui?.itemLeadingAvatarSize||a.uiOverride?.itemLeadingAvatarSize||a.ui.itemLeadingAvatarSize()},i.avatar,{class:a.ui.itemLeadingAvatar({class:[a.uiOverride?.itemLeadingAvatar,i.ui?.itemLeadingAvatar],active:w})}),null,16,["size","class"])):C("",!0)]),e(W)(i,t.labelKey)||d[i.slot?`${i.slot}-label`:"item-label"]?(n(),O("span",{key:0,class:V(a.ui.itemLabel({class:[a.uiOverride?.itemLabel,i.ui?.itemLabel],active:w}))},[U(v.$slots,i.slot?`${i.slot}-label`:"item-label",{item:i,active:w,index:u},()=>[N(P(e(W)(i,t.labelKey)),1)]),i.target==="_blank"&&a.externalIcon!==!1?(n(),h(F,{key:0,name:typeof a.externalIcon=="string"?a.externalIcon:e(r).ui.icons.external,class:V(a.ui.itemLabelExternalIcon({class:[a.uiOverride?.itemLabelExternalIcon,i.ui?.itemLabelExternalIcon],color:i?.color,active:w}))},null,8,["name","class"])):C("",!0)],2)):C("",!0),q("span",{class:V(a.ui.itemTrailing({class:[a.uiOverride?.itemTrailing,i.ui?.itemTrailing]}))},[U(v.$slots,i.slot?`${i.slot}-trailing`:"item-trailing",{item:i,active:w,index:u},()=>[i.children?.length?(n(),h(F,{key:0,name:y.value,class:V(a.ui.itemTrailingIcon({class:[a.uiOverride?.itemTrailingIcon,i.ui?.itemTrailingIcon],color:i?.color,active:w}))},null,8,["name","class"])):i.kbds?.length?(n(),O("span",{key:1,class:V(a.ui.itemTrailingKbds({class:[a.uiOverride?.itemTrailingKbds,i.ui?.itemTrailingKbds]}))},[(n(!0),O(R,null,G(i.kbds,($,_)=>(n(),h(Ge,M({key:_,size:i.ui?.itemTrailingKbdsSize||a.uiOverride?.itemTrailingKbdsSize||a.ui.itemTrailingKbdsSize()},{ref_for:!0},typeof $=="string"?{value:$}:$),null,16,["size"]))),128))],2)):C("",!0)]),p(e(K).ItemIndicator,{"as-child":""},{default:o(()=>[p(F,{name:a.checkedIcon||e(r).ui.icons.check,class:V(a.ui.itemTrailingIcon({class:[a.uiOverride?.itemTrailingIcon,i.ui?.itemTrailingIcon],color:i?.color}))},null,8,["name","class"])]),_:2},1024)],2)])]),_:3}),p(e(K).Portal,de(ce(e(c))),{default:o(()=>[(n(),h(He(a.sub?e(K).SubContent:e(K).Content),M({class:t.class},e(f)),{default:o(()=>[U(v.$slots,"content-top"),q("div",{role:"presentation",class:V(a.ui.viewport({class:a.uiOverride?.viewport}))},[(n(!0),O(R,null,G(m.value,(i,w)=>(n(),h(e(K).Group,{key:`group-${w}`,class:V(a.ui.group({class:a.uiOverride?.group}))},{default:o(()=>[(n(!0),O(R,null,G(i,(u,$)=>(n(),O(R,{key:`group-${w}-${$}`},[u.type==="label"?(n(),h(e(K).Label,{key:0,class:V(a.ui.label({class:[a.uiOverride?.label,u.ui?.label,u.class]}))},{default:o(()=>[p(e(b),{item:u,index:$},null,8,["item","index"])]),_:2},1032,["class"])):u.type==="separator"?(n(),h(e(K).Separator,{key:1,class:V(a.ui.separator({class:[a.uiOverride?.separator,u.ui?.separator,u.class]}))},null,8,["class"])):u?.children?.length?(n(),h(e(K).Sub,{key:2,open:u.open,"default-open":u.defaultOpen},{default:o(()=>[p(e(K).SubTrigger,{as:"button",type:"button",disabled:u.disabled,"text-value":e(W)(u,t.labelKey),class:V(a.ui.item({class:[a.uiOverride?.item,u.ui?.item,u.class],color:u?.color}))},{default:o(()=>[p(e(b),{item:u,index:$},null,8,["item","index"])]),_:2},1032,["disabled","text-value","class"]),p(_e,M({sub:"",class:t.class,ui:a.ui,"ui-override":a.uiOverride,portal:a.portal,items:u.children,"align-offset":-4,"label-key":a.labelKey,"checked-icon":a.checkedIcon,"loading-icon":a.loadingIcon,"external-icon":a.externalIcon},{ref_for:!0},u.content),fe({_:2},[G(e(k),(_,g)=>({name:g,fn:o(z=>[U(v.$slots,g,M({ref_for:!0},z))])}))]),1040,["class","ui","ui-override","portal","items","label-key","checked-icon","loading-icon","external-icon"])]),_:2},1032,["open","default-open"])):u.type==="checkbox"?(n(),h(e(K).CheckboxItem,{key:3,"model-value":u.checked,disabled:u.disabled,"text-value":e(W)(u,t.labelKey),class:V(a.ui.item({class:[a.uiOverride?.item,u.ui?.item,u.class],color:u?.color})),"onUpdate:modelValue":u.onUpdateChecked,onSelect:u.onSelect},{default:o(()=>[p(e(b),{item:u,index:$},null,8,["item","index"])]),_:2},1032,["model-value","disabled","text-value","class","onUpdate:modelValue","onSelect"])):(n(),h(e(K).Item,{key:4,"as-child":"",disabled:u.disabled,"text-value":e(W)(u,t.labelKey),onSelect:u.onSelect},{default:o(()=>[p(Qe,M({ref_for:!0},e(We)(u),{custom:""}),{default:o(({active:_,...g})=>[p(Je,M({ref_for:!0},g,{class:a.ui.item({class:[a.uiOverride?.item,u.ui?.item,u.class],active:_,color:u?.color})}),{default:o(()=>[p(e(b),{item:u,active:_,index:$},null,8,["item","active","index"])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["disabled","text-value","onSelect"]))],64))),128))]),_:2},1032,["class"]))),128))],2),U(v.$slots,"default"),U(v.$slots,"content-bottom")]),_:3},16,["class"]))]),_:3},16)],64))}},_a={slots:{content:"min-w-32 bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-context-menu-content-transform-origin) flex flex-col",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",group:"p-1 isolate",label:"w-full flex items-center font-semibold text-highlighted",separator:"-mx-1 my-1 h-px bg-border",item:"group relative w-full flex items-center select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0",itemTrailingKbdsSize:"",itemLabel:"truncate",itemLabelExternalIcon:"inline-block size-3 align-top text-dimmed"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:text-highlighted data-[state=open]:text-highlighted data-highlighted:before:bg-elevated/50 data-[state=open]:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:text-default group-data-[state=open]:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}},size:{xs:{label:"p-1 text-xs gap-1",item:"p-1 text-xs gap-1",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},sm:{label:"p-1.5 text-xs gap-1.5",item:"p-1.5 text-xs gap-1.5",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},md:{label:"p-1.5 text-sm gap-1.5",item:"p-1.5 text-sm gap-1.5",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"md"},lg:{label:"p-2 text-sm gap-2",item:"p-2 text-sm gap-2",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"md"},xl:{label:"p-2 text-base gap-2",item:"p-2 text-base gap-2",itemLeadingIcon:"size-6",itemLeadingAvatarSize:"xs",itemTrailingIcon:"size-6",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"lg"}}},compoundVariants:[{color:"primary",active:!1,class:{item:"text-primary data-highlighted:text-primary data-highlighted:before:bg-primary/10 data-[state=open]:before:bg-primary/10",itemLeadingIcon:"text-primary/75 group-data-highlighted:text-primary group-data-[state=open]:text-primary"}},{color:"secondary",active:!1,class:{item:"text-secondary data-highlighted:text-secondary data-highlighted:before:bg-secondary/10 data-[state=open]:before:bg-secondary/10",itemLeadingIcon:"text-secondary/75 group-data-highlighted:text-secondary group-data-[state=open]:text-secondary"}},{color:"success",active:!1,class:{item:"text-success data-highlighted:text-success data-highlighted:before:bg-success/10 data-[state=open]:before:bg-success/10",itemLeadingIcon:"text-success/75 group-data-highlighted:text-success group-data-[state=open]:text-success"}},{color:"info",active:!1,class:{item:"text-info data-highlighted:text-info data-highlighted:before:bg-info/10 data-[state=open]:before:bg-info/10",itemLeadingIcon:"text-info/75 group-data-highlighted:text-info group-data-[state=open]:text-info"}},{color:"warning",active:!1,class:{item:"text-warning data-highlighted:text-warning data-highlighted:before:bg-warning/10 data-[state=open]:before:bg-warning/10",itemLeadingIcon:"text-warning/75 group-data-highlighted:text-warning group-data-[state=open]:text-warning"}},{color:"error",active:!1,class:{item:"text-error data-highlighted:text-error data-highlighted:before:bg-error/10 data-[state=open]:before:bg-error/10",itemLeadingIcon:"text-error/75 group-data-highlighted:text-error group-data-[state=open]:text-error"}},{color:"primary",active:!0,class:{item:"text-primary before:bg-primary/10",itemLeadingIcon:"text-primary"}},{color:"secondary",active:!0,class:{item:"text-secondary before:bg-secondary/10",itemLeadingIcon:"text-secondary"}},{color:"success",active:!0,class:{item:"text-success before:bg-success/10",itemLeadingIcon:"text-success"}},{color:"info",active:!0,class:{item:"text-info before:bg-info/10",itemLeadingIcon:"text-info"}},{color:"warning",active:!0,class:{item:"text-warning before:bg-warning/10",itemLeadingIcon:"text-warning"}},{color:"error",active:!0,class:{item:"text-error before:bg-error/10",itemLeadingIcon:"text-error"}}],defaultVariants:{size:"md"}},Ta={__name:"UContextMenu",props:{size:{type:null,required:!1},items:{type:null,required:!1},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1,default:!0},content:{type:Object,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},labelKey:{type:null,required:!1,default:"label"},disabled:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},pressOpenDelay:{type:Number,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(a,{emit:x}){const t=a,l=x,d=ee(),s=ae(),r=ke(Ie(t,"modal"),l),c=xe(()=>t.content),f=we(d,["default"]),k=j(()=>Q({extend:Q(_a),...s.ui?.contextMenu||{}})({size:t.size}));return(B,b)=>(n(),h(e(Xe),de(ce(e(r))),{default:o(()=>[d.default?(n(),h(e(Ze),{key:0,"as-child":"",disabled:a.disabled,class:V(t.class)},{default:o(()=>[U(B.$slots,"default")]),_:3},8,["disabled","class"])):C("",!0),p(_e,M({class:k.value.content({class:[!d.default&&t.class,t.ui?.content]}),ui:k.value,"ui-override":t.ui},c.value,{items:a.items,portal:a.portal,"label-key":a.labelKey,"checked-icon":a.checkedIcon,"loading-icon":a.loadingIcon,"external-icon":a.externalIcon}),fe({_:2},[G(e(f),(y,m)=>({name:m,fn:o(v=>[U(B.$slots,m,de(ce(v)))])}))]),1040,["class","ui","ui-override","items","portal","label-key","checked-icon","loading-icon","external-icon"])]),_:3},16))}},La={class:"inline-block align-top text-xs text-primary-600 dark:text-primary-400"},Oa=D({__name:"BibleVerse",props:{verse:{}},emits:["showCompare","addNote"],setup(a,{emit:x}){const t=a,l=x,d=L(!1),s=[[{label:"Comparer",icon:"i-lucide-eye",onSelect:()=>l("showCompare",t.verse.verse),ui:{item:"cursor-pointer"}},{label:"Marquer",icon:"i-lucide-bookmark",onSelect:()=>d.value=!0,ui:{item:"cursor-pointer"}},{label:"Ajouter Note",icon:"i-lucide-notebook-pen",onSelect:()=>l("addNote",t.verse.verse),ui:{item:"cursor-pointer"}}]];return(r,c)=>{const f=Ca,k=Ye,B=Ta;return n(),h(B,{items:s},{default:o(()=>[q("span",null,[q("span",La,P(r.verse.verse),1),p(k,{open:e(d),"onUpdate:open":c[1]||(c[1]=b=>me(d)?d.value=b:null),content:{sideOffset:0},arrow:""},{anchor:o(()=>[q("span",{class:V({underline:e(d)})},P(r.verse.text),3)]),content:o(()=>[p(f,{"verse-id":r.verse.id,onCloseForm:c[0]||(c[0]=b=>d.value=!1)},null,8,["verse-id"])]),_:1},8,["open"])])]),_:1})}}}),Ua=Object.assign(Oa,{__name:"BibleVerse"}),Pa={class:"p-6"},Aa={class:"space-y-4"},Ma={class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},Fa={class:"font-medium"},ja={key:0},Na={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-60 overflow-y-auto"},Ka=["onClick"],Ea={class:"text-sm font-medium text-gray-900 dark:text-white"},Ra={class:"text-xs text-gray-500 dark:text-gray-400"},Da={class:"mt-2 text-xs text-gray-500"},Ga={class:"flex justify-end gap-2 mt-6"},Ha=D({__name:"BibleCompareModal",props:H({availableVersions:{},book:{},chapter:{},version:{},verseStart:{},verseEnd:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const x=a,t=X(a,"modelValue"),l=L(!1),d=L([x.version]),s=c=>{const f=d.value.indexOf(c);f>-1?d.value.splice(f,1):d.value.length<6&&d.value.push(c)},r=async()=>{if(!(d.value.length<2))try{l.value=!0;const c=x.availableVersions.filter(k=>d.value.includes(k.id)).map(k=>k.code),f=new URLSearchParams({book:x.book.code,chapter:x.chapter.toString(),verses:x.verseStart.toString(),versions:c.join(",")});x.verseEnd&&x.verseEnd!==x.verseStart&&f.set("verses",x.verseStart.toString()+"-"+x.verseEnd.toString()),await ea(`/bible/compare?${f.toString()}`)}catch(c){console.error("Erreur lors de la comparaison:",c)}finally{l.value=!1,t.value=!1}};return te(()=>x.version,c=>{d.value=[c]}),(c,f)=>{const k=ya,B=pe,b=Y,y=Se;return n(),h(y,{open:t.value,"onUpdate:open":f[1]||(f[1]=m=>t.value=m),title:"Comparer ce passage",description:"Terme théologique",ui:{description:"hidden",content:"max-w-2xl"}},{content:o(()=>[q("div",Pa,[q("div",Aa,[q("div",null,[f[2]||(f[2]=q("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"}," Passage sélectionné : ",-1)),q("div",Ma,[q("p",Fa,[N(P(c.book.name)+" "+P(c.chapter)+":"+P(c.verseStart)+" ",1),c.verseEnd&&c.verseEnd!==c.verseStart?(n(),O("span",ja," -"+P(c.verseEnd),1)):C("",!0)])])]),p(B,{label:"Versions à comparer (sélectionnez 2 à 6 versions)"},{default:o(()=>[q("div",Na,[(n(!0),O(R,null,G(c.availableVersions,m=>(n(),O("div",{key:m.id,class:"flex items-center space-x-2"},[p(k,{"model-value":e(d).includes(m.id),disabled:e(d).length>=6&&!e(d).includes(m.id),"onUpdate:modelValue":v=>s(m.id)},null,8,["model-value","disabled","onUpdate:modelValue"]),q("div",{class:"flex-1",onClick:v=>s(m.id)},[q("div",Ea,P(m.name),1),q("div",Ra,P(m.code)+" • "+P(m.language),1)],8,Ka)]))),128))]),q("div",Da,P(e(d).length)+" version(s) sélectionnée(s) (minimum 2, maximum 6) ",1)]),_:1})]),q("div",Ga,[p(b,{label:"Annuler",variant:"ghost",onClick:f[0]||(f[0]=m=>t.value=!1)}),p(b,{label:"Comparer",disabled:e(d).length<2,loading:e(l),onClick:r},null,8,["disabled","loading"])])])]),_:1},8,["open"])}}}),Qa=Object.assign(Ha,{__name:"BibleCompareModal"}),Wa={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute start-0 flex items-start",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute end-0 flex items-start",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2 inset-y-1",trailing:"pe-2 inset-y-1",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"},autoresize:{true:{base:"resize-none"}}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ja=["id","value","name","rows","placeholder","disabled","required"],Za=Object.assign({inheritAttrs:!1},{__name:"UTextarea",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},autoresize:{type:Boolean,required:!1},autoresizeDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},rows:{type:Number,required:!1,default:3},maxrows:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:[String,Object],required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:[String,Object],required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:[String,Object],required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:[String,Object],required:!1}},emits:["update:modelValue","blur","change"],setup(a,{expose:x,emit:t}){const l=a,d=t,s=ee(),r=aa(l,"modelValue",d,{defaultValue:l.defaultValue}),c=ae(),{emitFormFocus:f,emitFormBlur:k,emitFormInput:B,emitFormChange:b,size:y,color:m,id:v,name:S,highlight:i,disabled:w,ariaAttrs:u}=ze(l,{deferInputValidation:!0}),{isLeading:$,isTrailing:_,leadingIconName:g,trailingIconName:z}=ta(l),I=j(()=>Q({extend:Q(Wa),...c.ui?.textarea||{}})({color:m.value,variant:l.variant,size:y?.value,loading:l.loading,highlight:i.value,autoresize:l.autoresize,leading:$.value||!!l.avatar||!!s.leading,trailing:_.value||!!s.trailing})),A=L(null);function J(T){l.modelModifiers?.trim&&(T=T?.trim()??null),l.modelModifiers?.number&&(T=la(T)),l.modelModifiers?.nullable&&(T||=null),l.modelModifiers?.optional&&(T||=void 0),r.value=T,B()}function le(T){oe(),l.modelModifiers?.lazy||J(T.target.value)}function se(T){const E=T.target.value;l.modelModifiers?.lazy&&J(E),l.modelModifiers?.trim&&(T.target.value=E.trim()),b(),d("change",T)}function ie(T){k(),d("blur",T)}function ne(){l.autofocus&&A.value?.focus()}function oe(){if(l.autoresize&&A.value){A.value.rows=l.rows;const T=A.value.style.overflow;A.value.style.overflow="hidden";const E=window.getComputedStyle(A.value),re=Number.parseInt(E.paddingTop),Te=Number.parseInt(E.paddingBottom),Le=re+Te,Oe=Number.parseInt(E.lineHeight),{scrollHeight:Ue}=A.value,ue=(Ue-Le)/Oe;ue>l.rows&&(A.value.rows=l.maxrows?Math.min(ue,l.maxrows):ue),A.value.style.overflow=T}}return te(r,()=>{sa(oe)}),Ve(()=>{setTimeout(()=>{ne()},l.autofocusDelay),setTimeout(()=>{oe()},l.autoresizeDelay)}),x({textareaRef:A}),(T,E)=>(n(),h(e(Z),{as:a.as,class:V(I.value.root({class:[l.ui?.root,l.class]}))},{default:o(()=>[q("textarea",M({id:e(v),ref_key:"textareaRef",ref:A,value:e(r),name:e(S),rows:a.rows,placeholder:a.placeholder,class:I.value.base({class:l.ui?.base}),disabled:e(w),required:a.required},{...T.$attrs,...e(u)},{onInput:le,onBlur:ie,onChange:se,onFocus:E[0]||(E[0]=(...re)=>e(f)&&e(f)(...re))}),null,16,Ja),U(T.$slots,"default"),e($)||a.avatar||s.leading?(n(),O("span",{key:0,class:V(I.value.leading({class:l.ui?.leading}))},[U(T.$slots,"leading",{},()=>[e($)&&e(g)?(n(),h(F,{key:0,name:e(g),class:V(I.value.leadingIcon({class:l.ui?.leadingIcon}))},null,8,["name","class"])):a.avatar?(n(),h(qe,M({key:1,size:l.ui?.leadingAvatarSize||I.value.leadingAvatarSize()},a.avatar,{class:I.value.leadingAvatar({class:l.ui?.leadingAvatar})}),null,16,["size","class"])):C("",!0)])],2)):C("",!0),e(_)||s.trailing?(n(),O("span",{key:1,class:V(I.value.trailing({class:l.ui?.trailing}))},[U(T.$slots,"trailing",{},()=>[e(z)?(n(),h(F,{key:0,name:e(z),class:V(I.value.trailingIcon({class:l.ui?.trailingIcon}))},null,8,["name","class"])):C("",!0)])],2)):C("",!0)]),_:3},8,["as","class"]))}}),Xa={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{base:"cursor-not-allowed opacity-75",label:"cursor-not-allowed opacity-75",description:"cursor-not-allowed opacity-75"}}},defaultVariants:{color:"primary",size:"md"}},Ya=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:H({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:[String,Object],required:!1},checkedIcon:{type:[String,Object],required:!1},uncheckedIcon:{type:[String,Object],required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:H(["change"],["update:modelValue"]),setup(a,{emit:x}){const t=a,l=ee(),d=x,s=X(a,"modelValue",{type:Boolean,default:void 0}),r=ae(),c=ia(Ie(t,"required","value","defaultValue")),{id:f,emitFormChange:k,emitFormInput:B,size:b,color:y,name:m,disabled:v,ariaAttrs:S}=ze(t),i=f.value??na(),w=j(()=>Q({extend:Q(Xa),...r.ui?.switch||{}})({size:b.value,color:y.value,required:t.required,loading:t.loading,disabled:v.value||t.loading}));function u($){const _=new Event("change",{target:{value:$}});d("change",_),k(),B()}return($,_)=>(n(),h(e(Z),{as:a.as,class:V(w.value.root({class:[t.ui?.root,t.class]}))},{default:o(()=>[q("div",{class:V(w.value.container({class:t.ui?.container}))},[p(e(Ia),M({id:e(i)},{...e(c),...$.$attrs,...e(S)},{modelValue:s.value,"onUpdate:modelValue":[_[0]||(_[0]=g=>s.value=g),u],name:e(m),disabled:e(v)||a.loading,class:w.value.base({class:t.ui?.base})}),{default:o(()=>[p(e(za),{class:V(w.value.thumb({class:t.ui?.thumb}))},{default:o(()=>[a.loading?(n(),h(F,{key:0,name:a.loadingIcon||e(r).ui.icons.loading,class:V(w.value.icon({class:t.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(n(),O(R,{key:1},[a.checkedIcon?(n(),h(F,{key:0,name:a.checkedIcon,class:V(w.value.icon({class:t.ui?.icon,checked:!0}))},null,8,["name","class"])):C("",!0),a.uncheckedIcon?(n(),h(F,{key:1,name:a.uncheckedIcon,class:V(w.value.icon({class:t.ui?.icon,unchecked:!0}))},null,8,["name","class"])):C("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),a.label||l.label||a.description||l.description?(n(),O("div",{key:0,class:V(w.value.wrapper({class:t.ui?.wrapper}))},[a.label||l.label?(n(),h(e(oa),{key:0,for:e(i),class:V(w.value.label({class:t.ui?.label}))},{default:o(()=>[U($.$slots,"label",{label:a.label},()=>[N(P(a.label),1)])]),_:3},8,["for","class"])):C("",!0),a.description||l.description?(n(),O("p",{key:1,class:V(w.value.description({class:t.ui?.description}))},[U($.$slots,"description",{description:a.description},()=>[N(P(a.description),1)])],2)):C("",!0)],2)):C("",!0)]),_:3},8,["as","class"]))}}),et={class:"flex items-center gap-2"},at={class:"font-semibold text-lg"},tt={key:0,class:"text-red-500 text-sm mt-2"},lt={class:"w-full flex justify-end gap-2"},st=D({__name:"BibleNoteFormModal",props:H({verseId:{},note:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:H(["close","created","updated"],["update:modelValue"]),setup(a,{emit:x}){const t=a,l=x,d=X(a,"modelValue"),s=L(!!t.note),r=be({title:t.note?.title??"",content:t.note?.content??"",isPrivate:t.note?.isPrivate??!0});te(()=>t.note,y=>{y?(r.title=y.title??"",r.content=y.content??"",r.isPrivate=y.isPrivate??!0,s.value=!0):(r.title="",r.content="",r.isPrivate=!0,s.value=!1)});const c=L(!1),f=L(""),k=he();function B(){d.value=!1,l("close")}async function b(){f.value="",c.value=!0;try{let y=null;s.value&&t.note?y=await $fetch(`/api/bible/notes/${t.note.id}`,{method:"PUT",body:{title:r.title,content:r.content,isPrivate:r.isPrivate}}):y=await $fetch("/api/bible/notes",{method:"POST",body:{verseId:t.verseId,title:r.title,content:r.content,isPrivate:r.isPrivate}}),y.success?(k.add({title:s.value?"Note modifiée":"Note ajoutée",description:y.message,color:"primary"}),s.value?l("updated",y.note):l("created",y.note),B()):f.value=y.message||"Erreur inconnue"}catch(y){f.value=y?.statusMessage||"Erreur lors de l’enregistrement de la note"}finally{c.value=!1}}return(y,m)=>{const v=F,S=ye,i=pe,w=Za,u=Ya,$=Y,_=Se,g=Ce;return n(),h(g,{state:r,onSubmit:ge(b,["prevent"])},{default:o(()=>[p(_,{open:d.value,"onUpdate:open":m[3]||(m[3]=z=>d.value=z),overlay:!0,ui:{content:"max-w-lg"}},{header:o(()=>[q("div",et,[p(v,{name:"i-lucide-pencil",class:"text-primary-600"}),q("span",at,P(s.value?"Modifier la note":"Ajouter une note"),1)])]),body:o(()=>[p(i,{label:"Titre (optionnel)",name:"title"},{default:o(()=>[p(S,{modelValue:r.title,"onUpdate:modelValue":m[0]||(m[0]=z=>r.title=z),placeholder:"Titre de la note...",class:"w-full"},null,8,["modelValue"])]),_:1}),p(i,{label:"Contenu",name:"content",class:"mt-4",required:""},{default:o(()=>[p(w,{modelValue:r.content,"onUpdate:modelValue":m[1]||(m[1]=z=>r.content=z),placeholder:"Votre note...",class:"w-full",rows:5},null,8,["modelValue"])]),_:1}),p(i,{label:"Note privée",name:"isPrivate",class:"mt-4"},{default:o(()=>[p(u,{modelValue:r.isPrivate,"onUpdate:modelValue":m[2]||(m[2]=z=>r.isPrivate=z),label:"Visible uniquement par moi"},null,8,["modelValue"])]),_:1}),f.value?(n(),O("div",tt,P(f.value),1)):C("",!0)]),footer:o(()=>[q("div",lt,[p($,{color:"secondary",variant:"ghost",onClick:B},{default:o(()=>[...m[4]||(m[4]=[N(" Annuler ",-1)])]),_:1}),p($,{type:"submit",color:"primary",loading:c.value},{default:o(()=>[N(P(s.value?"Enregistrer":"Ajouter"),1)]),_:1},8,["loading"])])]),_:1},8,["open"])]),_:1},8,["state"])}}}),it=Object.assign(st,{__name:"BibleNoteFormModal"}),nt={class:"space-y-6"},ot={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},rt={class:"flex flex-1 items-center gap-2"},ut={class:"space-x-1"},dt={class:"flex justify-center gap-2"},ct=D({__name:"BibleReader",props:{book:{},chapter:{},versesData:{},versions:{},selectedVersion:{}},emits:["update:chapter"],setup(a,{emit:x}){const t=a,l=v=>{s.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},c.value=!0},d=v=>{s.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},f.value=!0},s=L(null),r=v=>{s.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},k.value=!0},c=L(!1),f=L(!1),k=L(!1),B=x,b=j(()=>Array.from({length:t.versesData?.navigation.totalChapters||0},(v,S)=>S+1)),y=j(()=>t.versesData?.verses||[]),m=v=>{B("update:chapter",v)};return(v,S)=>{const i=$e,w=Ua,u=Y,$=Be,_=Qa,g=it;return n(),O("div",nt,[p($,{class:"mb-4"},{header:o(()=>[q("div",ot,[q("div",rt,[S[4]||(S[4]=q("p",null,"Chapitre",-1)),p(i,{items:b.value,"model-value":v.chapter,placeholder:"Chapitre",class:"w-32","onUpdate:modelValue":m},null,8,["items","model-value"])])])]),footer:o(()=>[q("div",dt,[v.versesData?.navigation.previousChapter?(n(),h(u,{key:0,icon:"i-lucide-arrow-left",color:"primary",variant:"soft",onClick:S[0]||(S[0]=z=>m(v.versesData.navigation.previousChapter))},{default:o(()=>[...S[5]||(S[5]=[N(" Précédent ",-1)])]),_:1})):C("",!0),v.versesData?.navigation.nextChapter?(n(),h(u,{key:1,"trailing-icon":"i-lucide-arrow-right",color:"primary",variant:"soft",onClick:S[1]||(S[1]=z=>m(v.versesData.navigation.nextChapter))},{default:o(()=>[...S[6]||(S[6]=[N(" Suivant ",-1)])]),_:1})):C("",!0)])]),default:o(()=>[q("div",ut,[(n(!0),O(R,null,G(y.value,z=>(n(),h(w,{key:z.id,verse:z,onShowCompare:l,onOpenBookmarkForm:d,onAddNote:r},null,8,["verse"]))),128))])]),_:1}),e(s)?(n(),h(_,M({key:0,modelValue:e(c),"onUpdate:modelValue":S[2]||(S[2]=z=>me(c)?c.value=z:null)},e(s),{"available-versions":v.versions}),null,16,["modelValue","available-versions"])):C("",!0),e(s)?(n(),h(g,{key:1,modelValue:e(k),"onUpdate:modelValue":S[3]||(S[3]=z=>me(k)?k.value=z:null),verse:e(s)},null,8,["modelValue","verse"])):C("",!0)])}}}),mt=Object.assign(ct,{__name:"BibleReader"}),qt=D({__name:"index",setup(a){const x=ra(),t=ua(),l=L(!1),d=L(null),s=L("GEN"),r=L(1),c=L(null),f=L([]),k=L("LSG"),B=()=>{s.value=t.query.book||"GEN",k.value=t.query.version||"LSG",r.value=parseInt(t.query.chapter||"1")},b=L([]),y=j(()=>{const g=b.value.filter(I=>I.testament==="OLD"),z=b.value.filter(I=>I.testament==="NEW");return[{label:"Ancien Testament",open:g.some(I=>I.code===s.value),active:g.some(I=>I.code===s.value),ui:{link:"cursor-pointer"},children:g.map(I=>({label:I.name,onSelect:async()=>await i(I.code),active:s.value===I.code,ui:{link:"cursor-pointer"}}))},{label:"Nouveau Testament",open:z.some(I=>I.code===s.value),active:z.some(I=>I.code===s.value),ui:{link:"cursor-pointer"},children:z.map(I=>({label:I.name,onSelect:async()=>await i(I.code),active:s.value===I.code,ui:{link:"cursor-pointer"}}))}]}),m=j(()=>f.value.map(g=>({label:g.name,to:x.resolve({query:{...t.query,version:g.code}}).href,active:k.value===g.code}))),v=j(()=>b.value.find(g=>g.code==s.value)),S=j(()=>f.value.find(g=>g.code==k.value)),i=async g=>{await x.push({query:{...t.query,book:g,chapter:1}})},w=async g=>{await x.push({query:{...t.query,chapter:g}})};da({title:"Lire la Bible en ligne - Théologie Pour Tous",ogTitle:"Lire la Bible en ligne - Théologie Pour Tous",description:"Lisez la Bible en ligne avec différentes versions disponibles. Parcourez les livres et chapitres de la Bible facilement.",ogDescription:"Lisez la Bible en ligne avec différentes versions disponibles. Parcourez les livres et chapitres de la Bible facilement."}),Ve(async()=>{B(),await Promise.all([u(),$(),_()])});const u=async()=>{try{l.value=!0;const g=await $fetch("/api/bible/books");b.value=g.data?.all}catch(g){d.value="Erreur lors du chargement des livres",console.error(g)}finally{l.value=!1}},$=async()=>{try{const g=await $fetch("/api/bible/versions");f.value=g.data||g}catch(g){d.value="Erreur lors du chargement des versions",console.error(g)}},_=async()=>{try{const g=await $fetch(`/api/bible/verses/${s.value}/${r.value}`,{query:{version:k.value}});c.value=g.data}catch(g){d.value="Erreur lors du chargement des versets",console.error(g)}};return te(()=>t.query,async()=>{B(),await _()},{deep:!0}),xa(),(g,z)=>{const I=ma,A=pa,J=fa,le=mt,se=ga,ie=va,ne=ca;return e(b).length&&e(f).length?(n(),h(ne,{key:0},fe({left:o(()=>[p(A,null,{top:o(()=>[...z[0]||(z[0]=[N(" Les livres ",-1)])]),default:o(()=>[p(I,{items:e(y),highlight:"",orientation:"vertical"},null,8,["items"])]),_:1})]),default:o(()=>[e(v)&&e(r)?(n(),h(J,{key:0,title:`${e(v).name} ${e(r)}`,description:e(S)?e(S).name:"Aucune version sélectionnée"},null,8,["title","description"])):C("",!0),p(ie,null,{default:o(()=>[q("div",null,[e(v)&&e(r)&&e(S)&&e(c)?(n(),h(le,{key:0,book:e(v),chapter:e(r),"verses-data":e(c),versions:e(f),"selected-version":e(S),"onUpdate:chapter":w},null,8,["book","chapter","verses-data","versions","selected-version"])):C("",!0)]),p(se)]),_:1})]),_:2},[e(f).length?{name:"right",fn:o(()=>[p(A,null,{top:o(()=>[...z[1]||(z[1]=[N(" Versions disponibles ",-1)])]),default:o(()=>[p(I,{items:e(m),variant:"link",orientation:"vertical"},null,8,["items"])]),_:1})]),key:"0"}:void 0]),1024)):C("",!0)}}});export{qt as default};
