const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C4U15E2o.js","./CBAjUQoD.js","./entry.CBGVsmcs.css","./-PedyWqa.js"])))=>i.map(i=>d[i]);
import{bN as R,bO as D,b as k}from"#entry";import{t as x,b as B}from"./-PedyWqa.js";const b=(t,s)=>{const e=t._conditions;return e.length>0?`(${e.join(` ${s} `)})`:""},$=t=>{const s=[],e={_conditions:s,where(r,i,n){let o;switch(i.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(n)){const c=n.map(u=>g(u)).join(", ");o=`"${String(r)}" ${i.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${i} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(n)&&n.length===2)o=`"${String(r)}" ${i.toUpperCase()} ${g(n[0])} AND ${g(n[1])}`;else throw new Error(`Value for ${i} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":o=`"${String(r)}" ${i.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":o=`"${String(r)}" ${i.toUpperCase()} ${g(n)}`;break;default:o=`"${String(r)}" ${i} ${g(typeof n=="boolean"?Number(n):n)}`}return s.push(`${o}`),e},andWhere(r){const i=r($());return s.push(b(i,"AND")),e},orWhere(r){const i=r($());return s.push(b(i,"OR")),e}};return e},P=(t,s)=>{const e={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},r={__params:e,andWhere(n){const o=n($());return e.conditions.push(b(o,"AND")),r},orWhere(n){const o=n($());return e.conditions.push(b(o,"OR")),r},path(n){return r.where("path","=",R(n))},skip(n){return e.offset=n,r},where(n,o,c){return r.andWhere(u=>u.where(String(n),o,c)),r},limit(n){return e.limit=n,r},select(...n){return n.length&&e.selectedFields.push(...n),r},order(n,o){return e.orderBy.push(`"${String(n)}" ${o}`),r},async all(){return s(t,i()).then(n=>n||[])},async first(){return s(t,i({limit:1})).then(n=>n[0]||null)},async count(n="*",o=!1){return s(t,i({count:{field:String(n),distinct:o}})).then(c=>c[0].count)}};function i(n={}){let o="SELECT ";if(n?.count)o+=`COUNT(${n.count.distinct?"DISTINCT ":""}${n.count.field}) as count`;else{const u=Array.from(new Set(e.selectedFields));o+=u.length>0?u.map(a=>`"${String(a)}"`).join(", "):"*"}o+=` FROM ${x[String(t)]}`,e.conditions.length>0&&(o+=` WHERE ${e.conditions.join(" AND ")}`),e.orderBy.length>0?o+=` ORDER BY ${e.orderBy.join(", ")}`:o+=" ORDER BY stem ASC";const c=n?.limit||e.limit;return c>0&&(e.offset>0?o+=` LIMIT ${c} OFFSET ${e.offset}`:o+=` LIMIT ${c}`),o}return r};function g(t){return`'${String(t).replace(/'/g,"''")}'`}const F=/\d/,q=["-","_","/","."];function M(t=""){if(!F.test(t))return t!==t.toLowerCase()}function L(t,s){const e=q,r=[];if(!t||typeof t!="string")return r;let i="",n,o;for(const c of t){const u=e.includes(c);if(u===!0){r.push(i),i="",n=void 0;continue}const a=M(c);if(o===!1){if(n===!1&&a===!0){r.push(i),i=c,n=a;continue}if(n===!0&&a===!1&&i.length>1){const f=i.at(-1);r.push(i.slice(0,Math.max(0,i.length-1))),i=f+c,n=a;continue}}i+=c,n=a,o=u}return r.push(i),r}function Q(t){return t?t[0].toUpperCase()+t.slice(1):""}function V(t,s){return t?(Array.isArray(t)?t:L(t)).map(e=>Q(s?.normalize?e.toLowerCase():e)).join(""):""}function Z(t,s){return t?(Array.isArray(t)?t:L(t)).map(e=>e.toLowerCase()).join("-"):""}function T(t){return s=>(s=s||{},(t||[]).filter(e=>typeof s[e]<"u").reduce((e,r)=>Object.assign(e,{[r]:s[r]}),{}))}async function _(t,s=[]){t.__params?.orderBy?.length||(t=t.order("stem","ASC"));const r=await t.orWhere(a=>a.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...s||[]).all(),{contents:i,configs:n}=r.reduce((a,f)=>{if(String(f.stem).split("/").pop()===".navigation"){f.title=f.title?.toLowerCase()==="navigation"?"":f.title;const p=f.path.split("/").slice(0,-1).join("/")||"/";a.configs[p]={...f,...f.body}}else a.contents.push(f);return a},{configs:{},contents:[]}),o=a=>({...T(["title",...s])(a),...a.meta,...O(a?.navigation)?a.navigation:{}}),c=a=>({...T(["title",...s])(a),...O(a?.navigation)?a.navigation:{}}),u=i.reduce((a,f)=>{const p=f.path.substring(1).split("/"),C=f.stem.split("/"),I=!!C[C.length-1]?.match(/([1-9]\d*\.)?index/g),A=l=>({title:l.title,path:l.path,stem:l.stem,children:[],...c(l)}),h=A(f);if(I){const l=n[h.path];if(typeof l?.navigation<"u"&&l?.navigation===!1)return a;if(f.path!=="/"){const d=A(f);h.children.push(d)}l&&Object.assign(h,o(l))}if(p.length===1){const l=a.find(d=>d.path===h.path&&d.page===!1);return I&&l?Object.assign(l,{page:void 0,children:[...h.children||[],...l.children||[]]}):a.push(h),a}const v=p.slice(0,-1).reduce((l,d,E)=>{const N="/"+p.slice(0,E+1).join("/"),m=n[N];if(typeof m?.navigation<"u"&&m.navigation===!1)return[];let y=l.find(S=>S.path===N);if(!y){const S=m?o(m):{};y={...S,title:S.title||G(d),path:N,stem:C.slice(0,E+1).join("/"),children:[],page:!1},l.push(y)}return y.children},a),w=v.find(l=>l.path===h.path&&l.page===!1);return w?Object.assign(w,{...h,page:void 0,children:[...h.children||[],...w.children||[]]}):v.push(h),a},[]);return j(u)}function j(t){const s=t;for(const e of s)e.children?.length?j(e.children):delete e.children;return t}function O(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}const G=t=>t.split(/[\s-]/g).map(V).join(" ");async function H(t,s,e){const{before:r=1,after:i=1,fields:n=[]}=e||{},o=await _(t,n),c=U(o),u=c.findIndex(p=>p.path===s),a=u===-1?[]:c.slice(u-r,u),f=u===-1?[]:c.slice(u+1,u+i+1);return[...Array.from({length:r}).fill(null).concat(a).slice(a.length),...f.concat(Array.from({length:i}).fill(null)).slice(0,i)]}function U(t){return t.flatMap(e=>{const r=e.children?U(e.children):[];return e.page===!1||r.length&&r.find(i=>i.path===e.path)?r:[{...e,children:void 0},...r]})}const K=t=>{const s=D()?.ssrContext?.event;return P(t,(e,r)=>Y(s,e,r))};function ee(t,s){return W(t,e=>_(e,s))}function te(t,s,e){return W(t,r=>H(r,s,e))}async function Y(t,s,e){return window.WebAssembly?z(s,e):B(t,String(s),e)}async function z(t,s){return await k(()=>import("./C4U15E2o.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(r=>r.loadDatabaseAdapter(t)).then(r=>r.all(s))}function W(t,s){const e=K(t),r={where(i,n,o){return e.where(String(i),n,o),r},andWhere(i){return e.andWhere(i),r},orWhere(i){return e.orWhere(i),r},order(i,n){return e.order(String(i),n),r},then(i,n){return s(e).then(i,n)},catch(i){return this.then(void 0,i)},finally(i){return this.then(void 0,void 0).finally(i)},get[Symbol.toStringTag](){return"Promise"}};return r}export{te as a,ee as b,Z as k,V as p,K as q};
