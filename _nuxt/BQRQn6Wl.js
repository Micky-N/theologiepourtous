import{B as Q,aa as Ae,ad as Me,ab as he,V as N,a9 as Fe,z as h,e as u,w as o,X as A,f as B,G as e,E as j,af as je,aw as fe,a1 as se,ax as Z,ay as le,an as ye,r as T,a6 as xe,g,L as ie,M as R,aq as ve,as as ke,h as S,a4 as Ne,Z as E,$ as ne,ao as Re,y as oe,az as Ee,aA as we,aj as Ie,aB as Ke,ar as Se,at as De,aC as Ge,d as P,n as q,N as qe,aD as ee,t as M,F as J,H as W,aE as He,aF as D,aG as Je,Q as be,a7 as Qe,aH as We,aI as Ze,aJ as me,aK as ge,ak as ze,a0 as X,aL as Xe,aM as Ye,a5 as Ve,aN as ea,I as pe,W as re,a8 as aa,aO as $e,aP as ta,al as Ce,aQ as sa,o as Be,am as la,ag as ia,aR as na,aS as oa,aT as ra,a as ua,v as da,D as ca,aU as ma,P as ga,aV as pa,R as fa}from"#entry";import{_ as va}from"./DTIFCxQf.js";import{_ as ba,a as ha}from"./BiYaFSpO.js";import{u as ya,V as xa,_ as _e}from"./Cfwp0u7e.js";import{_ as Te}from"./sIOFFvLP.js";import{_ as Le}from"./Cx4LSkzV.js";import{_ as ka}from"./B_d_Weqg.js";import{d as wa}from"./D8rO69WY.js";import"./C-zcIKpn.js";import"./BlbQEa5j.js";const[Ia,Sa]=Fe("SwitchRoot");var qa=Q({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(a,{emit:y}){const t=a,s=y,{disabled:c}=Ae(t),d=Me(t,"modelValue",s,{defaultValue:t.defaultValue,passive:t.modelValue===void 0});function l(){c.value||(d.value=!d.value)}const{forwardRef:i,currentElement:p}=he(),w=ya(p),$=N(()=>t.id&&p.value?document.querySelector(`[for="${t.id}"]`)?.innerText:void 0);return Sa({modelValue:d,toggleCheck:l,disabled:c}),(x,f)=>(u(),h(e(se),j(x.$attrs,{id:x.id,ref:e(i),role:"switch",type:x.as==="button"?"button":void 0,value:x.value,"aria-label":x.$attrs["aria-label"]||$.value,"aria-checked":e(d),"aria-required":x.required,"data-state":e(d)?"checked":"unchecked","data-disabled":e(c)?"":void 0,"as-child":x.asChild,as:x.as,disabled:e(c),onClick:l,onKeydown:je(fe(l,["prevent"]),["enter"])}),{default:o(()=>[A(x.$slots,"default",{modelValue:e(d)}),e(w)&&x.name?(u(),h(e(xa),{key:0,type:"checkbox",name:x.name,disabled:e(c),required:x.required,value:x.value,checked:!!e(d)},null,8,["name","disabled","required","value","checked"])):B("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),za=qa,Va=Q({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const y=Ia();return he(),(t,s)=>(u(),h(e(se),{"data-state":e(y).modelValue?.value?"checked":"unchecked","data-disabled":e(y).disabled.value?"":void 0,"as-child":t.asChild,as:t.as},{default:o(()=>[A(t.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),$a=Va;const Ca={class:"flex items-center gap-2"},Ba={class:"mt-2 flex items-center gap-1"},_a=Q({__name:"BookmarkFormPopover",props:Z({verseId:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Z(["closeForm","created"],["update:modelValue"]),setup(a,{emit:y}){const t=a,s=y,c=le(a,"modelValue"),d=ye({title:"",color:"blue"}),l=[{label:"Rouge",value:"red"},{label:"Rose",value:"pink"},{label:"Fuchsia",value:"fuchsia"},{label:"Violet",value:"purple"},{label:"Violet clair",value:"violet"},{label:"Indigo",value:"indigo"},{label:"Bleu",value:"blue"},{label:"Ciel",value:"sky"},{label:"Cyan",value:"cyan"},{label:"Teal",value:"teal"},{label:"Émeraude",value:"emerald"},{label:"Vert",value:"green"},{label:"Lime",value:"lime"},{label:"Jaune",value:"yellow"},{label:"Ambre",value:"amber"},{label:"Orange",value:"orange"},{label:"Brun",value:"brown"},{label:"Gris",value:"gray"},{label:"Gris neutre",value:"neutral"},{label:"Ardoise",value:"slate"},{label:"Pierre",value:"stone"},{label:"Zinc",value:"zinc"},{label:"Noir",value:"black"}],i=T(!1),p=T(""),w=xe();function $(){c.value=!1,s("closeForm")}async function x(){p.value="",i.value=!0;try{const f=await $fetch("/api/bible/bookmarks",{method:"POST",body:{verseId:t.verseId,title:d.title,color:d.color}});f.success?(w.add({title:"Favori ajouté",description:f.message,color:"primary"}),s("created",f.data),$()):p.value=f.message||"Erreur inconnue"}catch(f){p.value=f?.statusMessage||"Erreur lors de l’ajout du favori"}finally{i.value=!1}}return(f,m)=>{const v=E,z=ke,n=ve,k=_e,r=ie,V=Te,L=Le;return u(),h(L,{state:e(d),onSubmit:fe(x,["prevent"])},{default:o(()=>[g(V,{ui:{header:"p-2 sm:px-4",footer:"p-2 sm:px-4"}},{header:o(()=>[S("div",Ca,[g(v,{name:"i-lucide-bookmark",class:"text-primary-600"}),m[2]||(m[2]=S("span",{class:"font-semibold text-sm"},"Ajouter aux favoris",-1))])]),default:o(()=>[g(n,{label:"Titre (optionnel)",name:"title",class:"mb-4"},{default:o(()=>[g(z,{modelValue:e(d).title,"onUpdate:modelValue":m[0]||(m[0]=O=>e(d).title=O),placeholder:"Titre personnalisé...",class:"w-full"},null,8,["modelValue"])]),_:1}),g(n,{label:"Couleur du favori",name:"color"},{default:o(()=>[g(k,{modelValue:e(d).color,"onUpdate:modelValue":m[1]||(m[1]=O=>e(d).color=O),items:l,"label-key":"label","value-key":"value",class:"flex gap-2 w-full"},null,8,["modelValue"]),S("div",Ba,[m[3]||(m[3]=R(" Aperçu : ",-1)),S("span",{style:Ne([`background-color: var(--color-${e(d).color}-400)`,`border: solid 1px var(--color-${e(d).color}-700)`]),class:"inline-block size-4 rounded-full border"},null,4)])]),_:1})]),footer:o(()=>[g(r,{type:"submit",color:"primary",loading:e(i),class:"w-full flex justify-center"},{default:o(()=>[...m[4]||(m[4]=[R(" Ajouter ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["state"])}}}),Ta=Object.assign(_a,{__name:"BookmarkFormPopover"}),Oe={__name:"UContextMenuContent",props:{items:{type:null,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0},sub:{type:Boolean,required:!1},labelKey:{type:null,required:!0},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1},class:{type:null,required:!1},ui:{type:null,required:!0},uiOverride:{type:null,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(a,{emit:y}){const t=a,s=y,c=ne(),{dir:d}=Re(),l=oe(),i=Ee(we(()=>t.portal)),p=Ie(Ke(t,"sub","items","portal","labelKey","checkedIcon","loadingIcon","externalIcon","class","ui","uiOverride"),s),w=Se(c,["default"]),[$,x]=De(),f=N(()=>d.value==="rtl"?l.ui.icons.chevronLeft:l.ui.icons.chevronRight),m=N(()=>t.items?.length?Ge(t.items)?t.items:[t.items]:[]);return(v,z)=>(u(),P(J,null,[g(e($),null,{default:o(({item:n,active:k,index:r})=>[A(v.$slots,n.slot||"item",{item:n,index:r},()=>[A(v.$slots,n.slot?`${n.slot}-leading`:"item-leading",{item:n,active:k,index:r},()=>[n.loading?(u(),h(E,{key:0,name:a.loadingIcon||e(l).ui.icons.loading,class:q(a.ui.itemLeadingIcon({class:[a.uiOverride?.itemLeadingIcon,n.ui?.itemLeadingIcon],color:n?.color,loading:!0}))},null,8,["name","class"])):n.icon?(u(),h(E,{key:1,name:n.icon,class:q(a.ui.itemLeadingIcon({class:[a.uiOverride?.itemLeadingIcon,n.ui?.itemLeadingIcon],color:n?.color,active:k}))},null,8,["name","class"])):n.avatar?(u(),h(qe,j({key:2,size:n.ui?.itemLeadingAvatarSize||a.uiOverride?.itemLeadingAvatarSize||a.ui.itemLeadingAvatarSize()},n.avatar,{class:a.ui.itemLeadingAvatar({class:[a.uiOverride?.itemLeadingAvatar,n.ui?.itemLeadingAvatar],active:k})}),null,16,["size","class"])):B("",!0)]),e(ee)(n,t.labelKey)||c[n.slot?`${n.slot}-label`:"item-label"]?(u(),P("span",{key:0,class:q(a.ui.itemLabel({class:[a.uiOverride?.itemLabel,n.ui?.itemLabel],active:k}))},[A(v.$slots,n.slot?`${n.slot}-label`:"item-label",{item:n,active:k,index:r},()=>[R(M(e(ee)(n,t.labelKey)),1)]),n.target==="_blank"&&a.externalIcon!==!1?(u(),h(E,{key:0,name:typeof a.externalIcon=="string"?a.externalIcon:e(l).ui.icons.external,class:q(a.ui.itemLabelExternalIcon({class:[a.uiOverride?.itemLabelExternalIcon,n.ui?.itemLabelExternalIcon],color:n?.color,active:k}))},null,8,["name","class"])):B("",!0)],2)):B("",!0),S("span",{class:q(a.ui.itemTrailing({class:[a.uiOverride?.itemTrailing,n.ui?.itemTrailing]}))},[A(v.$slots,n.slot?`${n.slot}-trailing`:"item-trailing",{item:n,active:k,index:r},()=>[n.children?.length?(u(),h(E,{key:0,name:f.value,class:q(a.ui.itemTrailingIcon({class:[a.uiOverride?.itemTrailingIcon,n.ui?.itemTrailingIcon],color:n?.color,active:k}))},null,8,["name","class"])):n.kbds?.length?(u(),P("span",{key:1,class:q(a.ui.itemTrailingKbds({class:[a.uiOverride?.itemTrailingKbds,n.ui?.itemTrailingKbds]}))},[(u(!0),P(J,null,W(n.kbds,(V,L)=>(u(),h(He,j({key:L,size:n.ui?.itemTrailingKbdsSize||a.uiOverride?.itemTrailingKbdsSize||a.ui.itemTrailingKbdsSize()},{ref_for:!0},typeof V=="string"?{value:V}:V),null,16,["size"]))),128))],2)):B("",!0)]),g(e(D).ItemIndicator,{"as-child":""},{default:o(()=>[g(E,{name:a.checkedIcon||e(l).ui.icons.check,class:q(a.ui.itemTrailingIcon({class:[a.uiOverride?.itemTrailingIcon,n.ui?.itemTrailingIcon],color:n?.color}))},null,8,["name","class"])]),_:2},1024)],2)])]),_:3}),g(e(D).Portal,me(ge(e(i))),{default:o(()=>[(u(),h(Je(a.sub?e(D).SubContent:e(D).Content),j({class:t.class},e(p)),{default:o(()=>[A(v.$slots,"content-top"),S("div",{role:"presentation",class:q(a.ui.viewport({class:a.uiOverride?.viewport}))},[(u(!0),P(J,null,W(m.value,(n,k)=>(u(),h(e(D).Group,{key:`group-${k}`,class:q(a.ui.group({class:a.uiOverride?.group}))},{default:o(()=>[(u(!0),P(J,null,W(n,(r,V)=>(u(),P(J,{key:`group-${k}-${V}`},[r.type==="label"?(u(),h(e(D).Label,{key:0,class:q(a.ui.label({class:[a.uiOverride?.label,r.ui?.label,r.class]}))},{default:o(()=>[g(e(x),{item:r,index:V},null,8,["item","index"])]),_:2},1032,["class"])):r.type==="separator"?(u(),h(e(D).Separator,{key:1,class:q(a.ui.separator({class:[a.uiOverride?.separator,r.ui?.separator,r.class]}))},null,8,["class"])):r?.children?.length?(u(),h(e(D).Sub,{key:2,open:r.open,"default-open":r.defaultOpen},{default:o(()=>[g(e(D).SubTrigger,{as:"button",type:"button",disabled:r.disabled,"text-value":e(ee)(r,t.labelKey),class:q(a.ui.item({class:[a.uiOverride?.item,r.ui?.item,r.class],color:r?.color}))},{default:o(()=>[g(e(x),{item:r,index:V},null,8,["item","index"])]),_:2},1032,["disabled","text-value","class"]),g(Oe,j({sub:"",class:t.class,ui:a.ui,"ui-override":a.uiOverride,portal:a.portal,items:r.children,"align-offset":-4,"label-key":a.labelKey,"checked-icon":a.checkedIcon,"loading-icon":a.loadingIcon,"external-icon":a.externalIcon},{ref_for:!0},r.content),be({_:2},[W(e(w),(L,O)=>({name:O,fn:o(_=>[A(v.$slots,O,j({ref_for:!0},_))])}))]),1040,["class","ui","ui-override","portal","items","label-key","checked-icon","loading-icon","external-icon"])]),_:2},1032,["open","default-open"])):r.type==="checkbox"?(u(),h(e(D).CheckboxItem,{key:3,"model-value":r.checked,disabled:r.disabled,"text-value":e(ee)(r,t.labelKey),class:q(a.ui.item({class:[a.uiOverride?.item,r.ui?.item,r.class],color:r?.color})),"onUpdate:modelValue":r.onUpdateChecked,onSelect:r.onSelect},{default:o(()=>[g(e(x),{item:r,index:V},null,8,["item","index"])]),_:2},1032,["model-value","disabled","text-value","class","onUpdate:modelValue","onSelect"])):(u(),h(e(D).Item,{key:4,"as-child":"",disabled:r.disabled,"text-value":e(ee)(r,t.labelKey),onSelect:r.onSelect},{default:o(()=>[g(Qe,j({ref_for:!0},e(We)(r),{custom:""}),{default:o(({active:L,...O})=>[g(Ze,j({ref_for:!0},O,{class:a.ui.item({class:[a.uiOverride?.item,r.ui?.item,r.class],active:L,color:r?.color})}),{default:o(()=>[g(e(x),{item:r,active:L,index:V},null,8,["item","active","index"])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["disabled","text-value","onSelect"]))],64))),128))]),_:2},1032,["class"]))),128))],2),A(v.$slots,"default"),A(v.$slots,"content-bottom")]),_:3},16,["class"]))]),_:3},16)],64))}},La={slots:{content:"min-w-32 bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-context-menu-content-transform-origin) flex flex-col",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",group:"p-1 isolate",label:"w-full flex items-center font-semibold text-highlighted",separator:"-mx-1 my-1 h-px bg-border",item:"group relative w-full flex items-center select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0",itemTrailingKbdsSize:"",itemLabel:"truncate",itemLabelExternalIcon:"inline-block size-3 align-top text-dimmed"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:text-highlighted data-[state=open]:text-highlighted data-highlighted:before:bg-elevated/50 data-[state=open]:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:text-default group-data-[state=open]:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}},size:{xs:{label:"p-1 text-xs gap-1",item:"p-1 text-xs gap-1",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},sm:{label:"p-1.5 text-xs gap-1.5",item:"p-1.5 text-xs gap-1.5",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemTrailingIcon:"size-4",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"sm"},md:{label:"p-1.5 text-sm gap-1.5",item:"p-1.5 text-sm gap-1.5",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-0.5",itemTrailingKbdsSize:"md"},lg:{label:"p-2 text-sm gap-2",item:"p-2 text-sm gap-2",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemTrailingIcon:"size-5",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"md"},xl:{label:"p-2 text-base gap-2",item:"p-2 text-base gap-2",itemLeadingIcon:"size-6",itemLeadingAvatarSize:"xs",itemTrailingIcon:"size-6",itemTrailingKbds:"gap-1",itemTrailingKbdsSize:"lg"}}},compoundVariants:[{color:"primary",active:!1,class:{item:"text-primary data-highlighted:text-primary data-highlighted:before:bg-primary/10 data-[state=open]:before:bg-primary/10",itemLeadingIcon:"text-primary/75 group-data-highlighted:text-primary group-data-[state=open]:text-primary"}},{color:"secondary",active:!1,class:{item:"text-secondary data-highlighted:text-secondary data-highlighted:before:bg-secondary/10 data-[state=open]:before:bg-secondary/10",itemLeadingIcon:"text-secondary/75 group-data-highlighted:text-secondary group-data-[state=open]:text-secondary"}},{color:"success",active:!1,class:{item:"text-success data-highlighted:text-success data-highlighted:before:bg-success/10 data-[state=open]:before:bg-success/10",itemLeadingIcon:"text-success/75 group-data-highlighted:text-success group-data-[state=open]:text-success"}},{color:"info",active:!1,class:{item:"text-info data-highlighted:text-info data-highlighted:before:bg-info/10 data-[state=open]:before:bg-info/10",itemLeadingIcon:"text-info/75 group-data-highlighted:text-info group-data-[state=open]:text-info"}},{color:"warning",active:!1,class:{item:"text-warning data-highlighted:text-warning data-highlighted:before:bg-warning/10 data-[state=open]:before:bg-warning/10",itemLeadingIcon:"text-warning/75 group-data-highlighted:text-warning group-data-[state=open]:text-warning"}},{color:"error",active:!1,class:{item:"text-error data-highlighted:text-error data-highlighted:before:bg-error/10 data-[state=open]:before:bg-error/10",itemLeadingIcon:"text-error/75 group-data-highlighted:text-error group-data-[state=open]:text-error"}},{color:"primary",active:!0,class:{item:"text-primary before:bg-primary/10",itemLeadingIcon:"text-primary"}},{color:"secondary",active:!0,class:{item:"text-secondary before:bg-secondary/10",itemLeadingIcon:"text-secondary"}},{color:"success",active:!0,class:{item:"text-success before:bg-success/10",itemLeadingIcon:"text-success"}},{color:"info",active:!0,class:{item:"text-info before:bg-info/10",itemLeadingIcon:"text-info"}},{color:"warning",active:!0,class:{item:"text-warning before:bg-warning/10",itemLeadingIcon:"text-warning"}},{color:"error",active:!0,class:{item:"text-error before:bg-error/10",itemLeadingIcon:"text-error"}}],defaultVariants:{size:"md"}},Oa={__name:"UContextMenu",props:{size:{type:null,required:!1},items:{type:null,required:!1},checkedIcon:{type:[String,Object],required:!1},loadingIcon:{type:[String,Object],required:!1},externalIcon:{type:[Boolean,String,Object],required:!1,default:!0},content:{type:Object,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},labelKey:{type:null,required:!1,default:"label"},disabled:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},pressOpenDelay:{type:Number,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(a,{emit:y}){const t=a,s=y,c=ne(),d=oe(),l=Ie(ze(t,"modal"),s),i=we(()=>t.content),p=Se(c,["default"]),w=N(()=>X({extend:X(La),...d.ui?.contextMenu||{}})({size:t.size}));return($,x)=>(u(),h(e(Ye),me(ge(e(l))),{default:o(()=>[c.default?(u(),h(e(Xe),{key:0,"as-child":"",disabled:a.disabled,class:q(t.class)},{default:o(()=>[A($.$slots,"default")]),_:3},8,["disabled","class"])):B("",!0),g(Oe,j({class:w.value.content({class:[!c.default&&t.class,t.ui?.content]}),ui:w.value,"ui-override":t.ui},i.value,{items:a.items,portal:a.portal,"label-key":a.labelKey,"checked-icon":a.checkedIcon,"loading-icon":a.loadingIcon,"external-icon":a.externalIcon}),be({_:2},[W(e(p),(f,m)=>({name:m,fn:o(v=>[A($.$slots,m,me(ge(v)))])}))]),1040,["class","ui","ui-override","items","portal","label-key","checked-icon","loading-icon","external-icon"])]),_:3},16))}},Ua={class:"inline-block align-top text-xs text-primary-600 dark:text-primary-400"},Pa=Q({__name:"BibleVerse",props:{verse:{}},emits:["showCompare","addNote"],setup(a,{emit:y}){const t=a,s=y,c=T(!1),{loggedIn:d}=Ve(),l=N(()=>{const i=[{label:"Comparer",icon:"i-lucide-eye",onSelect:()=>s("showCompare",t.verse.verse),ui:{item:"cursor-pointer"}}];return d.value&&(i.push({label:"Marquer",icon:"i-lucide-bookmark",onSelect:()=>c.value=!0,ui:{item:"cursor-pointer"}}),i.push({label:"Ajouter Note",icon:"i-lucide-notebook-pen",onSelect:()=>s("addNote",t.verse.verse),ui:{item:"cursor-pointer"}})),i});return(i,p)=>{const w=Ta,$=ea,x=Oa;return u(),h(x,{items:e(l)},{default:o(()=>[S("span",null,[S("span",Ua,M(i.verse.verse),1),g($,{open:e(c),"onUpdate:open":p[1]||(p[1]=f=>pe(c)?c.value=f:null),content:{sideOffset:0},arrow:""},{anchor:o(()=>[S("span",{class:q({underline:e(c)})},M(i.verse.text),3)]),content:o(()=>[g(w,{"verse-id":i.verse.id,onCloseForm:p[0]||(p[0]=f=>c.value=!1)},null,8,["verse-id"])]),_:1},8,["open"])])]),_:1},8,["items"])}}}),Aa=Object.assign(Pa,{__name:"BibleVerse"}),Ma={class:"p-6"},Fa={class:"space-y-4"},ja={class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},Na={class:"font-medium"},Ra={key:0},Ea={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-60 overflow-y-auto"},Ka=["onClick"],Da={class:"text-sm font-medium text-gray-900 dark:text-white"},Ga={class:"text-xs text-gray-500 dark:text-gray-400"},Ha={class:"mt-2 text-xs text-gray-500"},Ja={class:"flex justify-end gap-2 mt-6"},Qa=Q({__name:"BibleCompareModal",props:Z({availableVersions:{},book:{},chapter:{},version:{},verseStart:{},verseEnd:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const y=a,t=le(a,"modelValue"),s=T(!1),c=T([y.version]),d=i=>{const p=c.value.indexOf(i);p>-1?c.value.splice(p,1):c.value.length<6&&c.value.push(i)},l=async()=>{if(!(c.value.length<2))try{s.value=!0;const i=y.availableVersions.filter(w=>c.value.includes(w.id)).map(w=>w.code),p=new URLSearchParams({book:y.book.code,chapter:y.chapter.toString(),verses:y.verseStart.toString(),versions:i.join(",")});y.verseEnd&&y.verseEnd!==y.verseStart&&p.set("verses",y.verseStart.toString()+"-"+y.verseEnd.toString()),await aa(`/bible/compare?${p.toString()}`)}catch(i){console.error("Erreur lors de la comparaison:",i)}finally{s.value=!1,t.value=!1}};return re(()=>y.version,i=>{c.value=[i]}),(i,p)=>{const w=ka,$=ve,x=ie,f=$e;return u(),h(f,{open:t.value,"onUpdate:open":p[1]||(p[1]=m=>t.value=m),title:"Comparer ce passage",description:"Terme théologique",ui:{description:"hidden",content:"max-w-2xl"}},{content:o(()=>[S("div",Ma,[S("div",Fa,[S("div",null,[p[2]||(p[2]=S("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"}," Passage sélectionné : ",-1)),S("div",ja,[S("p",Na,[R(M(i.book.name)+" "+M(i.chapter)+":"+M(i.verseStart)+" ",1),i.verseEnd&&i.verseEnd!==i.verseStart?(u(),P("span",Ra," -"+M(i.verseEnd),1)):B("",!0)])])]),g($,{label:"Versions à comparer (sélectionnez 2 à 6 versions)"},{default:o(()=>[S("div",Ea,[(u(!0),P(J,null,W(i.availableVersions,m=>(u(),P("div",{key:m.id,class:"flex items-center space-x-2"},[g(w,{"model-value":e(c).includes(m.id),disabled:e(c).length>=6&&!e(c).includes(m.id),"onUpdate:modelValue":v=>d(m.id)},null,8,["model-value","disabled","onUpdate:modelValue"]),S("div",{class:"flex-1",onClick:v=>d(m.id)},[S("div",Da,M(m.name),1),S("div",Ga,M(m.code)+" • "+M(m.language),1)],8,Ka)]))),128))]),S("div",Ha,M(e(c).length)+" version(s) sélectionnée(s) (minimum 2, maximum 6) ",1)]),_:1})]),S("div",Ja,[g(x,{label:"Annuler",variant:"ghost",onClick:p[0]||(p[0]=m=>t.value=!1)}),g(x,{label:"Comparer",disabled:e(c).length<2,loading:e(s),onClick:l},null,8,["disabled","loading"])])])]),_:1},8,["open"])}}}),Wa=Object.assign(Qa,{__name:"BibleCompareModal"}),Za={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute start-0 flex items-start",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute end-0 flex items-start",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2 inset-y-1",trailing:"pe-2 inset-y-1",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"},autoresize:{true:{base:"resize-none"}}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Xa=["id","value","name","rows","placeholder","disabled","required"],Ya=Object.assign({inheritAttrs:!1},{__name:"UTextarea",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},autoresize:{type:Boolean,required:!1},autoresizeDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},rows:{type:Number,required:!1,default:3},maxrows:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:[String,Object],required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:[String,Object],required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:[String,Object],required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:[String,Object],required:!1}},emits:["update:modelValue","blur","change"],setup(a,{expose:y,emit:t}){const s=a,c=t,d=ne(),l=ta(s,"modelValue",c,{defaultValue:s.defaultValue}),i=oe(),{emitFormFocus:p,emitFormBlur:w,emitFormInput:$,emitFormChange:x,size:f,color:m,id:v,name:z,highlight:n,disabled:k,ariaAttrs:r}=Ce(s,{deferInputValidation:!0}),{isLeading:V,isTrailing:L,leadingIconName:O,trailingIconName:_}=sa(s),G=N(()=>X({extend:X(Za),...i.ui?.textarea||{}})({color:m.value,variant:s.variant,size:f?.value,loading:s.loading,highlight:n.value,autoresize:s.autoresize,leading:V.value||!!s.avatar||!!d.leading,trailing:L.value||!!d.trailing})),F=T(null);function ae(C){s.modelModifiers?.trim&&(C=C?.trim()??null),s.modelModifiers?.number&&(C=la(C)),s.modelModifiers?.nullable&&(C||=null),s.modelModifiers?.optional&&(C||=void 0),l.value=C,$()}function te(C){H(),s.modelModifiers?.lazy||ae(C.target.value)}function b(C){const K=C.target.value;s.modelModifiers?.lazy&&ae(K),s.modelModifiers?.trim&&(C.target.value=K.trim()),x(),c("change",C)}function U(C){w(),c("blur",C)}function I(){s.autofocus&&F.value?.focus()}function H(){if(s.autoresize&&F.value){F.value.rows=s.rows;const C=F.value.style.overflow;F.value.style.overflow="hidden";const K=window.getComputedStyle(F.value),Y=Number.parseInt(K.paddingTop),ue=Number.parseInt(K.paddingBottom),de=Y+ue,Ue=Number.parseInt(K.lineHeight),{scrollHeight:Pe}=F.value,ce=(Pe-de)/Ue;ce>s.rows&&(F.value.rows=s.maxrows?Math.min(ce,s.maxrows):ce),F.value.style.overflow=C}}return re(l,()=>{ia(H)}),Be(()=>{setTimeout(()=>{I()},s.autofocusDelay),setTimeout(()=>{H()},s.autoresizeDelay)}),y({textareaRef:F}),(C,K)=>(u(),h(e(se),{as:a.as,class:q(G.value.root({class:[s.ui?.root,s.class]}))},{default:o(()=>[S("textarea",j({id:e(v),ref_key:"textareaRef",ref:F,value:e(l),name:e(z),rows:a.rows,placeholder:a.placeholder,class:G.value.base({class:s.ui?.base}),disabled:e(k),required:a.required},{...C.$attrs,...e(r)},{onInput:te,onBlur:U,onChange:b,onFocus:K[0]||(K[0]=(...Y)=>e(p)&&e(p)(...Y))}),null,16,Xa),A(C.$slots,"default"),e(V)||a.avatar||d.leading?(u(),P("span",{key:0,class:q(G.value.leading({class:s.ui?.leading}))},[A(C.$slots,"leading",{},()=>[e(V)&&e(O)?(u(),h(E,{key:0,name:e(O),class:q(G.value.leadingIcon({class:s.ui?.leadingIcon}))},null,8,["name","class"])):a.avatar?(u(),h(qe,j({key:1,size:s.ui?.leadingAvatarSize||G.value.leadingAvatarSize()},a.avatar,{class:G.value.leadingAvatar({class:s.ui?.leadingAvatar})}),null,16,["size","class"])):B("",!0)])],2)):B("",!0),e(L)||d.trailing?(u(),P("span",{key:1,class:q(G.value.trailing({class:s.ui?.trailing}))},[A(C.$slots,"trailing",{},()=>[e(_)?(u(),h(E,{key:0,name:e(_),class:q(G.value.trailingIcon({class:s.ui?.trailingIcon}))},null,8,["name","class"])):B("",!0)])],2)):B("",!0)]),_:3},8,["as","class"]))}}),et={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{base:"cursor-not-allowed opacity-75",label:"cursor-not-allowed opacity-75",description:"cursor-not-allowed opacity-75"}}},defaultVariants:{color:"primary",size:"md"}},at=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:Z({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:[String,Object],required:!1},checkedIcon:{type:[String,Object],required:!1},uncheckedIcon:{type:[String,Object],required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:Z(["change"],["update:modelValue"]),setup(a,{emit:y}){const t=a,s=ne(),c=y,d=le(a,"modelValue",{type:Boolean,default:void 0}),l=oe(),i=na(ze(t,"required","value","defaultValue")),{id:p,emitFormChange:w,emitFormInput:$,size:x,color:f,name:m,disabled:v,ariaAttrs:z}=Ce(t),n=p.value??oa(),k=N(()=>X({extend:X(et),...l.ui?.switch||{}})({size:x.value,color:f.value,required:t.required,loading:t.loading,disabled:v.value||t.loading}));function r(V){const L=new Event("change",{target:{value:V}});c("change",L),w(),$()}return(V,L)=>(u(),h(e(se),{as:a.as,class:q(k.value.root({class:[t.ui?.root,t.class]}))},{default:o(()=>[S("div",{class:q(k.value.container({class:t.ui?.container}))},[g(e(za),j({id:e(n)},{...e(i),...V.$attrs,...e(z)},{modelValue:d.value,"onUpdate:modelValue":[L[0]||(L[0]=O=>d.value=O),r],name:e(m),disabled:e(v)||a.loading,class:k.value.base({class:t.ui?.base})}),{default:o(()=>[g(e($a),{class:q(k.value.thumb({class:t.ui?.thumb}))},{default:o(()=>[a.loading?(u(),h(E,{key:0,name:a.loadingIcon||e(l).ui.icons.loading,class:q(k.value.icon({class:t.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(u(),P(J,{key:1},[a.checkedIcon?(u(),h(E,{key:0,name:a.checkedIcon,class:q(k.value.icon({class:t.ui?.icon,checked:!0}))},null,8,["name","class"])):B("",!0),a.uncheckedIcon?(u(),h(E,{key:1,name:a.uncheckedIcon,class:q(k.value.icon({class:t.ui?.icon,unchecked:!0}))},null,8,["name","class"])):B("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),a.label||s.label||a.description||s.description?(u(),P("div",{key:0,class:q(k.value.wrapper({class:t.ui?.wrapper}))},[a.label||s.label?(u(),h(e(ra),{key:0,for:e(n),class:q(k.value.label({class:t.ui?.label}))},{default:o(()=>[A(V.$slots,"label",{label:a.label},()=>[R(M(a.label),1)])]),_:3},8,["for","class"])):B("",!0),a.description||s.description?(u(),P("p",{key:1,class:q(k.value.description({class:t.ui?.description}))},[A(V.$slots,"description",{description:a.description},()=>[R(M(a.description),1)])],2)):B("",!0)],2)):B("",!0)]),_:3},8,["as","class"]))}}),tt={class:"flex items-center gap-2"},st={class:"font-semibold text-lg"},lt={key:0,class:"text-red-500 text-sm mt-2"},it={class:"w-full flex justify-end gap-2"},nt=Q({__name:"BibleNoteFormModal",props:Z({verseId:{},note:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Z(["close","created","updated"],["update:modelValue"]),setup(a,{emit:y}){const t=a,s=y,c=le(a,"modelValue"),d=T(!!t.note),l=ye({title:t.note?.title??"",content:t.note?.content??"",isPrivate:t.note?.isPrivate??!0});re(()=>t.note,f=>{f?(l.title=f.title??"",l.content=f.content??"",l.isPrivate=f.isPrivate??!0,d.value=!0):(l.title="",l.content="",l.isPrivate=!0,d.value=!1)});const i=T(!1),p=T(""),w=xe();function $(){c.value=!1,s("close")}async function x(){p.value="",i.value=!0;try{let f=null;d.value&&t.note?f=await $fetch(`/api/bible/notes/${t.note.id}`,{method:"PUT",body:{title:l.title,content:l.content,isPrivate:l.isPrivate}}):f=await $fetch("/api/bible/notes",{method:"POST",body:{verseId:t.verseId,title:l.title,content:l.content,isPrivate:l.isPrivate}}),f.success?(w.add({title:d.value?"Note modifiée":"Note ajoutée",description:f.message,color:"primary"}),d.value?s("updated",f.note):s("created",f.note),$()):p.value=f.message||"Erreur inconnue"}catch(f){p.value=f?.statusMessage||"Erreur lors de l’enregistrement de la note"}finally{i.value=!1}}return(f,m)=>{const v=E,z=ke,n=ve,k=Ya,r=at,V=ie,L=$e,O=Le;return u(),h(O,{state:l,onSubmit:fe(x,["prevent"])},{default:o(()=>[g(L,{open:c.value,"onUpdate:open":m[3]||(m[3]=_=>c.value=_),overlay:!0,ui:{content:"max-w-lg"}},{header:o(()=>[S("div",tt,[g(v,{name:"i-lucide-pencil",class:"text-primary-600"}),S("span",st,M(d.value?"Modifier la note":"Ajouter une note"),1)])]),body:o(()=>[g(n,{label:"Titre (optionnel)",name:"title"},{default:o(()=>[g(z,{modelValue:l.title,"onUpdate:modelValue":m[0]||(m[0]=_=>l.title=_),placeholder:"Titre de la note...",class:"w-full"},null,8,["modelValue"])]),_:1}),g(n,{label:"Contenu",name:"content",class:"mt-4",required:""},{default:o(()=>[g(k,{modelValue:l.content,"onUpdate:modelValue":m[1]||(m[1]=_=>l.content=_),placeholder:"Votre note...",class:"w-full",rows:5},null,8,["modelValue"])]),_:1}),g(n,{label:"Note privée",name:"isPrivate",class:"mt-4"},{default:o(()=>[g(r,{modelValue:l.isPrivate,"onUpdate:modelValue":m[2]||(m[2]=_=>l.isPrivate=_),label:"Visible uniquement par moi"},null,8,["modelValue"])]),_:1}),p.value?(u(),P("div",lt,M(p.value),1)):B("",!0)]),footer:o(()=>[S("div",it,[g(V,{color:"secondary",variant:"ghost",onClick:$},{default:o(()=>[...m[4]||(m[4]=[R(" Annuler ",-1)])]),_:1}),g(V,{type:"submit",color:"primary",loading:i.value},{default:o(()=>[R(M(d.value?"Enregistrer":"Ajouter"),1)]),_:1},8,["loading"])])]),_:1},8,["open"])]),_:1},8,["state"])}}}),ot=Object.assign(nt,{__name:"BibleNoteFormModal"}),rt={class:"space-y-6"},ut={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},dt={class:"flex flex-1 items-center gap-2"},ct={class:"space-x-1"},mt={class:"flex justify-center gap-2"},gt=Q({__name:"BibleReader",props:{book:{},chapter:{},versesData:{},versions:{},selectedVersion:{}},emits:["update:chapter"],setup(a,{emit:y}){const t=a,s=v=>{d.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},i.value=!0},c=v=>{d.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},p.value=!0},d=T(null),l=v=>{d.value={book:{code:t.book.code,name:t.book.name},verseStart:v,chapter:t.chapter,version:t.selectedVersion.id},w.value=!0},i=T(!1),p=T(!1),w=T(!1),$=y,x=N(()=>Array.from({length:t.versesData?.navigation.totalChapters||0},(v,z)=>z+1)),f=N(()=>t.versesData?.verses||[]),m=v=>{$("update:chapter",v)};return(v,z)=>{const n=_e,k=ie,r=Aa,V=Te,L=Wa,O=ot;return u(),P("div",rt,[g(V,{class:"mb-4"},{header:o(()=>[S("div",ut,[S("div",dt,[z[4]||(z[4]=S("p",null,"Chapitre",-1)),g(n,{items:x.value,"model-value":v.chapter,placeholder:"Chapitre",class:"w-32","onUpdate:modelValue":m},null,8,["items","model-value"])]),g(k,{color:"secondary",variant:"ghost",to:"/bible/compare","trailing-icon":"i-lucide-chevron-right"},{default:o(()=>[...z[5]||(z[5]=[R(" Comparer ",-1)])]),_:1})])]),footer:o(()=>[S("div",mt,[v.versesData?.navigation.previousChapter?(u(),h(k,{key:0,icon:"i-lucide-arrow-left",color:"primary",variant:"soft",onClick:z[0]||(z[0]=_=>m(v.versesData.navigation.previousChapter))},{default:o(()=>[...z[6]||(z[6]=[R(" Précédent ",-1)])]),_:1})):B("",!0),v.versesData?.navigation.nextChapter?(u(),h(k,{key:1,"trailing-icon":"i-lucide-arrow-right",color:"primary",variant:"soft",onClick:z[1]||(z[1]=_=>m(v.versesData.navigation.nextChapter))},{default:o(()=>[...z[7]||(z[7]=[R(" Suivant ",-1)])]),_:1})):B("",!0)])]),default:o(()=>[S("div",ct,[(u(!0),P(J,null,W(f.value,_=>(u(),h(r,{key:_.id,verse:_,onShowCompare:s,onOpenBookmarkForm:c,onAddNote:l},null,8,["verse"]))),128))])]),_:1}),e(d)?(u(),h(L,j({key:0,modelValue:e(i),"onUpdate:modelValue":z[2]||(z[2]=_=>pe(i)?i.value=_:null)},e(d),{"available-versions":v.versions}),null,16,["modelValue","available-versions"])):B("",!0),e(d)?(u(),h(O,{key:1,modelValue:e(w),"onUpdate:modelValue":z[3]||(z[3]=_=>pe(w)?w.value=_:null),verse:e(d)},null,8,["modelValue","verse"])):B("",!0)])}}}),pt=Object.assign(gt,{__name:"BibleReader"}),qt=Q({__name:"index",setup(a){const{loggedIn:y}=Ve(),t=ua(),s=da(),c=T(!1),d=T(null),l=T("GEN"),i=T(1),p=T(null),w=T([]),$=T("LSG"),x=T(null),f=T([]),m=()=>{l.value=s.query.book||"GEN",$.value=s.query.version||"LSG",i.value=parseInt(s.query.chapter||"1")},v=T([]),z=N(()=>{const b=v.value.filter(I=>I.testament==="OLD"),U=v.value.filter(I=>I.testament==="NEW");return[{label:"Ancien Testament",open:b.some(I=>I.code===l.value),active:b.some(I=>I.code===l.value),ui:{link:"cursor-pointer"},children:b.map(I=>({label:I.name,onSelect:async()=>await V(I.code),active:l.value===I.code,ui:{link:"cursor-pointer"}}))},{label:"Nouveau Testament",open:U.some(I=>I.code===l.value),active:U.some(I=>I.code===l.value),ui:{link:"cursor-pointer"},children:U.map(I=>({label:I.name,onSelect:async()=>await V(I.code),active:l.value===I.code,ui:{link:"cursor-pointer"}}))}]}),n=N(()=>w.value.map(b=>({label:b.name,to:t.resolve({query:{...s.query,version:b.code}}).href,active:$.value===b.code}))),k=N(()=>v.value.find(b=>b.code==l.value)),r=N(()=>w.value.find(b=>b.code==$.value)),V=async b=>{await t.push({query:{...s.query,book:b,chapter:1}})},L=(b,U)=>{if(!f.value)return;const I=f.value.find(H=>H.bookCode===b);I?I.chaptersId.includes(U)||I.chaptersId.push(U):f.value.push({bookCode:b,chaptersId:[U]})},O=async b=>{await t.push({query:{...s.query,chapter:b}}),y&&l.value&&L(l.value,b)};ca({title:"Lire la Bible en ligne - Théologie Pour Tous",ogTitle:"Lire la Bible en ligne - Théologie Pour Tous",description:"Lisez la Bible en ligne avec différentes versions disponibles. Parcourez les livres et chapitres de la Bible facilement.",ogDescription:"Lisez la Bible en ligne avec différentes versions disponibles. Parcourez les livres et chapitres de la Bible facilement."});const _=async()=>{if(!(!y||!r.value))try{const b=w.value.find(I=>I.code===$.value)?.id;if(!b)return;const U=await $fetch("/api/reading/sessions",{method:"POST",body:{action:"start",versionId:b,chaptersRead:JSON.stringify([{bookCode:l.value,chaptersId:i.value?[i.value]:[]}])}});if(U.success&&U.sessionId){const I=[{bookCode:l.value,chaptersId:i.value?[i.value]:[]}];x.value={id:U.sessionId,chaptersRead:I},f.value=I}}catch(b){console.error("Erreur lors du démarrage de la session:",b)}},G=async()=>{if(!(!y||!x.value))try{await $fetch("/api/reading/sessions",{method:"POST",body:{action:"end",sessionId:x.value.id,chaptersRead:JSON.stringify(f.value)}})}catch(b){console.error("Erreur lors de la fermeture de la session:",b)}};Be(async()=>{m(),await Promise.all([F(),ae(),te()]),y&&await _()}),ma(async()=>{y&&await G()});const F=async()=>{try{c.value=!0;const b=await $fetch("/api/bible/books");v.value=b.data?.all}catch(b){d.value="Erreur lors du chargement des livres",console.error(b)}finally{c.value=!1}},ae=async()=>{try{const b=await $fetch("/api/bible/versions");w.value=b.data||b}catch(b){d.value="Erreur lors du chargement des versions",console.error(b)}},te=async()=>{try{const b=await $fetch(`/api/bible/verses/${l.value}/${i.value}`,{query:{version:$.value}});p.value=b.data}catch(b){d.value="Erreur lors du chargement des versets",console.error(b)}};return re(()=>s.query,async()=>{m(),await te()},{deep:!0}),wa(),(b,U)=>{const I=pa,H=va,C=ba,K=pt,Y=fa,ue=ha,de=ga;return e(v).length&&e(w).length?(u(),h(de,{key:0},be({left:o(()=>[g(H,null,{top:o(()=>[...U[0]||(U[0]=[R(" Les livres ",-1)])]),default:o(()=>[g(I,{items:e(z),highlight:"",orientation:"vertical"},null,8,["items"])]),_:1})]),default:o(()=>[e(k)&&e(i)?(u(),h(C,{key:0,title:`${e(k).name} ${e(i)}`,description:e(r)?e(r).name:"Aucune version sélectionnée"},null,8,["title","description"])):B("",!0),g(ue,null,{default:o(()=>[S("div",null,[e(k)&&e(i)&&e(r)&&e(p)?(u(),h(K,{key:0,book:e(k),chapter:e(i),"verses-data":e(p),versions:e(w),"selected-version":e(r),"onUpdate:chapter":O},null,8,["book","chapter","verses-data","versions","selected-version"])):B("",!0)]),g(Y)]),_:1})]),_:2},[e(w).length?{name:"right",fn:o(()=>[g(H,null,{top:o(()=>[...U[1]||(U[1]=[R(" Versions disponibles ",-1)])]),default:o(()=>[g(I,{items:e(n),variant:"link",orientation:"vertical"},null,8,["items"])]),_:1})]),key:"0"}:void 0]),1024)):B("",!0)}}});export{qt as default};
