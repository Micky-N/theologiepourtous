import{B as O,V as P,z as h,e as o,w as d,h as e,d as u,f as x,n as b,G as r,t as m,g as i,Z as B,$ as W,ao as G,y as X,a0 as D,X as S,N as Z,E as z,M as C,F as V,H as R,L as T,a1 as J,r as j,o as K,au as N,I as Q,a4 as Y,ba as ee,bd as te}from"#entry";import{_ as se}from"./ath3GSdt.js";import{_ as A}from"./sIOFFvLP.js";import"./j7pdL1SH.js";const ae={class:"flex items-center gap-2"},re={class:"font-medium text-gray-900 dark:text-white"},oe={class:"text-center"},ne={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},ie=O({__name:"StatsCard",props:{title:{},value:{},icon:{},color:{default:"blue"},subtitle:{default:""}},setup(a){const y=a,s=P(()=>{switch(y.color){case"green":return"text-green-600 dark:text-green-400";case"purple":return"text-purple-600 dark:text-purple-400";case"orange":return"text-orange-600 dark:text-orange-400";case"red":return"text-red-600 dark:text-red-400";default:return"text-blue-600 dark:text-blue-400"}}),n=P(()=>{switch(y.color){case"green":return"text-green-700 dark:text-green-300";case"purple":return"text-purple-700 dark:text-purple-300";case"orange":return"text-orange-700 dark:text-orange-300";case"red":return"text-red-700 dark:text-red-300";default:return"text-blue-700 dark:text-blue-300"}});return(c,f)=>{const _=B,g=A;return o(),h(g,null,{header:d(()=>[e("div",ae,[i(_,{name:c.icon,class:b([r(s),"w-5 h-5"])},null,8,["name","class"]),e("div",null,[e("h3",re,m(c.title),1)])])]),default:d(()=>[e("div",oe,[e("div",{class:b(["text-3xl font-bold",r(n)])},m(c.value),3),c.subtitle?(o(),u("div",ne,m(c.subtitle),1)):x("",!0)])]),_:1})}}}),le=Object.assign(ie,{__name:"StatsCard"}),ce={slots:{root:"relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5",wrapper:"min-w-0 flex-1 flex flex-col",title:"text-sm font-medium",description:"text-sm opacity-90",icon:"shrink-0 size-5",avatar:"shrink-0",avatarSize:"2xl",actions:"flex flex-wrap gap-1.5 shrink-0",close:"p-0"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},orientation:{horizontal:{root:"items-center",actions:"items-center"},vertical:{root:"items-start",actions:"items-start mt-2.5"}},title:{true:{description:"mt-1"}}},compoundVariants:[{color:"primary",variant:"solid",class:{root:"bg-primary text-inverted"}},{color:"secondary",variant:"solid",class:{root:"bg-secondary text-inverted"}},{color:"success",variant:"solid",class:{root:"bg-success text-inverted"}},{color:"info",variant:"solid",class:{root:"bg-info text-inverted"}},{color:"warning",variant:"solid",class:{root:"bg-warning text-inverted"}},{color:"error",variant:"solid",class:{root:"bg-error text-inverted"}},{color:"primary",variant:"outline",class:{root:"text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"outline",class:{root:"text-secondary ring ring-inset ring-secondary/25"}},{color:"success",variant:"outline",class:{root:"text-success ring ring-inset ring-success/25"}},{color:"info",variant:"outline",class:{root:"text-info ring ring-inset ring-info/25"}},{color:"warning",variant:"outline",class:{root:"text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"outline",class:{root:"text-error ring ring-inset ring-error/25"}},{color:"primary",variant:"soft",class:{root:"bg-primary/10 text-primary"}},{color:"secondary",variant:"soft",class:{root:"bg-secondary/10 text-secondary"}},{color:"success",variant:"soft",class:{root:"bg-success/10 text-success"}},{color:"info",variant:"soft",class:{root:"bg-info/10 text-info"}},{color:"warning",variant:"soft",class:{root:"bg-warning/10 text-warning"}},{color:"error",variant:"soft",class:{root:"bg-error/10 text-error"}},{color:"primary",variant:"subtle",class:{root:"bg-primary/10 text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"subtle",class:{root:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"}},{color:"success",variant:"subtle",class:{root:"bg-success/10 text-success ring ring-inset ring-success/25"}},{color:"info",variant:"subtle",class:{root:"bg-info/10 text-info ring ring-inset ring-info/25"}},{color:"warning",variant:"subtle",class:{root:"bg-warning/10 text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"subtle",class:{root:"bg-error/10 text-error ring ring-inset ring-error/25"}},{color:"neutral",variant:"solid",class:{root:"text-inverted bg-inverted"}},{color:"neutral",variant:"outline",class:{root:"text-highlighted bg-default ring ring-inset ring-default"}},{color:"neutral",variant:"soft",class:{root:"text-highlighted bg-elevated/50"}},{color:"neutral",variant:"subtle",class:{root:"text-highlighted bg-elevated/50 ring ring-inset ring-accented"}}],defaultVariants:{color:"primary",variant:"solid"}},de={__name:"UAlert",props:{as:{type:null,required:!1},title:{type:String,required:!1},description:{type:String,required:!1},icon:{type:[String,Object],required:!1},avatar:{type:Object,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},orientation:{type:null,required:!1,default:"vertical"},actions:{type:Array,required:!1},close:{type:[Boolean,Object],required:!1},closeIcon:{type:[String,Object],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},emits:["update:open"],setup(a,{emit:y}){const s=a,n=y,c=W(),{t:f}=G(),_=X(),g=P(()=>D({extend:D(ce),..._.ui?.alert||{}})({color:s.color,variant:s.variant,orientation:s.orientation,title:!!s.title||!!c.title}));return(p,k)=>(o(),h(r(J),{as:a.as,"data-orientation":a.orientation,class:b(g.value.root({class:[s.ui?.root,s.class]}))},{default:d(()=>[S(p.$slots,"leading",{},()=>[a.avatar?(o(),h(Z,z({key:0,size:s.ui?.avatarSize||g.value.avatarSize()},a.avatar,{class:g.value.avatar({class:s.ui?.avatar})}),null,16,["size","class"])):a.icon?(o(),h(B,{key:1,name:a.icon,class:b(g.value.icon({class:s.ui?.icon}))},null,8,["name","class"])):x("",!0)]),e("div",{class:b(g.value.wrapper({class:s.ui?.wrapper}))},[a.title||c.title?(o(),u("div",{key:0,class:b(g.value.title({class:s.ui?.title}))},[S(p.$slots,"title",{},()=>[C(m(a.title),1)])],2)):x("",!0),a.description||c.description?(o(),u("div",{key:1,class:b(g.value.description({class:s.ui?.description}))},[S(p.$slots,"description",{},()=>[C(m(a.description),1)])],2)):x("",!0),a.orientation==="vertical"&&(a.actions?.length||c.actions)?(o(),u("div",{key:2,class:b(g.value.actions({class:s.ui?.actions}))},[S(p.$slots,"actions",{},()=>[(o(!0),u(V,null,R(a.actions,(v,t)=>(o(),h(T,z({key:t,size:"xs"},{ref_for:!0},v),null,16))),128))])],2)):x("",!0)],2),a.orientation==="horizontal"&&(a.actions?.length||c.actions)||a.close?(o(),u("div",{key:0,class:b(g.value.actions({class:s.ui?.actions,orientation:"horizontal"}))},[a.orientation==="horizontal"&&(a.actions?.length||c.actions)?S(p.$slots,"actions",{key:0},()=>[(o(!0),u(V,null,R(a.actions,(v,t)=>(o(),h(T,z({key:t,size:"xs"},{ref_for:!0},v),null,16))),128))]):x("",!0),S(p.$slots,"close",{ui:g.value},()=>[a.close?(o(),h(T,z({key:0,icon:a.closeIcon||r(_).ui.icons.close,color:"neutral",variant:"link","aria-label":r(f)("alert.close")},typeof a.close=="object"?a.close:{},{class:g.value.close({class:s.ui?.close}),onClick:k[0]||(k[0]=v=>n("update:open",!1))}),null,16,["icon","aria-label","class"])):x("",!0)])],2)):x("",!0)]),_:3},8,["as","data-orientation","class"]))}},ue={class:"reading-stats-dashboard space-y-6"},ge={class:"flex items-center justify-between"},me={key:0,class:"flex justify-center py-12"},ve={key:1,class:"space-y-6"},fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},xe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ye={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},pe={class:"space-y-4"},be={class:"flex justify-between items-center"},he={class:"font-medium"},_e={class:"flex justify-between items-center"},ke={class:"font-medium"},we={class:"flex justify-between items-center"},$e={class:"font-medium"},Se={class:"flex justify-between items-center"},Ce={class:"font-medium"},je={class:"space-y-3"},qe={class:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},ze={class:"text-xs font-medium text-blue-600 dark:text-blue-400"},Te={class:"flex-1 min-w-0"},Pe={class:"text-sm font-medium truncate"},Ve={class:"text-xs text-gray-500"},Re={class:"flex items-center justify-between"},Be={class:"flex gap-2"},Ue={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ne={class:"flex items-center justify-between mb-2"},Oe={class:"font-medium text-sm"},Me={class:"text-xs text-gray-500"},De={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2"},Ae={key:0,class:"mt-2 flex items-center gap-1 text-green-600 dark:text-green-400"},Ie=O({__name:"ReadingStatsDashboard",setup(a){const y=j(!0),s=j(""),n=j(null),c=j("week"),f=j("all"),_=[{label:"Aujourd'hui",value:"day"},{label:"7 derniers jours",value:"week"},{label:"30 derniers jours",value:"month"},{label:"Cette année",value:"year"},{label:"Tout",value:"all"}],g=P(()=>n.value?f.value==="all"?n.value.bookProgress:n.value.bookProgress.filter(v=>typeof v.book=="object"&&v.book.testament===f.value):[]),p=async()=>{try{y.value=!0,s.value="",n.value=await $fetch("/api/reading/stats",{query:{period:c.value}})}catch(v){s.value="Erreur lors du chargement des statistiques",console.error(v)}finally{y.value=!1}},k=v=>{const t=Math.floor(v/3600),w=Math.floor(v%3600/60);return t>0?`${t}h${w>0?` ${w}m`:""}`:w>0?`${w}m`:`${v}s`};return K(()=>{p()}),(v,t)=>{const w=se,M=B,q=le,I=N("ReadingTimeChart"),$=A,L=N("VersesReadChart"),E=N("TimePreferencesChart"),U=T,H=de;return o(),u("div",ue,[e("div",ge,[t[4]||(t[4]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Statistiques de lecture "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Suivez votre progression dans l'étude biblique ")],-1)),i(w,{modelValue:r(c),"onUpdate:modelValue":t[0]||(t[0]=l=>Q(c)?c.value=l:null),options:_,"option-attribute":"label","value-attribute":"value",onChange:p},null,8,["modelValue"])]),r(y)?(o(),u("div",me,[i(M,{name:"i-lucide-loader-2",class:"w-8 h-8 animate-spin"})])):r(n)?(o(),u("div",ve,[e("div",fe,[i(q,{title:"Temps total",value:k(r(n).summary.totalReadingTime),icon:"i-lucide-clock",color:"blue"},null,8,["value"]),i(q,{title:"Sessions",value:r(n).summary.totalSessions.toString(),icon:"i-lucide-book-open",color:"green"},null,8,["value"]),i(q,{title:"Chapitres lus",value:r(n).summary.totalChaptersRead.toString(),icon:"i-lucide-scroll-text",color:"purple"},null,8,["value"]),i(q,{title:"Série actuelle",value:`${r(n).summary.currentStreak} jours`,icon:"i-lucide-flame",color:"orange"},null,8,["value"])]),e("div",xe,[i($,null,{header:d(()=>[...t[5]||(t[5]=[e("h3",{class:"text-lg font-semibold"}," Temps de lecture quotidien ",-1)])]),default:d(()=>[i(I,{data:r(n).dailyStats},null,8,["data"])]),_:1}),i($,null,{header:d(()=>[...t[6]||(t[6]=[e("h3",{class:"text-lg font-semibold"}," Progression des versets ",-1)])]),default:d(()=>[i(L,{data:r(n).dailyStats},null,8,["data"])]),_:1})]),e("div",ye,[i($,null,{header:d(()=>[...t[7]||(t[7]=[e("h3",{class:"text-lg font-semibold"}," Heures préférées ",-1)])]),default:d(()=>[i(E,{data:r(n).timePreferences},null,8,["data"])]),_:1}),i($,null,{header:d(()=>[...t[8]||(t[8]=[e("h3",{class:"text-lg font-semibold"}," Moyennes ",-1)])]),default:d(()=>[e("div",pe,[e("div",be,[t[9]||(t[9]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Temps/jour ",-1)),e("span",he,m(k(r(n).summary.averages.readingTimePerDay)),1)]),e("div",_e,[t[10]||(t[10]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Chapitres/session ",-1)),e("span",ke,m(Math.round(r(n).summary.averages.chaptersPerSession)),1)]),e("div",we,[t[11]||(t[11]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Vitesse lecture ",-1)),e("span",$e,m(Math.round(r(n).summary.averages.averageReadingSpeed||0))+" v/min ",1)]),e("div",Se,[t[12]||(t[12]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Plus longue série ",-1)),e("span",Ce,m(r(n).summary.longestStreak)+" jours ",1)])])]),_:1}),i($,null,{header:d(()=>[...t[13]||(t[13]=[e("h3",{class:"text-lg font-semibold"}," Top livres ",-1)])]),default:d(()=>[e("div",je,[(o(!0),u(V,null,R(r(n).topBooks.slice(0,5),(l,F)=>(o(),u("div",{key:(typeof l.name=="string",l.name),class:"flex items-center gap-3"},[e("div",qe,[e("span",ze,m(F+1),1)]),e("div",Te,[e("p",Pe,m(l.name),1),e("p",Ve,m(l.sessions)+" sessions • "+m(k(l.totalTime)),1)])]))),128))])]),_:1})]),i($,null,{header:d(()=>[e("div",Re,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold"}," Progression par livre ",-1)),e("div",Be,[i(U,{variant:r(f)==="all"?"solid":"ghost",size:"xs",onClick:t[1]||(t[1]=l=>f.value="all")},{default:d(()=>[...t[14]||(t[14]=[C(" Tous ",-1)])]),_:1},8,["variant"]),i(U,{variant:r(f)==="OLD"?"solid":"ghost",size:"xs",onClick:t[2]||(t[2]=l=>f.value="OLD")},{default:d(()=>[...t[15]||(t[15]=[C(" AT ",-1)])]),_:1},8,["variant"]),i(U,{variant:r(f)==="NEW"?"solid":"ghost",size:"xs",onClick:t[3]||(t[3]=l=>f.value="NEW")},{default:d(()=>[...t[16]||(t[16]=[C(" NT ",-1)])]),_:1},8,["variant"])])])]),default:d(()=>[e("div",Ue,[(o(!0),u(V,null,R(r(g),l=>(o(),u("div",{key:typeof l.book=="string"?l.book:l.book.code,class:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg"},[e("div",Ne,[e("h4",Oe,m(typeof l.book=="string"?l.book:l.book.name),1),e("span",Me,m(l.completionPercentage)+"% ",1)]),e("div",De,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Y({width:`${l.completionPercentage}%`})},null,4)]),l.isCompleted?(o(),u("div",Ae,[i(M,{name:"i-lucide-check-circle",class:"w-3 h-3"}),t[18]||(t[18]=e("span",{class:"text-xs"},"Terminé",-1))])):x("",!0)]))),128))])]),_:1})])):r(s)?(o(),h(H,{key:2,color:"error",variant:"soft",title:r(s)},null,8,["title"])):x("",!0)])}}}),Le=Object.assign(Ie,{__name:"ReadingStatsDashboard"}),Ee={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},He={class:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"},Fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},We={class:"flex items-center justify-between h-16"},Ge={class:"flex items-center"},Xe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ye=O({__name:"stats",setup(a){return ee({title:"Statistiques de lecture - Théologie pour tous",meta:[{name:"description",content:"Suivez votre progression dans l'étude de la Bible avec des statistiques détaillées"}]}),(y,s)=>{const n=B,c=te,f=Le;return o(),u("div",Ee,[e("div",He,[e("div",Fe,[e("div",We,[e("div",Ge,[i(c,{to:"/bible",class:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"},{default:d(()=>[i(n,{name:"i-lucide-arrow-left",class:"w-4 h-4"}),s[0]||(s[0]=C(" Retour à la Bible ",-1))]),_:1})]),s[1]||(s[1]=e("h1",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Statistiques de lecture ",-1)),s[2]||(s[2]=e("div",null,null,-1))])])]),e("div",Xe,[i(f)])])}}});export{Ye as default};
