import{B as j,r as p,V as D,o as M,d as m,h as e,z as E,f as $,g as s,H as a,J as L,Z as C,w as n,t as c,F as S,I as T,a4 as O,L as A,M as y,e as d,aU as H,bE as I}from"#entry";import{_ as F}from"./g6Za9bgq.js";import{_ as W,a as J,b as Z,c as G}from"./BIpedZqG.js";import{_ as K}from"./Bj6CTjPb.js";import{_ as Q}from"./BOhgXgT6.js";import"./Dcm9wb4e.js";import"./9v54ouTo.js";const X={class:"reading-stats-dashboard space-y-6"},Y={class:"flex items-center justify-between"},ee={key:0,class:"flex justify-center py-12"},te={key:1,class:"space-y-6"},se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},oe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ae={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},le={class:"space-y-4"},ne={class:"flex justify-between items-center"},ie={class:"font-medium"},re={class:"flex justify-between items-center"},de={class:"font-medium"},ue={class:"flex justify-between items-center"},ce={class:"font-medium"},me={class:"space-y-3"},_e={class:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},ge={class:"text-xs font-medium text-blue-600 dark:text-blue-400"},fe={class:"flex-1 min-w-0"},pe={class:"text-sm font-medium truncate"},xe={class:"text-xs text-gray-500"},ve={class:"flex items-center justify-between"},ye={class:"flex gap-2"},be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},he={class:"flex items-center justify-between mb-2"},ke={class:"font-medium text-sm"},we={class:"text-xs text-gray-500"},$e={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2"},Se={key:0,class:"mt-2 flex items-center gap-1 text-green-600 dark:text-green-400"},Te=j({__name:"ReadingStatsDashboard",setup(P){const x=p(!0),i=p(""),l=p(null),_=p("week"),r=p("all"),B=[{label:"Aujourd'hui",value:"day"},{label:"7 derniers jours",value:"week"},{label:"30 derniers jours",value:"month"},{label:"Cette année",value:"year"},{label:"Tout",value:"all"}],R=D(()=>l.value?r.value==="all"?l.value.bookProgress:l.value.bookProgress.filter(u=>typeof u.book=="object"&&u.book.testament===r.value):[]),k=async()=>{try{x.value=!0,i.value="",l.value=await $fetch("/api/reading/stats",{query:{period:_.value}})}catch(u){i.value="Erreur lors du chargement des statistiques",console.error(u)}finally{x.value=!1}},b=u=>{const t=Math.floor(u/3600),g=Math.floor(u%3600/60);return t>0?`${t}h${g>0?` ${g}m`:""}`:g>0?`${g}m`:`${u}s`};return M(()=>{k()}),(u,t)=>{const g=F,w=C,v=W,V=J,f=K,q=Z,N=G,h=A,U=Q;return d(),m("div",X,[e("div",Y,[t[4]||(t[4]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Statistiques de lecture "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Suivez votre progression dans l'étude biblique ")],-1)),s(g,{modelValue:a(_),"onUpdate:modelValue":t[0]||(t[0]=o=>L(_)?_.value=o:null),options:B,"option-attribute":"label","value-attribute":"value",onChange:k},null,8,["modelValue"])]),a(x)?(d(),m("div",ee,[s(w,{name:"i-lucide-loader-2",class:"w-8 h-8 animate-spin"})])):a(l)?(d(),m("div",te,[e("div",se,[s(v,{title:"Temps total",value:b(a(l).summary.totalReadingTime),icon:"i-lucide-clock",color:"blue"},null,8,["value"]),s(v,{title:"Sessions",value:a(l).summary.totalSessions.toString(),icon:"i-lucide-book-open",color:"green"},null,8,["value"]),s(v,{title:"Chapitres lus",value:a(l).summary.totalChaptersRead.toString(),icon:"i-lucide-scroll-text",color:"purple"},null,8,["value"]),s(v,{title:"Série actuelle",value:`${a(l).summary.currentStreak} jours`,icon:"i-lucide-flame",color:"orange"},null,8,["value"])]),e("div",oe,[s(f,null,{header:n(()=>[...t[5]||(t[5]=[e("h3",{class:"text-lg font-semibold"}," Temps de lecture quotidien ",-1)])]),default:n(()=>[s(V,{data:a(l).dailyStats},null,8,["data"])]),_:1}),s(f,null,{header:n(()=>[...t[6]||(t[6]=[e("h3",{class:"text-lg font-semibold"}," Progression des versets ",-1)])]),default:n(()=>[s(q,{data:a(l).dailyStats},null,8,["data"])]),_:1})]),e("div",ae,[s(f,null,{header:n(()=>[...t[7]||(t[7]=[e("h3",{class:"text-lg font-semibold"}," Heures préférées ",-1)])]),default:n(()=>[s(N,{data:a(l).timePreferences},null,8,["data"])]),_:1}),s(f,null,{header:n(()=>[...t[8]||(t[8]=[e("h3",{class:"text-lg font-semibold"}," Moyennes ",-1)])]),default:n(()=>[e("div",le,[e("div",ne,[t[9]||(t[9]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Temps/jour ",-1)),e("span",ie,c(b(a(l).summary.averages.readingTimePerDay)),1)]),e("div",re,[t[10]||(t[10]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Chapitres/session ",-1)),e("span",de,c(Math.round(a(l).summary.averages.chaptersPerSession)),1)]),e("div",ue,[t[11]||(t[11]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"}," Plus longue série ",-1)),e("span",ce,c(a(l).summary.longestStreak)+" jours ",1)])])]),_:1}),s(f,null,{header:n(()=>[...t[12]||(t[12]=[e("h3",{class:"text-lg font-semibold"}," Top livres ",-1)])]),default:n(()=>[e("div",me,[(d(!0),m(S,null,T(a(l).topBooks.slice(0,5),(o,z)=>(d(),m("div",{key:(typeof o.name=="string",o.name),class:"flex items-center gap-3"},[e("div",_e,[e("span",ge,c(z+1),1)]),e("div",fe,[e("p",pe,c(o.name),1),e("p",xe,c(o.sessions)+" sessions • "+c(b(o.totalTime)),1)])]))),128))])]),_:1})]),s(f,null,{header:n(()=>[e("div",ve,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold"}," Progression par livre ",-1)),e("div",ye,[s(h,{variant:a(r)==="all"?"solid":"ghost",size:"xs",onClick:t[1]||(t[1]=o=>r.value="all")},{default:n(()=>[...t[13]||(t[13]=[y(" Tous ",-1)])]),_:1},8,["variant"]),s(h,{variant:a(r)==="OLD"?"solid":"ghost",size:"xs",onClick:t[2]||(t[2]=o=>r.value="OLD")},{default:n(()=>[...t[14]||(t[14]=[y(" AT ",-1)])]),_:1},8,["variant"]),s(h,{variant:a(r)==="NEW"?"solid":"ghost",size:"xs",onClick:t[3]||(t[3]=o=>r.value="NEW")},{default:n(()=>[...t[15]||(t[15]=[y(" NT ",-1)])]),_:1},8,["variant"])])])]),default:n(()=>[e("div",be,[(d(!0),m(S,null,T(a(R),o=>(d(),m("div",{key:typeof o.book=="string"?o.book:o.book.code,class:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg"},[e("div",he,[e("h4",ke,c(typeof o.book=="string"?o.book:o.book.name),1),e("span",we,c(o.completionPercentage)+"% ",1)]),e("div",$e,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:O({width:`${o.completionPercentage}%`})},null,4)]),o.isCompleted?(d(),m("div",Se,[s(w,{name:"i-lucide-check-circle",class:"w-3 h-3"}),t[17]||(t[17]=e("span",{class:"text-xs"},"Terminé",-1))])):$("",!0)]))),128))])]),_:1})])):a(i)?(d(),E(U,{key:2,color:"error",variant:"soft",title:a(i)},null,8,["title"])):$("",!0)])}}}),je=Object.assign(Te,{__name:"ReadingStatsDashboard"}),Ce={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},Pe={class:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"},Be={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Re={class:"flex items-center justify-between h-16"},Ve={class:"flex items-center"},qe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Oe=j({__name:"stats",setup(P){return H({title:"Statistiques de lecture - Théologie pour tous",meta:[{name:"description",content:"Suivez votre progression dans l'étude de la Bible avec des statistiques détaillées"}]}),(x,i)=>{const l=C,_=I,r=je;return d(),m("div",Ce,[e("div",Pe,[e("div",Be,[e("div",Re,[e("div",Ve,[s(_,{to:"/bible",class:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"},{default:n(()=>[s(l,{name:"i-lucide-arrow-left",class:"w-4 h-4"}),i[0]||(i[0]=y(" Retour à la Bible ",-1))]),_:1})]),i[1]||(i[1]=e("h1",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Statistiques de lecture ",-1)),i[2]||(i[2]=e("div",null,null,-1))])])]),e("div",qe,[s(r)])])}}});export{Oe as default};
