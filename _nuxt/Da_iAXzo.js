import{_ as F,a as G}from"./P754MEUe.js";import{_ as H}from"./DTIFCxQf.js";import{_ as z,a as I}from"./BiYaFSpO.js";import{_ as Q}from"./Crun2bm4.js";import{B as S,V as C,d as V,e as d,h as l,g as c,w as s,F as D,H as W,t as N,z as g,f as y,L as J,M as w,a as K,r as u,D as X,o as Y,G as a,Q as Z,P as ee,R as te}from"#entry";import{_ as ae}from"./sIOFFvLP.js";import{d as ne}from"./D8rO69WY.js";import"./CtvJZuv0.js";const se={class:"space-y-6"},oe={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},re={class:"flex flex-1 items-center gap-2"},le={class:"font-bold text-primary-600 dark:text-primary-400"},ie={class:"mr-1"},ce={class:"flex justify-center gap-2"},ue=S({__name:"BibleReader",props:{book:{},chapter:{},versesData:{},versions:{},selectedVersion:{}},emits:["update:chapter"],setup(B,{emit:f}){const _=B,h=f,r=C(()=>Array.from({length:_.versesData?.navigation.totalChapters||0},(n,t)=>t+1)),o=C(()=>_.versesData?.verses||[]),p=n=>{h("update:chapter",n)};return(n,t)=>{const i=Q,b=J,$=ae;return d(),V(D,null,[t[5]||(t[5]=l("div",null,null,-1)),l("div",se,[c($,{class:"mb-4"},{header:s(()=>[l("div",oe,[l("div",re,[t[2]||(t[2]=l("p",null,"Chapitre",-1)),c(i,{items:r.value,"model-value":n.chapter,placeholder:"Chapitre",class:"w-32","onUpdate:modelValue":p},null,8,["items","model-value"])])])]),footer:s(()=>[l("div",ce,[n.versesData?.navigation.previousChapter?(d(),g(b,{key:0,icon:"i-lucide-arrow-left",color:"primary",variant:"soft",onClick:t[0]||(t[0]=v=>p(n.versesData.navigation.previousChapter))},{default:s(()=>[...t[3]||(t[3]=[w(" Précédent ",-1)])]),_:1})):y("",!0),n.versesData?.navigation.nextChapter?(d(),g(b,{key:1,"trailing-icon":"i-lucide-arrow-right",color:"primary",variant:"soft",onClick:t[1]||(t[1]=v=>p(n.versesData.navigation.nextChapter))},{default:s(()=>[...t[4]||(t[4]=[w(" Suivant ",-1)])]),_:1})):y("",!0)])]),default:s(()=>[l("div",null,[(d(!0),V(D,null,W(o.value,v=>(d(),V("span",{key:v.id},[l("span",le,N(v.verse),1),l("span",ie,N(v.text),1)]))),128))])]),_:1})])],64)}}}),de=Object.assign(ue,{__name:"BibleReader"}),be=S({__name:"index",setup(B){const f=K(),_=u(!1),h=u(null),r=u(null),o=u(null),p=u(null),n=u([]),t=u(null),i=u([]),b=C(()=>[{title:"Ancien Testament",path:"/bible",children:i.value.filter(e=>e.testament==="OLD").map(e=>({title:e.name,path:f.resolve({query:{book:e.code}}).href,active:!1}))},{title:"Nouveau Testament",path:"/bible",children:i.value.filter(e=>e.testament==="NEW").map(e=>({title:e.name,path:f.resolve({query:{book:e.code}}).href,active:!1}))}]),$=C(()=>n.value.map(e=>({title:e.name,path:f.resolve({query:{version:e.code}}).href,active:!1}))),v=async e=>{r.value=i.value.find(m=>m.id===e)||null,o.value=1,await k()},P=async e=>{o.value=e,await k()},E=async e=>{t.value=n.value.find(m=>m.id===e)||null,await k()};X({title:"",ogTitle:"",description:"",ogDescription:""}),Y(async()=>{await Promise.all([R(),q()]),i.value.length>0&&(r.value=i.value[0]||null,o.value=1),n.value.length>0&&(t.value=n.value[0]||null),r.value&&o.value&&await k()});const R=async()=>{try{_.value=!0;const e=await $fetch("/api/bible/books");i.value=e.data?.all}catch(e){h.value="Erreur lors du chargement des livres",console.error(e)}finally{_.value=!1}},q=async()=>{try{const e=await $fetch("/api/bible/versions");n.value=e.data||e}catch(e){h.value="Erreur lors du chargement des versions",console.error(e)}},k=async()=>{try{const e=await $fetch(`/api/bible/verses/${r.value?.code}/${o.value}`,{query:{version:t.value?.code||"LSG"}});p.value=e.data}catch(e){h.value="Erreur lors du chargement des versets",console.error(e)}};return ne(),(e,m)=>{const A=G,U=F,x=H,L=z,M=de,T=te,j=I,O=ee;return a(i).length&&a(n).length?(d(),g(O,{key:0},Z({left:s(()=>[c(x,null,{top:s(()=>[c(A,{collapsed:!1})]),default:s(()=>[c(U,{navigation:a(b),highlight:""},null,8,["navigation"])]),_:1})]),default:s(()=>[a(r)&&a(o)?(d(),g(L,{key:0,title:`${a(r).name} ${a(o)}`,description:a(t)?a(t).name:"Aucune version sélectionnée"},null,8,["title","description"])):y("",!0),c(j,null,{default:s(()=>[l("div",null,[a(r)&&a(o)&&a(t)&&a(p)?(d(),g(M,{key:0,book:a(r),chapter:a(o),"verses-data":a(p),versions:a(n),"selected-version":a(t),"onUpdate:book":v,"onUpdate:chapter":P,"onUpdate:version":E},null,8,["book","chapter","verses-data","versions","selected-version"])):y("",!0)]),c(T)]),_:1})]),_:2},[a(n).length?{name:"right",fn:s(()=>[c(x,null,{top:s(()=>[...m[0]||(m[0]=[w(" Versions disponibles ",-1)])]),default:s(()=>[c(U,{navigation:a($),variant:"link"},null,8,["navigation"])]),_:1})]),key:"0"}:void 0]),1024)):y("",!0)}}});export{be as default};
