import{z as k,a0 as T,r as h,Z as N,G as w,I as g,e as s,bj as S,w as v,h as e,H as U,d as o,f as _,g as V,O as j,t as c,F as p,K as x,M as L,N as E,_ as I}from"#entry";import{_ as M}from"./CvsAtPMi.js";import{v as O}from"./ChZFRpQR.js";const q=["id"],F={class:"w-72 max-w-xs p-2"},G={key:0,class:"flex items-center gap-2 text-gray-600"},H={key:1,class:"text-sm text-red-600"},R={key:2,class:"space-y-1"},z={class:"text-xs text-gray-500"},A={class:"italic text-gray-800 leading-relaxed"},D={class:"text-xs text-primary-600 dark:text-primary-400"},K=["innerHTML"],Z={key:0},J={key:1},Q=k({__name:"BiblicalReferencePopover",props:{verse:{}},setup(r){const{user:y}=T(),l=h(!1),m=h(!1),u=h(null),t=h(null),i=N("cache",()=>new Map);async function B(n){const a=O(n);a.version=a.version||y.value?.preferences.defaultVersion?.code||"LSG";const f=await $fetch(`/api/bible/verses/${a.book}/${a.chapter}/${a.verse}`,{method:"GET",query:{version:a.version}});if(!f.success)throw new Error("Erreur lors du chargement du verset.");return{reference:f.meta.summary,verses:f.data}}async function C(){if(u.value=null,i.value.has(r.verse)){t.value=i.value.get(r.verse);return}m.value=!0,t.value=null;try{const n=await B(r.verse);i.value.set(r.verse,n),t.value=n}catch{u.value="Impossible de charger le verset."}finally{m.value=!1}}const P=(n,a)=>a==null||n+1===a;return w(l,n=>{n&&C()}),w(()=>r.verse,()=>{t.value=i.value.get(r.verse)??null,u.value=null}),(n,a)=>{const f=j,b=S;return s(),g(b,{open:l.value,"onUpdate:open":a[0]||(a[0]=d=>l.value=d),mode:"hover"},{content:v(()=>[e("div",F,[m.value?(s(),o("div",G,[V(f,{name:"i-heroicons-arrow-path-20-solid",class:"animate-spin"}),a[1]||(a[1]=e("span",null,"Chargement du verset…",-1))])):u.value?(s(),o("div",H,c(u.value),1)):t.value?(s(),o("div",R,[e("div",z,c(t.value.reference),1),e("div",A,[(s(!0),o(p,null,x(t.value.verses,(d,$)=>(s(),o(p,{key:d.id},[e("sup",D,c(d.verse),1),e("span",{innerHTML:d.text},null,8,K),$<t.value.verses.length-1?(s(),o("span",Z)):_("",!0),P(d.verse,t.value.verses[$+1]?.verse)?_("",!0):(s(),o("span",J," [...] "))],64))),128))])])):_("",!0)])]),default:v(()=>[e("a",{id:r.verse,class:"hover:underline"},[U(n.$slots,"default")],8,q)]),_:3},8,["open"])}}}),W=Object.assign(Q,{__name:"BiblicalReferencePopover"}),X={class:"text-lg font-semibold"},Y={class:"text-sm text-gray-500 mt-1"},ee={class:"overflow-x-auto"},se={class:"w-full border-collapse"},te={class:"bg-gray-50 border-b"},ae={key:0,class:"text-left p-3 font-semibold text-gray-700"},re={class:"p-3 font-medium text-primary-700"},oe={class:"p-3 text-gray-700"},ne={key:0,class:"p-3"},le=k({__name:"TheologicalComparison",props:{withVerse:{type:Boolean,default:!0},title:{default:"Perspectives théologiques"},subtitle:{default:"Comparez les différentes positions doctrinales sur un sujet biblique."},positions:{}},setup(r){return(y,l)=>{const m=L,u=M;return s(),g(u,{class:"theological-comparison"},{header:v(()=>[e("h3",X,c(r.title),1),e("p",Y,c(r.subtitle),1)]),default:v(()=>[e("div",ee,[e("table",se,[e("thead",null,[e("tr",te,[l[0]||(l[0]=e("th",{class:"text-left p-3 font-semibold text-gray-700"}," Position ",-1)),l[1]||(l[1]=e("th",{class:"text-left p-3 font-semibold text-gray-700"}," Arguments principaux ",-1)),r.withVerse?(s(),o("th",ae," Versets clés ")):_("",!0)])]),e("tbody",null,[(s(!0),o(p,null,x(r.positions,t=>(s(),o("tr",{key:t.name,class:"border-b hover:bg-gray-50 transition"},[e("td",re,c(t.name),1),e("td",oe,c(t.arguments),1),r.withVerse?(s(),o("td",ne,[(s(!0),o(p,null,x(t.verses,i=>(s(),g(m,{key:i,variant:"soft",color:"info",class:"mr-1 mb-1"},{default:v(()=>[V(W,{verse:i},{default:v(()=>[E(c(i),1)]),_:2},1032,["verse"])]),_:2},1024))),128))])):_("",!0)]))),128))])])])]),_:1})}}}),de=Object.assign(I(le,[["__scopeId","data-v-70fadd6a"]]),{__name:"TheologicalComparison"});export{de as default};
