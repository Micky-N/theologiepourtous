import{z as X,ad as te,ae as le,af as se,ag as re,ah as ie,D as B,r as R,G as Z,I as g,e as d,w as k,H as f,g as K,C as n,U as V,V as G,ai as ne,o as _,c as oe,aj as O,ak as ue,al as de,am as ce,y as ee,an as pe,ao as me,ap as fe,R as U,d as C,F as H,K as L,aq as ve,n as $,ar as ge,Q as ye,as as he,at as be,f as P,h as qe,O as Ve,M as Q,t as Y,P as j,Y as ke,au as xe,av as $e,a8 as J,aw as W,ax as T}from"#entry";import{_ as we}from"./CAJXGcJt.js";import{_ as Ie}from"./DK0z5AdL.js";import{_ as Pe}from"./Be_NR6f5.js";import{V as Be}from"./CxfdSycM.js";const[Fe,Ce]=te("PinInputRoot");var Se=X({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(l,{emit:v}){const e=l,r=v,{mask:o,otp:w,placeholder:F,type:S,disabled:y,dir:u}=le(e),{forwardRef:A}=se(),q=re(u),s=ie(e,"modelValue",r,{defaultValue:e.defaultValue??[],passive:e.modelValue===void 0}),c=B(()=>Array.isArray(s.value)?[...s.value]:[]),a=R(new Set);function p(h){a.value.add(h)}const D=B(()=>e.type==="number"),M=B(()=>c.value.filter(x=>!!x||D.value&&x===0).length===a.value.size);return Z(s,()=>{M.value&&r("complete",s.value)},{deep:!0}),Ce({modelValue:s,currentModelValue:c,mask:o,otp:w,placeholder:F,type:S,dir:q,disabled:y,isCompleted:M,inputElements:a,onInputElementChange:p,isNumericMode:D}),(h,x)=>(d(),g(n(G),V(h.$attrs,{ref:n(A),dir:n(q),"data-complete":M.value?"":void 0,"data-disabled":n(y)?"":void 0}),{default:k(()=>[f(h.$slots,"default",{modelValue:n(s)}),K(Be,{id:h.id,as:"input",feature:"focusable",tabindex:"-1",value:c.value.join(""),name:h.name??"",disabled:n(y),required:h.required,onFocus:x[0]||(x[0]=z=>Array.from(a.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),Ae=Se,Me=X({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(l){const v=l,e=Fe(),r=B(()=>Array.from(e.inputElements.value)),o=B(()=>e.currentModelValue.value[v.index]),w=B(()=>v.disabled||e.disabled.value),F=B(()=>e.otp.value),S=B(()=>e.mask.value),{primitiveElement:y,currentElement:u}=ne();function A(t){const i=t.target;if((t.data?.length??0)>1){h(i.value);return}if(e.isNumericMode.value&&!/^\d*$/.test(i.value)){i.value=i.value.replace(/\D/g,"");return}i.value=t.data??"",z(v.index,i.value);const m=r.value[v.index+1];m&&m.focus()}function q(){const t=u.value;ue(()=>{t&&!t.value&&(t.placeholder=e.placeholder.value)})}function s(t){de(t,ce(),void 0,{itemsArray:r.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:e.dir.value})}function c(t){if(t.preventDefault(),t.target.value)z(v.index,"");else{const b=r.value[v.index-1];b&&(b.focus(),z(v.index-1,""))}}function a(t){t.key==="Delete"&&(t.preventDefault(),z(v.index,""))}function p(t){const i=t.target;i.setSelectionRange(1,1),i.value||(i.placeholder="")}function D(t){q()}function M(t){t.preventDefault();const i=t.clipboardData;if(!i)return;const m=i.getData("text");h(m)}function h(t){const i=[...e.currentModelValue.value],m=t.length>=r.value.length?0:v.index,b=Math.min(m+t.length,r.value.length);for(let I=m;I<b;I++){const N=r.value[I],E=t[I-m];e.isNumericMode.value&&!/^\d*$/.test(E)||(i[I]=E,N.focus())}e.modelValue.value=i,r.value[b]?.focus()}function x(t){let i=t.length-1;for(;i>=0&&t[i]==="";)t.pop(),i--;return t}function z(t,i){const m=[...e.currentModelValue.value];if(e.isNumericMode.value){const b=+i;i===""||isNaN(b)?delete m[t]:m[t]=b}else m[t]=i;e.modelValue.value=x(m)}return Z(o,()=>{o.value||q()}),_(()=>{e.onInputElementChange(u.value)}),oe(()=>{e.inputElements?.value.delete(u.value)}),(t,i)=>(d(),g(n(G),{ref_key:"primitiveElement",ref:y,autocapitalize:"none",as:t.as,"as-child":t.asChild,autocomplete:F.value?"one-time-code":"false",type:S.value?"password":"text",inputmode:n(e).isNumericMode.value?"numeric":"text",pattern:n(e).isNumericMode.value?"[0-9]*":void 0,placeholder:n(e).placeholder.value,value:o.value,disabled:w.value,"data-disabled":w.value?"":void 0,"data-complete":n(e).isCompleted.value?"":void 0,"aria-label":`pin input ${t.index+1} of ${r.value.length}`,onInput:i[0]||(i[0]=m=>A(m)),onKeydown:[O(s,["left","right","up","down","home","end"]),O(c,["backspace"]),O(a,["delete"])],onFocus:p,onBlur:D,onPaste:M},{default:k(()=>[f(t.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ze=Me;const De={slots:{root:"relative inline-flex items-center gap-1.5",base:["rounded-md border-0 placeholder:text-dimmed text-center focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"]},variants:{size:{xs:{base:"size-6 text-xs"},sm:{base:"size-7 text-xs"},md:{base:"size-8 text-sm"},lg:{base:"size-9 text-sm"},xl:{base:"size-10 text-base"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},highlight:{true:""}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ee={__name:"UPinInput",props:{as:{type:null,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},length:{type:[Number,String],required:!1,default:5},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:Array,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},mask:{type:Boolean,required:!1},modelValue:{type:null,required:!1},name:{type:String,required:!1},otp:{type:Boolean,required:!1},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"}},emits:["update:modelValue","complete","change","blur"],setup(l,{expose:v,emit:e}){const r=l,o=e,w=ee(),F=pe(me(r,"disabled","id","mask","name","otp","required","type"),o),{emitFormInput:S,emitFormFocus:y,emitFormChange:u,emitFormBlur:A,size:q,color:s,id:c,name:a,highlight:p,disabled:D,ariaAttrs:M}=fe(r),h=B(()=>U({extend:U(De),...w.ui?.pinInput||{}})({color:s.value,variant:r.variant,size:q.value,highlight:p.value})),x=R([]),z=R(!1);function t(b){const I=new Event("change",{target:{value:b}});o("change",I),u()}function i(b){(!b.relatedTarget||z.value)&&(o("blur",b),A())}function m(){r.autofocus&&x.value[0]?.$el?.focus()}return _(()=>{setTimeout(()=>{m()},r.autofocusDelay)}),v({inputsRef:x}),(b,I)=>(d(),g(n(Ae),V({...n(F),...n(M)},{id:n(c),name:n(a),placeholder:l.placeholder,"model-value":l.modelValue,"default-value":l.defaultValue,class:h.value.root({class:[r.ui?.root,r.class]}),"onUpdate:modelValue":I[0]||(I[0]=N=>n(S)()),onComplete:t}),{default:k(()=>[(d(!0),C(H,null,L(n(ve)(r.length),(N,E)=>(d(),g(n(ze),{key:N,ref_for:!0,ref:ae=>x.value[E]=ae,index:E,class:$(h.value.base({class:r.ui?.base})),disabled:n(D),onBlur:i,onFocus:n(y)},null,8,["index","class","disabled","onFocus"]))),128))]),_:1},16,["id","name","placeholder","model-value","default-value","class"]))}},Ne={slots:{root:"w-full space-y-6",header:"flex flex-col text-center",leading:"mb-2",leadingIcon:"size-8 shrink-0 inline-block",title:"text-xl text-pretty font-semibold text-highlighted",description:"mt-1 text-base text-pretty text-muted",body:"gap-y-6 flex flex-col",providers:"space-y-3",checkbox:"",select:"w-full",password:"w-full",otp:"w-full",input:"w-full",separator:"",form:"space-y-5",footer:"text-sm text-center text-muted mt-2"}},Ke={__name:"UAuthForm",props:{as:{type:null,required:!1},icon:{type:[String,Object],required:!1},title:{type:String,required:!1},description:{type:String,required:!1},fields:{type:Array,required:!1},providers:{type:Array,required:!1},separator:{type:[String,Object],required:!1,default:"or"},submit:{type:Object,required:!1},schema:{type:null,required:!1},validate:{type:Function,required:!1},validateOn:{type:Array,required:!1},validateOnInputDelay:{type:Number,required:!1},disabled:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingAuto:{type:Boolean,required:!1},class:{type:null,required:!1},onSubmit:{type:Function,required:!1},ui:{type:null,required:!1}},emits:["submit"],setup(l,{expose:v}){const e=l,r=ge((e.fields||[]).reduce((s,c)=>(c.name&&(s[c.name]=c.defaultValue),s),{})),o=ye(),{t:w}=he(),F=ee(),S=be("formRef"),y=R(!1),u=B(()=>U({extend:U(Ne),...F.ui?.authForm||{}})());v({formRef:S,state:r});function A(s){const c=["name","errorPattern","help","error","hint","size","required","eagerValidation","validateOnInputDelay"];return s.type==="checkbox"?W(s,c):W(s,[...c,"label","description"])}function q(s){const c=["errorPattern","help","error","hint","size","required","eagerValidation","validateOnInputDelay"];return s.type==="checkbox"||s.type==="select"||s.type==="otp"?s.type==="checkbox"?T(s,[...c,"type"]):T(s,[...c,"type","label","description"]):T(s,[...c,"label","description"])}return(s,c)=>(d(),g(n(G),{as:l.as,class:$(u.value.root({class:[e.ui?.root,e.class]}))},{default:k(()=>[l.icon||o.icon||l.title||o.title||l.description||o.description||o.header?(d(),C("div",{key:0,class:$(u.value.header({class:e.ui?.header}))},[f(s.$slots,"header",{},()=>[l.icon||o.leading?(d(),C("div",{key:0,class:$(u.value.leading({class:e.ui?.leading}))},[f(s.$slots,"leading",{},()=>[l.icon?(d(),g(Ve,{key:0,name:l.icon,class:$(u.value.leadingIcon({class:e.ui?.leadingIcon}))},null,8,["name","class"])):P("",!0)])],2)):P("",!0),l.title||o.title?(d(),C("div",{key:1,class:$(u.value.title({class:e.ui?.title}))},[f(s.$slots,"title",{},()=>[Q(Y(l.title),1)])],2)):P("",!0),l.description||o.description?(d(),C("div",{key:2,class:$(u.value.description({class:e.ui?.description}))},[f(s.$slots,"description",{},()=>[Q(Y(l.description),1)])],2)):P("",!0)])],2)):P("",!0),qe("div",{class:$(u.value.body({class:e.ui?.body}))},[l.providers?.length||o.providers?(d(),C("div",{key:0,class:$(u.value.providers({class:e.ui?.providers}))},[f(s.$slots,"providers",{},()=>[(d(!0),C(H,null,L(l.providers,(a,p)=>(d(),g(j,V({key:p,block:"",color:"neutral",variant:"subtle"},{ref_for:!0},a),null,16))),128))])],2)):P("",!0),l.providers?.length&&l.fields?.length?(d(),g(ke,V({key:1},typeof l.separator=="object"?l.separator:{label:l.separator},{class:u.value.separator({class:e.ui?.separator})}),null,16,["class"])):P("",!0),l.fields?.length?(d(),g(we,{key:2,ref_key:"formRef",ref:S,state:r,schema:l.schema,validate:l.validate,"validate-on":l.validateOn,class:$(u.value.form({class:e.ui?.form})),disabled:l.disabled,"loading-auto":l.loadingAuto,onSubmit:l.onSubmit},{default:k(()=>[(d(!0),C(H,null,L(l.fields,a=>(d(),g(xe,V({key:a.name},{ref_for:!0},A(a)),$e({default:k(()=>[f(s.$slots,`${a.name}-field`,V({ref_for:!0},{state:r,field:a}),()=>[a.type==="checkbox"?(d(),g(Ie,V({key:0,modelValue:r[a.name],"onUpdate:modelValue":p=>r[a.name]=p,class:u.value.checkbox({class:e.ui?.checkbox})},{ref_for:!0},q(a)),null,16,["modelValue","onUpdate:modelValue","class"])):a.type==="select"?(d(),g(Pe,V({key:1,modelValue:r[a.name],"onUpdate:modelValue":p=>r[a.name]=p,class:u.value.select({class:e.ui?.select})},{ref_for:!0},q(a)),null,16,["modelValue","onUpdate:modelValue","class"])):a.type==="otp"?(d(),g(Ee,V({key:2,id:a.name,modelValue:r[a.name],"onUpdate:modelValue":p=>r[a.name]=p,class:u.value.otp({class:e.ui?.otp})},{ref_for:!0},{...q(a),...typeof a.otp=="object"?a.otp:{}},{otp:""}),null,16,["id","modelValue","onUpdate:modelValue","class"])):a.type==="password"?(d(),g(J,V({key:3,modelValue:r[a.name],"onUpdate:modelValue":p=>r[a.name]=p,class:u.value.password({class:e.ui?.password})},{ref_for:!0},q(a),{type:y.value?"text":"password"}),{trailing:k(()=>[K(j,{color:"neutral",variant:"link",size:"sm",icon:y.value?n(F).ui.icons.eyeOff:n(F).ui.icons.eye,"aria-label":y.value?n(w)("authForm.hidePassword"):n(w)("authForm.showPassword"),"aria-pressed":y.value,"aria-controls":"password",onClick:c[0]||(c[0]=p=>y.value=!y.value)},null,8,["icon","aria-label","aria-pressed"])]),_:1},16,["modelValue","onUpdate:modelValue","class","type"])):(d(),g(J,V({key:4,modelValue:r[a.name],"onUpdate:modelValue":p=>r[a.name]=p,class:u.value.input({class:e.ui?.input})},{ref_for:!0},q(a)),null,16,["modelValue","onUpdate:modelValue","class"]))])]),_:2},[o[`${a.name}-label`]?{name:"label",fn:k(()=>[f(s.$slots,`${a.name}-label`)]),key:"0"}:void 0,o[`${a.name}-description`]?{name:"description",fn:k(()=>[f(s.$slots,`${a.name}-description`)]),key:"1"}:void 0,o[`${a.name}-hint`]?{name:"hint",fn:k(()=>[f(s.$slots,`${a.name}-hint`)]),key:"2"}:void 0,o[`${a.name}-help`]?{name:"help",fn:k(()=>[f(s.$slots,`${a.name}-help`)]),key:"3"}:void 0,o[`${a.name}-error`]?{name:"error",fn:k(()=>[f(s.$slots,`${a.name}-error`)]),key:"4"}:void 0]),1040))),128)),o.validation?f(s.$slots,"validation",{key:0}):P("",!0),f(s.$slots,"submit",{loading:l.loading},()=>[K(j,V({type:"submit",label:n(w)("authForm.submit"),block:"",loading:l.loading,"loading-auto":l.loadingAuto},l.submit),null,16,["label","loading","loading-auto"])])]),_:3},8,["state","schema","validate","validate-on","class","disabled","loading-auto","onSubmit"])):P("",!0)],2),o.footer?(d(),C("div",{key:1,class:$(u.value.footer({class:e.ui?.footer}))},[f(s.$slots,"footer")],2)):P("",!0)]),_:3},8,["as","class"]))}};export{Ke as _};
